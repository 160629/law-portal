var TABPANE_TYPE_DIV="DIV";var TABPANE_TYPE_IFRAME="IFRAME";var TABPANE_STATUS_NOMAL=1;var TABPANE_STATUS_OVER=2;var TABPANE_STATUS_ACTIVE=3;var TABPANE_STATUS_DISABLED=4;var TABPANE_STATUS_CLOSED=5;var TABPANE_STATUS_HIDDEN=5;var TAB_STYLE_NOMAL="nomal";var TAB_STYLE_OVER="hover";var TAB_STYLE_ACTIVE="active";var TAB_STYLE_DISABLED="disabled";var TAB_STYLE_LEFT="left";var TAB_STYLE_MID="mid";var TAB_STYLE_RIGHT="right";var TAB_STYLE_TABLE="container";function TabPane(a){this.id=a;PageControl.add(a,this);this.subTabs=new Array();this.currTab=null;this.defaultTab=0;this.isTitleOut=false;this.titleContainer=null;this.bodyContainer=null;this.bgColor="#f1f1f1";this.borderColor="#C0C0C0";this.container=null;this.width="100%";this.height="100%";this.titleWidth=120;this.__titleTR=null;this.noCacheIframe=$create("<iframe name='"+this.id+"'/>");this.noCacheIframe.name=this.id;this.noCacheIframe.style.border=0;this.noCacheIframe.frameBorder=0;this.noCacheIframe.style.width="100%";this.noCacheIframe.style.height="100%";this.pilot=null;this.pilotIndex=0;this.firstButton=null;this.nextButton=null;this.privousButton=null;this.lastButton=null;this.maxTabs=0;this.inited=false;this.pilotInited=false;this._titleTD=null;this.titleAlign="top";this.styleSuffix=""}TabPane.prototype.append=function(a){this.subTabs.push(a);a.group=this};TabPane.prototype.getLength=function(){return this.subTabs.length};TabPane.prototype.getTabs=function(){return this.subTabs};TabPane.prototype.getActiveTab=function(){return this.currTab};TabPane.prototype.getActiveTabIndex=function(){return this.getCurrIndex()};TabPane.prototype.remove=function(b){for(var c=0;c<this.subTabs.length;c++){if(this.subTabs[c]==b){this.subTabs.splice(c,1);if(this.currTab==b){this.currTab=null;var a=c-1;a=a<0?0:a;this.selectTab(a)}return true}}return false};TabPane.prototype.buildTitles=function(){var c=this.getWidth();var a=0;for(var b=0;b<this.subTabs.length;b++){this.appendTitle(this.subTabs[b]);a+=this.subTabs[b].getWidth();if(c-a<60){this.subTabs[b].hideTitle();this.isTitleOut=true}else{this.subTabs[b].showTitle()}}if(this.isTitleOut){this.initPilot()}this.inited=true};TabPane.prototype.getWidth=function(){var c=0;if(String(this.width).indexOf("%")>0){c=parseInt(this.container.offsetWidth)}else{c=parseInt(this.width)}if(c==0){var b=this.container.parentNode;while(b){var a=parseInt(b.offsetWidth);if(a!=0){return a}b=b.parentNode}return document.body.offsetWidth}else{return c}};TabPane.prototype.getIndex=function(a){for(var b=0;b<this.subTabs.length;b++){if(this.subTabs[b]==a){return b}}return -1};TabPane.prototype.getCurrIndex=function(){return this.getIndex(this.currTab)};TabPane.prototype.getShowTabIndex=function(){for(var a=0;a<this.subTabs.length;a++){if(!this.subTabs[a].isHidden){return a}}return -1};TabPane.prototype.showTitleEnd=function(){var a=this.subTabs[this.subTabs.length-1];if(a){return !a.isHidden}return true};TabPane.prototype.refreshTitles=function(){this.isTitleOut=false;var d=this.getWidth();var a=0;var b=this.getShowTabIndex();for(var c=0;c<this.subTabs.length;c++){if(c<b){this.subTabs[c].hideTitle()}else{a+=this.subTabs[c].getWidth();if(d-a<60){this.subTabs[c].hideTitle();this.isTitleOut=true}else{this.subTabs[c].showTitle()}}}if(this.isTitleOut){if(!this.pilotInited){this.initPilot()}this.showPilot(this.pilotIndex);this.pilot.style.display=""}else{if(this.pilot){this.pilot.style.display="none"}}};TabPane.showNextTab=function(c){var b=$id(c);if(!b.showTitleEnd()){var a=b.getShowTabIndex()+1;b.showPilot(a)}};TabPane.showPrivousTab=function(c){var b=$id(c);var a=b.getShowTabIndex()-1;b.showPilot(a)};TabPane.prototype.initPilot=function(){this.pilot=$id(this.id+"_nav_pilot");var a='<table  border="0" cellspacing="0" cellpadding="0" style="width:40px;height:20px;overflow:hidden"><tr><td>';a+="<div onclick=\"TabPane.showPrivousTab('"+this.id+'\')" onmouseover="this.className=\'button-privous-hover\'" onmouseout="this.className=\'button-privous\'" class="button-privous">&nbsp;</div>';a+="</td><td>";a+="<div onclick=\"TabPane.showNextTab('"+this.id+'\')" class="button-next" onmouseover="this.className=\'button-next-hover\'" onmouseout="this.className=\'button-next\'">&nbsp;</div>';a+="</td></tr></table>";this.pilot.innerHTML=a;this.pilot.style.display="";this.pilotInited=true};TabPane.prototype.showPilot=function(b){var d=this.getWidth();var a=0;for(var c=0;c<this.subTabs.length;c++){if(c<b){this.subTabs[c].hideTitle();this.isTitleOut=true}else{a+=this.subTabs[c].getWidth();if(d-a<60){this.subTabs[c].hideTitle();this.isTitleOut=true}else{this.subTabs[c].showTitle()}}}this.pilotIndex=b};TabPane.prototype.appendTitle=function(b){var c=$create("td");var a='<table class="'+TAB_STYLE_TABLE+'" border="0" cellspacing="0" cellpadding="0"><tr>';a+='<td><div class="'+TAB_STYLE_LEFT+'"></div></td>';a+='<td nowarp class="'+TAB_STYLE_MID+'">';a+='<div style="white-space:nowrap;page-break-before: always;page-break-after: always;">';a+=b.getTitle();a+="</div></td>";if(b.showCloseButton){a+='<td nowarp class="'+TAB_STYLE_MID+'">';a+='<a class="close" href="#" onclick="$o(\''+this.id+"').getTab('"+b.id+"').close();\">";if(isIE){a+="<div></div></a>"}else{a+='<div class="close"></div></a>'}a+="</td>"}if(b.allowReload){a+='<td nowarp class="'+TAB_STYLE_MID+'">';a+='<a class="reload" href="#" onclick="$o(\''+this.id+"').getTab('"+b.id+"').reload();\">";if(isIE){a+="<div></div></a>"}else{a+='<div class="reload"></div></a>'}a+="</td>"}a+='<td><div class="'+TAB_STYLE_RIGHT+'"></div></div>';a+="</td></tr></table>";c.className=TAB_STYLE_NOMAL+this.styleSuffix;c.innerHTML=a;b.__titleTD=c;b.setTitleTD();b.initStatus();this.__titleTR.insertBefore(c,this._titleTD);b.titleWidth=c.offsetWidth};TabPane.prototype.init=function(){this.container=$id(this.id+"_container");this.titleContainer=$id(this.id+"_title_container");this.bodyContainer=$id(this.id+"_body");this.__titleTR=$id(this.id+"_nav_tr");this._titleTD=$create("td");this.__titleTR.style.width="100%";this.__pilotContainer=$id(this.id+"_nav_pilot_container");if(this.titleAlign=="top"){this.styleSuffix="";this._titleTD.className="right-top";this._titleTD.style.overflow="hidden"}else{this.styleSuffix="-down";this.bodyContainer.className="tab-body-down";this._titleTD.className="right-buttom"}this.__titleTR.insertBefore(this._titleTD,this.__pilotContainer);this.buildTitles();this._titleTD.innerHTML="&nbsp;";this._titleTD.style.width="100%";this.selectTab(this.defaultTab)};TabPane.prototype.closeTab=function(b){var a;if(typeof(b)=="object"){a=b}else{a=this.getTab(b)}if(a instanceof TabPage){a.close()}};TabPane.prototype.selectTab=function(b){var a;if(typeof(b)=="object"){a=b}else{a=this.getTab(b)}if(a instanceof TabPage){this.activeTab(a);if(this.isTitleOut){this.showPilot(this.pilotIndex)}}};TabPane.prototype.getTab=function(b){if(typeof(b)=="object"){if(b instanceof TabPage){return b}}else{for(var a=0;a<this.subTabs.length;a++){if(this.subTabs[a].id==b){return this.subTabs[a]}}if(!isNaN(b)){if(this.subTabs[b]){return this.subTabs[b]}}}return null};TabPane.prototype.activeTab=function(a){if(!a.allowSelect){return false}if(this.currTab){if(this.currTab==a){return false}if(this.currTab.__onUnselect()){if(a.show()){this.currTab.hide();this.currTab=a;return true}}}else{a.show();this.currTab=a;return true}return false};TabPane.prototype.createBlankTab=function(d,h,g,a,e,b){d=d||this.id+Math.random();var i=this.getTab(d);if(i){alert("The TabPage of id:"+d+",title:"+i.getTitle()+" is exists!");return null}var f="";f+="<table border='0' cellspacing='0' cellpadding='0' width='100%' height='100%'>";f+="	<tr>";f+="		<td id='"+d+"_container' valign='top'  style='display:none;width:100%;height:100%'>";f+="		</td>";f+="	</tr>";f+="</table>";var k=$create(f);k.style.width="100%";k.style.height="100%";var c=firstElement(this.bodyContainer);c.appendChild(k);var j=new TabPage(d);j.type=g;j.src=a;j.title=h;j.cache=b;j.showCloseButton=e;j.init();this.append(j);if(this.inited){this.appendTitle(j)}this.refreshTitles();return j};TabPane.prototype.createIframeTab=function(c,b,a,d){return this.createBlankTab(d,c,"IFRAME",b,false,a)};TabPane.prototype.createDivTab=function(c,b,d){var a=this.createBlankTab(d,c,"DIV",null,false,null);a.container.innerHTML=b;return a};function TabPage(a){this.id=a;PageControl.add(a,this);this.title=a;this.type=TABPANE_TYPE_DIV;this.src=null;this.container=null;this.iframe=null;this.onSelectFunc=null;this.onUnSelectFunc=null;this.onRefreshFunc=null;this.__titleTD=null;this.showCloseButton=true;this.status=TABPANE_STATUS_NOMAL;this.group=null;this.cache=false;this.allowSelect=true;this.params=[];this.containerTable=null;this.titleWidth=80;this.isHidden=false;this.isLoad=false;this.allowReload=false}TabPage.prototype.__onSelect=function(){if(this.onSelectFunc){try{return eval(this.onSelectFunc+"(this)")}catch(e){$handle(e);return false}}return true};TabPage.prototype.__onUnselect=function(){if(this.onUnSelectFunc){try{var ret=eval(this.onUnSelectFunc+"(this)");if(ret===false){return false}else{this.container.style.display="none";return true}}catch(e){$handle(e);return false}}return true};TabPage.prototype.reload=function(){if(this.type==TABPANE_TYPE_IFRAME){if(this.isLoad){var a=this.getUrl();if(a.indexOf("?")>=0){a+="&_date="+new Date()}else{a+="?_date="+new Date()}this.iframe.src=a}else{this.iframe.src=this.getUrl();this.isLoad=true}}};TabPage.prototype.disabled=function(){if(this.status==TABPANE_STATUS_NOMAL){this.allowSelect=false;this.status=TABPANE_STATUS_DISABLED;this.__titleTD.className=TAB_STYLE_DISABLED+this.group.styleSuffix}};TabPage.prototype.enabled=function(){if(this.status==TABPANE_STATUS_DISABLED){this.allowSelect=true;this.status=TABPANE_STATUS_NOMAL;this.__titleTD.className=TAB_STYLE_NOMAL+this.group.styleSuffix}};TabPage.prototype.initStatus=function(){if(this.allowSelect){this.enabled()}else{this.disabled()}};TabPage.prototype.init=function(){this.container=$id(this.id+"_container");this.containerTable=getParentByTagName(this.container,"table");if(!isIE){this.containerTable.style.display="none"}if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){this.iframe=$create("<iframe name='"+this.id+"'/>");this.iframe.style.border=0;this.iframe.frameBorder=0;this.iframe.style.width="100%";this.iframe.style.height="100%";this.container.appendChild(this.iframe);this.isLoad=false}}};TabPage.prototype.load=function(a){this.src=a;this.group.selectTab(this);if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){this.iframe.src=this.getUrl()}else{this.group.noCacheIframe.src=this.getUrl()}}};TabPage.prototype.getTitle=function(){if(this.onRefreshFunc){try{return eval(this.onRefreshFunc+"(this.title,this)")}catch(e){}}return this.title};TabPage.prototype.onClose=function(){};TabPage.prototype.close=function(){try{this.onClose()}catch(a){$handle(a);return false}if(this.group.getLength()>1){this.group.remove(this);this.__titleTD.parentNode.removeChild(this.__titleTD);this.container.id="";this.container.style.display="none";if(!isIE){this.containerTable.style.display="none"}this.group.refreshTitles()}};TabPage.prototype.active=function(){var a=this.getTabPane();a.activeTab(this)};TabPage.prototype.hide=function(){this.container.style.display="none";this.containerTable.style.display="none";if(this.status!=TABPANE_STATUS_DISABLED){this.status=TABPANE_STATUS_NOMAL;this.__titleTD.className=TAB_STYLE_NOMAL+this.group.styleSuffix}else{this.__titleTD.className=TAB_STYLE_DISABLED+this.group.styleSuffix}this.setTitleTD()};TabPage.prototype.show=function(){var a=this.__onSelect();if(a===false){return false}this.container.style.display="";this.containerTable.style.display="";if(this.type==TABPANE_TYPE_IFRAME){if(!this.cache){this.container.appendChild(this.group.noCacheIframe);this.group.noCacheIframe.src=this.getUrl()}else{if(!this.isLoad){this.reload();this.isLoad=true}}}this.status=TABPANE_STATUS_ACTIVE;this.__titleTD.className=TAB_STYLE_ACTIVE+this.group.styleSuffix;this.setTitleTD();return true};TabPage.prototype.setTitleTD=function(){var b=this.group;var c=this.__titleTD;var a=this;c.onclick=function(){var e=this.childNodes[0].rows[0];var f=e.cells[0].getElementsByTagName("div")[0];f.style.backgroundImage="";f=e.cells[e.cells.length-1].getElementsByTagName("div")[0];for(var d=1;d<e.cells.length-1;d++){e.cells[d].style.backgroundImage=""}f.style.backgroundImage="";b.selectTab(a)};c.onmouseover=function(){if(a.status==TABPANE_STATUS_NOMAL){var f=this.childNodes[0].rows[0];var g=f.cells[0].getElementsByTagName("div")[0];var e=getCurrentStyle(g,"backgroundImage");g.style.backgroundImage=e.replace("tabs_nomal_left","tabs_hover_left");g=f.cells[f.cells.length-1].getElementsByTagName("div")[0];for(var d=1;d<f.cells.length-1;d++){f.cells[d].style.backgroundImage=e.replace("tabs_nomal_left","tabs_hover_center")}g.style.backgroundImage=e.replace("tabs_nomal_left","tabs_hover_right")}eventManager.stopPropagation()};c.onmouseout=function(){if(a.status==TABPANE_STATUS_NOMAL){var e=this.childNodes[0].rows[0];var f=e.cells[0].getElementsByTagName("div")[0];f.style.backgroundImage="";f=e.cells[e.cells.length-1].getElementsByTagName("div")[0];for(var d=1;d<e.cells.length-1;d++){e.cells[d].style.backgroundImage=""}f.style.backgroundImage=""}eventManager.stopPropagation()}};TabPage.prototype.addParam=function(a,b){this.params.push({key:a,value:b})};TabPage.prototype.getUrl=function(){if(this.src){var d="";for(var b=0;b<this.params.length;b++){var c=this.params[b];d+="&"+c.key+"="+encodeURI(c.value)}var a=this.src;if(a.indexOf("/")==0){if(a.indexOf(contextPath)!=0){a=contextPath+a}}if(a.indexOf("?")<0){if(d.length>0){d="?"+d}d=d.replace("&","")}return a+d}return null};TabPage.prototype.hideTitle=function(){this.isHidden=true;this.__titleTD.style.display="none"};TabPage.prototype.showTitle=function(){this.isHidden=false;this.__titleTD.style.display=""};TabPage.prototype.getWindow=function(){var a=window;if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){a=this.iframe.contentWindow}else{a=this.group.noCacheIframe.contentWindow}}return a};TabPage.prototype.getDocument=function(){var a=document;if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){a=this.iframe.document||this.iframe.contentDocument}else{a=this.group.noCacheIframe.document||this.group.noCacheIframe.contentDocument}}return a};TabPage.prototype.getTabPane=function(){return this.group};TabPage.prototype.getWidth=function(){if(this.titleWidth==0){if(this.title){return(getTextWidth(this.title)+12)}else{return 80}}return this.titleWidth};function getTextWidth(c){var b=document.createElement("span");b.innerHTML=c;document.body.appendChild(b);var a=b.offsetWidth;document.body.removeChild(b);return a};