var EOSLOG_LEVEL=EOSLOG_LEVEL||"debug";var EOSDEBUG=EOSDEBUG==undefined?false:EOSDEBUG;function escapeHTML(a){if(typeof(a)=="string"){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>")}else{return a}}if(typeof(EOSLog)!="function"){EOSLog=function(){};EOSLog.styles=new Array();EOSLog.messages=[];EOSLog.ID="EOS_LOG_CONSOLE";EOSLog.BODY_ID="EOS_LOG_CONSOLE_BODY";EOSLog.BUTTONS_ID="EOS_LOG_CONSOLE_BUTTONS";EOSLog.EVAL_ID="EOS_LOG_EVAL_ID";EOSLog.EVAL_INPUT_ID="EOS_LOG_EVAL_INPUT_ID";EOSLog.EVAL_RUN_ID="EOS_LOG_EVAL_RUN_ID";EOSLog.EVAL_CLEAR_ID="EOS_LOG_EVAL_CLEAR_ID";EOSLog.EVAL_SIGN_ID="EVAL_SIGN_ID";EOSLog.EVAL_SIGN_SELECT_ID="EVAL_SIGN_SELECT_ID";EOSLog.index=0;EOSLog.iDiffX=0;EOSLog.iDiffY=0;EOSLog.hasOut=false;EOSLog.timeLog=new Array();EOSLog.panel=null;EOSLog.topWin=window;EOSLog.doc=document}EOSLog.log=function(c,a){var b=new Date();EOSLog.messages.push({level:c,time:b,message:a,out:false});if(EOSLog.panel){EOSLog.refresh()}};EOSLog.refresh=function(){if(EOSLog.panel){var a;for(a=EOSLog.index;a<EOSLog.messages.length;a++){EOSLog.print(EOSLog.messages[a])}EOSLog.index=a==0?0:a-1}};EOSLog.info=function(a){EOSLog.log("info",escapeHTML(a))};EOSLog.error=function(a){EOSLog.log("error",escapeHTML(a))};EOSLog.debug=function(a){EOSLog.log("debug",escapeHTML(a))};EOSLog.warn=function(a){EOSLog.log("warn",escapeHTML(a))};EOSLog.handle=function(b){var a=new StringBuffer();a.append(EOSLOG_ERROR_TYPE).append(b.name).append(".");a.append(EOSLOG_ERROR_INFO).append(b.message).append(".");if(b.number){a.append(EOSLOG_ERROR_CODE).append(b.number).append(".>")}if(b.fileName){a.append(EOSLOG_ERROR_URL).append(b.fileName).append(".")}if(b.lineNumber){a.append(EOSLOG_ERROR_LINE).append(b.lineNumber).append(".")}if(b.stack){a.append(EOSLOG_ERROR_STACK).append(b.stack.replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).append("<br>")}if(b.description){a.append(EOSLOG_ERROR_DETAIL).append(b.description).append("<br>")}if(EOSLog.handle.caller&&EOSLog.handle.caller.caller){a.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(EOSLog.handle.caller.caller.toString().replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).append("<br>")}EOSLog.log("error",a.toString())};window.onerror=function(b,d,c){if(EOSDEBUG){var a=new StringBuffer();if(isIE){try{var g=EOSLog.getDetailError(window.onerror.caller,b,d,c);a.append(EOSLOG_ERROR_INFO).append(g.sMessage).append("<br> ");a.append(EOSLOG_ERROR_URL).append(g.sUrl).append("<br> ");a.append(EOSLOG_ERROR_LINE).append(g.sLine).append("<br> ");a.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(g.errFunc).append("<br>")}catch(f){}}else{a.append(EOSLOG_ERROR_INFO).append(b).append("<br> ");a.append(EOSLOG_ERROR_URL).append(d).append("<br> ");a.append(EOSLOG_ERROR_LINE).append(c).append("<br> ")}EOSLog.log("error",a.toString())}};EOSLog.isShow=function(c,b){var a=EOSLog.styles[c];if(b.checked){a.style.display="block"}else{a.style.display="none"}};EOSLog.clear=function(){var a=$id(EOSLog.BODY_ID,EOSLog.doc);a.innerHTML=""};EOSLog.console=function(){var a=$create("div",EOSLog.doc);a.style.position="absolute";a.style.left="300px";a.style.top="300px";var f=new StringBuffer();if(isIE){f.append("<iframe src='"+blankURL+'\' style="position:absolute;z-index:-1; frameborder="0" ></iframe>')}var b="";var d=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1;if(d){b='style="filter:alpha(opacity=50)"'}f.append('<div style="z-index:1000">');f.append('<TABLE  cellspacing="0" cellpadding="0"  class="eos-dialog"><TR><TD '+b+' class="left-top-conner"><div class="ieBlank"></div></TD><TD  '+b+' class="top"></TD><TD  '+b+' class="right-top-conner"><div class="ieBlank"></div></TD></TR><TR><TD  '+b+' class="left"><div class="ieBlank"></div></TD><TD style="background-color: #eaf0f2;">');f.append("<div style='display:none;position: absolute;height=200px;overflow-y:auto; z-index: 1000;' id='").append(EOSLog.EVAL_SIGN_ID).append("'>");f.append("<select class='EOS-LOG-SIGN-DIV' size='10' id='").append(EOSLog.EVAL_SIGN_SELECT_ID).append("'></select></div>");f.append("<div onmouseup=\"style.cursor='auto'\" onmousedown=\"style.cursor='move';\" class='EOS-LOG-BUTTONS' style=\"width:100%\"id='");f.append(EOSLog.BUTTONS_ID).append("'><table width=\"100%\"align='right' border='0' style='font-size:9pt'><tr><td width=\"300px\">");f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'time\',this)" name="time" value="1">TIME');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'info\',this)" name="info" value="1">INFO');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'debug\',this)" name="degbug" value="1">DEBUG');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'warn\',this)" name="warn" value="1">WARN');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'error\',this)" name="error" value="1">ERROR</td><td align=\'right\'>');f.append('&nbsp;<div  id="eos_log_button0"  class="eos-button" onclick="EOSLog.clear()" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Clear</div></div>&nbsp;');f.append('<div id="eos_log_button1"  class="eos-button" onclick="EOSLog.command()" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Cmd</div></div>&nbsp;');f.append('<div id="eos_log_button2"  class="eos-button" onclick="EOSLog.hide()"onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Close</div></div>&nbsp;');f.append("</td></tr></table></div>");f.append("<div status='hide' class='EOS-LOG-EVAL' id='").append(EOSLog.EVAL_ID).append("' style='width:100%;display:none'><div>");f.append("<textarea style='width:100%;height:100px;font-size: 12px' id='").append(EOSLog.EVAL_INPUT_ID).append("'></textarea>");f.append("</div><div height='20'>");f.append('<div  id="eos_log_button3"  class="eos-button" onclick="EOSLog.runEval()"onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Run</div></div>&nbsp;');f.append('<div  id="eos_log_button4"  class="eos-button" onclick="EOSLog.clearEval()"onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Clear</div></div>&nbsp;');f.append("</div>");f.append("</div>");f.append("<div style='border-top:#C0C0C0 solid 1px;overflow:scroll' class='EOS-LOG-BODY' id='").append(EOSLog.BODY_ID).append("' style='overflow:auto'></div>");f.append("</TD><TD  "+b+' class="right" id="eos_log_right"><div class="ieBlank"></div></TD></TR><TR><TD  '+b+' class="left-bottom-conner"></TD><TD  '+b+' class="bottom" id="eos_log_bottom"></TD><TD  '+b+' class="right-bottom-conner" id="eos_log_rightBottom"></TD></TR></TABLE>');f.append("</div>");a.innerHTML=f.toString();a.id=EOSLog.ID;var k=10;function c(){try{EOSLog.doc.body.appendChild(a)}catch(i){if(k>0){k--;setTimeout(c,11)}}}c();var h=$id(EOSLog.BUTTONS_ID,EOSLog.doc);a.style.display="none";EOSLog.hide();var j=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);eventManager.add(j,"keyup",EOSLog.evalKeyUp);eventManager.add(j,"keydown",EOSLog.evalKeyDown);EOSLog.hasOut=true;EOSLog.panel=$id(EOSLog.BODY_ID,EOSLog.doc);EOSLog.refresh();initDrag(a);if(isFF){for(var g=0;g<5;g++){buttonForFF(EOSLog.doc.getElementById("eos_log_button"+g))}}};EOSLog.command=function(){var a=$id(EOSLog.EVAL_ID,EOSLog.doc);if(a.style.display=="none"){a.style.display=""}else{a.style.display="none"}};EOSLog.runEval=function(){var cmd=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);var value=cmd.value;try{eval(value)}catch(err){var buffer=new StringBuffer();buffer.append(EOSLOG_ERROR_TYPE).append(err.name).append("<br>");buffer.append(EOSLOG_ERROR_INFO).append(err.message).append("<br>");if(err.number){buffer.append(EOSLOG_ERROR_CODE).append(err.number).append("<br>")}if(err.fileName){buffer.append(EOSLOG_ERROR_URL).append(err.fileName).append("<br>")}if(err.lineNumber){buffer.append(EOSLOG_ERROR_LINE).append(err.lineNumber).append("<br>")}if(err.stack){buffer.append(EOSLOG_ERROR_STACK).append(err.stack).append("<br>")}if(err.description){buffer.append(EOSLOG_ERROR_DETAIL).append(err.description).append("<br>")}buffer.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(value).append("<br>");EOSLog.log("error",EOSLOG_EVAL_ERROR+"<br>"+buffer.toString())}};EOSLog.clearEval=function(){var a=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);a.value=""};EOSLog.print=function(b){if(b.out){return}var d=$create("div",EOSLog.doc);d.className="EOS-LOG-"+b.level;var a=new StringBuffer();a.append("<table border='0'><tr><td valign='top' width='20px'>").append("<div class='EOS-LOG-TITLE-").append(b.level).append("'>");a.append(b.level).append("</div></td><td class='EOS-LOG-WORD'>").append("<div class='EOS-LOG-TIME'>runtime:").append(b.time.toLocaleTimeString());a.append("</div>").append(b.message).append("</td></tr></table>");var c=EOSLog.panel;d.innerHTML=a.toString();if(c.firstChild){c.insertBefore(d,c.firstChild)}else{c.appendChild(d)}b.out=true};EOSLog.init=function(){if(!EOSDEBUG){return false}if(window.EOSLog_inited){return}EOSLog.topWin=_get_top_window();EOSLog.doc=EOSLog.topWin.document;eventManager.add(document,"keyup",EOSLog.keypress);if(EOSLog.topWin==window){EOSLog.styles.debug=createStyle("EOS-LOG-debug",EOSLog.doc);EOSLog.styles.info=createStyle("EOS-LOG-info",EOSLog.doc);EOSLog.styles.error=createStyle("EOS-LOG-error",EOSLog.doc);EOSLog.styles.time=createStyle("EOS-LOG-time",EOSLog.doc);EOSLog.styles.warn=createStyle("EOS-LOG-warn",EOSLog.doc);EOSLog.console();EOSLog.hide()}else{if(!EOSLog.topWin.EOSLog){moveScript(document,EOSLog.doc);moveCss(document,EOSLog.doc)}}window.EOSLog_inited=true};EOSLog.keypress=function(){var a=eventManager.getKeyCode();if(a==123){EOSLog.show();return false}};EOSLog.show=function(){var a=$id(EOSLog.ID,EOSLog.doc);a.style.display="block";a.style.zIndex=getMaxZindex(EOSLog.doc)};EOSLog.hide=function(){var a=$id(EOSLog.ID,EOSLog.doc);a.style.display="none"};EOSLog.time=function(i,g,c){if(!i){i="SYSTEM"}if(!EOSLog.timeLog[i]){var f=new Date();EOSLog.timeLog[i]={time:f,msg:g}}else{var b=new Date();var h=EOSLog.timeLog[i];var d=b-h.time;var a=new StringBuffer();a.append("ID:").append(i).append("<br>");if(h.msg){a.append("start:").append(h.msg).append("<br>")}a.append(" time:<b>").append(d).append("ms</b><br>");if(g){a.append("end:").append(g)}EOSLog.log("time",a.toString());if(c){EOSLog.timeLog[i]=null}}};function $info(b){if("info".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.info(b)}}function $debug(b){if("info,debug".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.debug(b)}}function $warn(b){if("info,debug,warn".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.warn(b)}}function $error(b){if("info,debug,warn,error".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.error(b)}}function $time(b){var a=EOSLog.topWin.EOSLog||EOSLog;a.time(b)}function $handle(b){var a=EOSLog.topWin.EOSLog||EOSLog;a.handle(b)}EOSLog.enable=function(){};EOSLog.evalKeyUp=function(){var c=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);var a=eventManager.getKeyCode();var d=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(a==190){var b=EOSLog.getkeyWord(c);EOSLog.sign(c,b)}};EOSLog.selectUpOption=function(a){var b=a.selectedIndex-1;if(b>-1){var c=a.options[b];if(c){c.selected=true}}else{var c=a.options[0];if(c){c.selected=true}}};EOSLog.selectDownOption=function(a){var b=a.selectedIndex+1;var c=a.options[b];if(c){c.selected=true}else{var c=a.options[0];if(c){c.selected=true}}};EOSLog.evalKeyDown=function(){var b=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);var a=eventManager.getKeyCode();var c=$id(EOSLog.EVAL_SIGN_SELECT_ID,EOSLog.doc);var d=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(a==9){eventManager.stopPropagation();EOSLog.insertAtCaret(b,"    ")}else{if(d.style.display!="none"){if(a==38){eventManager.stopPropagation();EOSLog.selectUpOption(c);return false}else{if(a==40){eventManager.stopPropagation();EOSLog.selectDownOption(c);return false}else{if(a==13){eventManager.stopPropagation();EOSLog.insertAtCaret(b,c.value);d.style.display="none";return false}else{d.style.display="none"}}}}}};EOSLog.sign=function(ob,keyword){var div=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);var props=false;try{var tempObj;if(keyword){if(keyword.indexOf(".")>=0){var arr=keyword.split(".");tempObj=window[arr[0]]||eval(arr[0]);for(var i=1;i<arr.length;i++){if(tempObj){tempObj=tempObj[arr[i]]}else{tempObj=null}}}else{tempObj=window[keyword]||eval(keyword)}}var select1=$id(EOSLog.EVAL_SIGN_SELECT_ID,EOSLog.doc);select1.length=0;var values=[];for(var a in tempObj){if(!(a+"").indexOf("__")==0){values.push(a);props=true}}values.sort();for(var i=0;i<values.length;i++){var option;var a=values[i];option=new Option(a,a);select1.options.add(option)}if(select1.length<10){select1.size=select1.length}else{select1.size=10}if(props){div.style.display="block";function select1Change(){EOSLog.insertAtCaret(ob,select1.value);select1.length=0;div.style.display="none"}eventManager.add(select1,"change",select1Change)}else{div.style.display="none"}}catch(e){div.style.display="none"}};EOSLog.getkeyWord=function(b){var a=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(EOSLog.doc.selection){var k=EOSLog.doc.selection.createRange();var g=EOSLog.doc.body.createTextRange();g.moveToElementText(b);for(end=0;g.compareEndPoints("StartToEnd",k)<0;end++){g.moveStart("character",1);for(var h=0;h<=end;h++){if(b.value.charAt(h)=="\n"){end++}}}var d=EOSLog.getSingWordByLeft(b,end);if(a.parentNode.tagName.toLocaleUpperCase()!="BODY"){EOSLog.doc.body.appendChild(a)}a.style.top=k.offsetTop+16+EOSLog.doc.body.scrollTop;a.style.left=k.offsetLeft+EOSLog.doc.body.scrollLeft;return d}else{var l=b;if(typeof(l.selectionStart)=="number"){start=l.selectionStart;end=l.selectionEnd;if(start==end){var c=l.value.substring(0,end);var o=EOSLog.getSingWordByLeft(l,end);var n=c.split("\n");var m=n[n.length-1];var f=m.length*6-l.scrollLeft;var j=n.length*16-l.scrollTop;if(f>l.offsetWidth){while(f>0&&f>l.offsetWidth){f=f-l.offsetWidth;j=j+16}}a.style.top=b.offsetTop+j;a.style.left=b.offsetLeft+f;return o}}}return null};EOSLog.getSingWordByLeft=function(a,d){var c=a.value.substring(0,end);var b=/([\w|\.]+)\.$/;b.test(c);return RegExp.$1};EOSLog.insertAtCaret=function(a,b){if(isIE){a.focus();EOSLog.doc.selection.createRange().text+=b}else{if(a.setSelectionRange){var f=a.selectionStart;var d=a.selectionEnd;var g=a.value.substring(0,f);var c=a.value.substring(d);a.value=g+b+c;var h=f+b.length;a.focus();a.setSelectionRange(h,h)}else{alert("This   version   of   Mozilla   based   browser   does   not   support   setSelectionRange")}}};if(!window.EOSLog_inited){try{EOSLog.init()}catch(e){if(eventManager){eventManager.add(window,"load",EOSLog.init)}}}EOSLog.scriptObject={};EOSLog.getScriptStr=function(a){if(!EOSLog.scriptObject[a]){EOSLog.scriptObject[a]=getRemoteResource(a)}return EOSLog.scriptObject[a]};function EOSDebugInfo(){this.sLine=null;this.sUrl=null;this.sMessage=null;this.errFunc=null;this.errLine=null;this.stackFunc=[]}EOSLog.getDetailError=function(g,m,a,b){var j=new EOSDebugInfo();j.sLine=b;j.sUrl=a;j.sMessage=m;j.errFunc=g;var l=null;if(g){var n=document.documentElement.outerHTML;if(n.indexOf(g)>0){l=getRemoteResource(window.location)}else{j.sLine=b-1;var c=document.getElementsByTagName("script");for(var d=0;d<c.length;d++){var k=c[d];if(k.src){var h=EOSLog.getScriptStr(k.src);if(h&&h.indexOf(g.toString())>=0){j.sUrl=k.src;l=h;break}}}}if(l){var f=l.split("\n");j.errLine=f[j.sLine-1];j.errFunc=getDisplayStr(j.errFunc);j.errLine=getDisplayStr(j.errLine);if(j.errLine&&j.errFunc){if(j.errFunc.indexOf(j.errLine)>=0){j.errFunc=j.errFunc.replace(j.errLine,"<b><span style='color:red;background-color:#eeeeee;font-size:larger'>"+j.errLine+"</span></b>")}}}}return j};function getDisplayStr(a){if(a){a=a.toString();return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}return a}function getRemoteResource(a){var b=createXMLHttp();b.open("GET",a,false);b.send(null);return b.responseText}function initDrag(a){var f=EOSLog.topWin.fx_DD||fx_DD;var c=$id("eos_log_right",EOSLog.doc);var d=$id("eos_log_bottom",EOSLog.doc);var b=$id("eos_log_rightBottom",EOSLog.doc);f(a,{handle:d,modifiers:true,onDrag:function(){var h=this.mouse.start.y;var g=this.mouse.now.y;if(g-h+this.value.now.y>=27){this.element.style.height=g-h+this.value.now.y}resizeLogPanel(parseInt(a.style.height))},onComplete:function(){},onStart:function(){this.value.now.y=this.element.getStyle("height").toInt()}});f(a,{handle:c,modifiers:true,onDrag:function(){var h=this.mouse.start.x;var g=this.mouse.now.x;if(g-h+this.value.now.x>=150){this.element.style.width=g-h+this.value.now.x}resizeLogPanel(null,parseInt(a.style.width))},onComplete:function(){},onStart:function(){this.value.now.x=this.element.getStyle("width").toInt()}});f(a,{handle:b,modifiers:true,onStart:function(){this.value.now.x=this.element.getStyle("width").toInt();this.value.now.y=this.element.getStyle("height").toInt()},onDrag:function(){var i=this.mouse.start.y;var g=this.mouse.now.y;if(g-i+this.value.now.y>=27){a.style.height=g-i+this.value.now.y}var j=this.mouse.start.x;var h=this.mouse.now.x;if(h-j+this.value.now.x>=150){a.style.width=h-j+this.value.now.x}resizeLogPanel(parseInt(a.style.height),parseInt(a.style.width))},onComplete:function(){}})}function resizeLogPanel(a,b){if(a!=null&&a!=""){EOSLog.panel.style.height=a-27}if(b!=null&&b!=""){EOSLog.panel.style.width=b}}EOSLog.formatXML=function(l){return l;try{var k=l.split(">");var g="";var d=0;for(var b=0;b<k.length-1;b++){var c=k[b];if(c.indexOf("<")!=0){var h=c.split("<");for(var a=0;a<d;a++){g=g+"\t"}g=g+h[0]+"\n";d=d-1;for(var a=0;a<d;a++){g=g+"\t"}g=g+"<"+h[1]+">\n"}else{if(c.indexOf("</")!=0){for(var a=0;a<d;a++){g=g+"\t"}g=g+k[b]+">\n";if(c.indexOf("<!")==-1&&c.indexOf("<?")==-1){d=d+1}}else{d=d-1;for(var a=0;a<d;a++){g=g+"\t"}g=g+k[b]+">\n"}}}return g}catch(f){return l}};