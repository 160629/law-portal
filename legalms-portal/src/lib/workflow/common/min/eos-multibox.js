function MultiBox(d){this.id=d;this.value=null;this.container=$id(this.id+"_container");this.checkboxes=[];var c=this.container.getElementsByTagName("input");for(var b=0;b<c.length;b++){var a=c[b];if(a.type=="checkbox"){this.checkboxes.push(a)}}this.hiddenInput=null;this.splitChar=",";this.jsonObj=null;PageControl.add(d,this)}MultiBox.prototype.init=function(){this.hiddenInput=$id(this.id+"_hidden");this.initEvent()};MultiBox.prototype.initEvent=function(){var e=this;function b(){e.refreshValue()}function a(){var k=eventManager.getEvent();var g=k.keyCode;if(!(g==37||g==39)){return}var j=e.checkboxes;for(var f=0;f<j.length;f++){var h=j[f];if((isIE?document.activeElement:k.explicitOriginalTarget)==h&&h.type=="checkbox"){if(g==37){if(f==0){j[j.length-1].focus()}else{j[f-1].focus()}}if(g==39){if(f==j.length-1){j[0].focus()}else{j[f+1].focus()}}break}}}for(var c=0;c<this.checkboxes.length;c++){var d=this.checkboxes[c];eventManager.add(d,"click",b)}eventManager.add(this.container,"keyup",a)};MultiBox.prototype.refreshInput=function(){if(this.hiddenInput){this.hiddenInput.value=this.value}str=this.splitChar+this.value+this.splitChar;for(var a=0;a<this.checkboxes.length;a++){var c=this.checkboxes[a];var b=this.splitChar+c.value+this.splitChar;if(str.indexOf(b)>-1){c.checked=true}else{c.checked=false}}};MultiBox.prototype.refreshValue=function(){var c="";for(var a=0;a<this.checkboxes.length;a++){var b=this.checkboxes[a];if(b.checked&&b.type=="checkbox"){c+=b.value+this.splitChar}}if(c.length>1){c=c.substr(0,c.length-1)}this.value=c;if(this.hiddenInput){this.hiddenInput.value=c}};MultiBox.prototype.setValue=function(a){this.value=a;this.refreshInput()};MultiBox.prototype.getValue=function(){this.refreshValue();return this.value};MultiBox.prototype.setFocus=function(){this.checkboxes[0].focus()};MultiBox.prototype.lostFocus=function(){};MultiBox.prototype.showEditor=function(){var b=getMaxZindex();this.container.style.zIndex=b;this.container.style.display="";addClass(this.container.firstChild,"dict_comp");if(this.isDcEdit==true){var a=this.container.firstChild;a.style.width=a.firstChild.offsetWidth;initShadow(a)}this.setFocus()};MultiBox.prototype.hideEditor=function(){this.container.style.display="none"};MultiBox.prototype.setPosition=function(d,c,b,a){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=d+"px";this.container.style.top=c+"px"};MultiBox.prototype.isFocus=function(){return true};MultiBox.prototype.validate=function(){return true};EOS_DICT_DISPLAY_SEPERATOR=null;MultiBox.prototype.getDisplayValue=function(d){if(d==null){d=this.getValue()}var c;if(EOS_DICT_DISPLAY_SEPERATOR){c=EOS_DICT_DISPLAY_SEPERATOR}else{c=this.splitChar}var a=d.split(c);var e="";var f=[];for(var b=0;b<a.length;b++){f.push(this.jsonObj[a[b]]||a[b])}e=f.join(c);return e};