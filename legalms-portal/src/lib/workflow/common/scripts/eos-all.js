window.Drag=window.Drag||{};EOS.apply(Drag,{obj:null,init:function(d,h,f,b,e,a,i,g,j,c){d.onmousedown=Drag.start;d.hmode=i?false:true;d.vmode=g?false:true;d.root=h&&h!=null?h:d;if(d.hmode&&isNaN(parseInt(d.root.style.left))){d.root.style.left="0px"}if(d.vmode&&isNaN(parseInt(d.root.style.top))){d.root.style.top="0px"}if(!d.hmode&&isNaN(parseInt(d.root.style.right))){d.root.style.right="0px"}if(!d.vmode&&isNaN(parseInt(d.root.style.bottom))){d.root.style.bottom="0px"}d.minX=typeof f!="undefined"?f:null;d.minY=typeof e!="undefined"?e:null;d.maxX=typeof b!="undefined"?b:null;d.maxY=typeof a!="undefined"?a:null;d.xMapper=j?j:null;d.yMapper=c?c:null;d.root.onDragStart=new Function();d.root.onDragEnd=new Function();d.root.onDrag=new Function()},start:function(b){var c=Drag.obj=this;b=Drag.fixE(b);var d=parseInt(c.vmode?c.root.style.top:c.root.style.bottom);var a=parseInt(c.hmode?c.root.style.left:c.root.style.right);c.root.onDragStart(a,d);c.lastMouseX=b.clientX;c.lastMouseY=b.clientY;if(c.hmode){if(c.minX!=null){c.minMouseX=b.clientX-a+c.minX}if(c.maxX!=null){c.maxMouseX=c.minMouseX+c.maxX-c.minX}}else{if(c.minX!=null){c.maxMouseX=-c.minX+b.clientX+a}if(c.maxX!=null){c.minMouseX=-c.maxX+b.clientX+a}}if(c.vmode){if(c.minY!=null){c.minMouseY=b.clientY-d+c.minY}if(c.maxY!=null){c.maxMouseY=c.minMouseY+c.maxY-c.minY}}else{if(c.minY!=null){c.maxMouseY=-c.minY+b.clientY+d}if(c.maxY!=null){c.minMouseY=-c.maxY+b.clientY+d}}document.onmousemove=Drag.drag;document.onmouseup=Drag.end;return false},drag:function(f){f=Drag.fixE(f);var g=Drag.obj;var c=f.clientY;var d=f.clientX;var i=parseInt(g.vmode?g.root.style.top:g.root.style.bottom);var b=parseInt(g.hmode?g.root.style.left:g.root.style.right);var a,h;if(g.minX!=null){d=g.hmode?Math.max(d,g.minMouseX):Math.min(d,g.maxMouseX)}if(g.maxX!=null){d=g.hmode?Math.min(d,g.maxMouseX):Math.max(d,g.minMouseX)}if(g.minY!=null){c=g.vmode?Math.max(c,g.minMouseY):Math.min(c,g.maxMouseY)}if(g.maxY!=null){c=g.vmode?Math.min(c,g.maxMouseY):Math.max(c,g.minMouseY)}a=b+((d-g.lastMouseX)*(g.hmode?1:-1));h=i+((c-g.lastMouseY)*(g.vmode?1:-1));if(g.xMapper){a=g.xMapper(i)}else{if(g.yMapper){h=g.yMapper(b)}}Drag.obj.root.style[g.hmode?"left":"right"]=a+"px";Drag.obj.root.style[g.vmode?"top":"bottom"]=h+"px";Drag.obj.lastMouseX=d;Drag.obj.lastMouseY=c;Drag.obj.root.onDrag(a,h);return false},end:function(){document.onmousemove=null;document.onmouseup=null;Drag.obj.root.onDragEnd(parseInt(Drag.obj.root.style[Drag.obj.hmode?"left":"right"]),parseInt(Drag.obj.root.style[Drag.obj.vmode?"top":"bottom"]));Drag.obj=null},fixE:function(a){if(typeof a=="undefined"){a=window.event}if(typeof a.layerX=="undefined"){a.layerX=a.offsetX}if(typeof a.layerY=="undefined"){a.layerY=a.offsetY}return a}});function $create(b,a){a=a||document;if(b.indexOf("<")>-1){var c=a.createElement("div");c.innerHTML=b;return firstElement(c)}return a.createElement(b)}function $createElement(e,d){var f=d?(d.doc||document):document;if(e.indexOf("<")>-1){var g=f.createElement("div");g.innerHTML=e;e=g.firstChild}else{if(isIE&&d&&(d.name||d.type)){var a=(d.name)?' name="'+d.name+'"':"";var c=(d.type)?' type="'+d.type+'"':"";switch(e){case"input":e=document.createElement("input");if(d.type){e.type=d.type;e.name=d.name}break;default:e="<"+e+a+c+">";e=f.createElement(e);break}delete d.name;delete d.type}else{e=f.createElement(e)}}if(d){if(d.style){for(var b in d.style){e.style[b]=d.style[b]}delete d.style}for(var b in d){e[b]=d[b]}}return e}function createSelect(d,a,c){var f=$createElement("select",c||{});for(var b in d){var e=$createElement("option",{value:b,text:""+d[b],innerHTML:d[b]});if((a||a===0)&&b==a){e.selected=true}f.appendChild(e)}return f}function getViewportHeight(){if(window.innerHeight!=window.undefined){return window.innerHeight}if(document.compatMode=="CSS1Compat"){return document.documentElement.clientHeight}if(document.body){return document.body.clientHeight}return window.undefined}function getViewportWidth(){if(window.innerWidth!=window.undefined){return window.innerWidth}if(document.compatMode=="CSS1Compat"){return document.documentElement.clientWidth}if(document.body){return document.body.clientWidth}return window.undefined}function bodyAddNode(a,b){if(!a){return}b=b||document;var c=b.body.firstChild;if(c){b.body.insertBefore(a,c)}else{b.body.appendChild(a)}}function addClass(d,c){if(!d){return}var a=d.className.split(" ");for(var b=0;b<a.length;b++){if(a[b]==c){return}}a.push(c);d.className=a.join(" ")}function removeClass(d,c){if(!d){return}var a=d.className.split(" ");for(var b=0;b<a.length;b++){if(a[b]==c){a.splice(b,1)}}d.className=a.join(" ")}function getPosition(a){var d=a.offsetTop;var c=a.offsetLeft;var b=a;while(b=b.offsetParent){if(b.tagName=="BODY"){continue}d+=b.offsetTop-b.scrollTop;c+=b.offsetLeft-b.scrollLeft}return{top:d,left:c}}function getAbsPos(d){var b=d.offsetTop;var g=d.offsetLeft;var f=d;while(f=f.offsetParent){if(f&&f.tagName=="BODY"){b-=f.scrollTop;g-=f.scrollLeft;continue}b+=f.offsetTop-f.scrollTop;g+=f.offsetLeft-f.scrollLeft}var a=_get_top_window();if(a!=window){if(isIE){var e=window;do{var h=e.frameElement;if(h){var c=getPosition(h);b=b+c.top-(e.scrollTop||0);g=g+c.left-(e.scrollLeft||0)}e=e.parent}while(e&&e!=a);g+=a.scrollLeft||0;b+=a.scrollTop||0;if(isBorderBox){g=g+2;b=b+2}}else{b=window.screen.top-a.screen.top+b;g=window.screen.left-a.screen.left+g}}return{top:b,left:g}}function getScreenPos(d,a){var g=0;var b=0;if(d==a){return{left:0,top:0}}else{var f=d;while(f&&f!=a){var e=f.frameElement;var c=f.parent;if(e){var h=getPosition(e);g=g+h.left;b=b+h.top}f=f.parent}}return{left:g,top:b}}function createStyle(b,g,a){var e="display:";var f;g=g||document;if(g.styleSheets.length==0){var d=g.createElement("style");g.body.appendChild(d)}var h=g.styleSheets[0];if(!a){b="."+b}if(h.insertRule){var c=h.insertRule(b+"{"+e+"}",h.length);return h.cssRules[c]}else{var c=h.addRule(b,e,-1);if(c==-1){c=h.rules.length-1}return h.rules[c]}}function getScroll(c){var f=c,e=document;if(f==e||f==e.body){var a=window.pageXOffset||e.documentElement.scrollLeft||e.body.scrollLeft||0;var b=window.pageYOffset||e.documentElement.scrollTop||e.body.scrollTop||0;return[a,b]}else{return[f.scrollLeft,f.scrollTop]}}function translatePoints(d,a,g){if(typeof a=="object"||a instanceof Array){g=a[1];a=a[0]}var e=d.style.position;var f=getElementXY(d);var b=parseInt(d.style.left,10);var c=parseInt(d.style.top,10);if(isNaN(b)){b=(e=="relative")?0:d.offsetLeft}if(isNaN(c)){c=(e=="relative")?0:d.offsetTop}return{left:(a-f[0]+b),top:(g-f[1]+c)}}function getElementXY(d,j){var c,k,m,o,h=document.body;if(d&&d.style.display=="none"){return[0,0]}if(d.getBoundingClientRect){try{m=d.getBoundingClientRect();o=getScroll(document);return[m.left+o[0],m.top+o[1]]}catch(i){}}var n=0,l=0;c=d;j=j||h;var a=d.style.position=="absolute";while(c){n+=c.offsetLeft;l+=c.offsetTop;if(!a&&c.style.position=="absolute"){a=true}if(isGecko){k=c;var q=parseInt(k.style.borderTopWidth,10)||0;var f=parseInt(k.style.borderLeftWidth,10)||0;n+=f;l+=q;if(c!=d&&k.style.overflow!="visible"){n+=f;l+=q}}c=c.offsetParent}if(isSafari&&a){n-=h.offsetLeft;l-=h.offsetTop}if(isGecko&&!a){var g=h;n+=parseInt(g.style.borderTopWidth,10)||0;l+=parseInt(g.style.borderTopWidth,10)||0}c=d.parentNode;while(c&&c!=h){if(!isOpera||(c.tagName.toUpperCase()!="TR"&&c.style.display!="inline")){n-=c.scrollLeft||0;l-=c.scrollTop||0}c=c.parentNode}return[n,l]}function setElementXY(b,c,a){if(b.style.position=="static"){b.style.position="relative"}if(a!==true){b.style.left="0px";b.style.top="0px"}var d=translatePoints(b,c);if(c[0]!==false){b.style.left=d.left+"px"}if(c[1]!==false){b.style.top=d.top+"px"}}function firstElement(c,a){if(c){a=a||1;var b=0;var d=c.firstChild;while(d){if(d.nodeType==1){if(++b==a){return d}}d=d.nextSibling}}return null}function prevElement(b,a){if(b){var c=b.previousSibling;while(c){if(c.nodeType==1){return c}c=c.previousSibling}}return null}function nextElement(b,a){if(b){var c=b.nextSibling;while(c){if(c.nodeType==1){return c}c=c.nextSibling}}return null}function getNodeValue(b){var a=null;if(!b){return null}var c=b.getAttribute("__isNullOrEmpty");if(c=="null"){return null}if(c=="empty"){return""}if(b.text){a=b.text}else{if(b.childNodes.length>1){a=b.xml.replace(/<\/?[^>]+>/gi,"")}else{if(b.firstChild){a=b.firstChild.data}}}return a}function removeElement(c){if(!c){return}var b=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmouseout","onchange","onfocus","onblur","onkeypress","onkeydown","onkeyup"];for(var a=0;a<b.length;a++){c.setAttribute(b[a],null);c[b[a]]=null}if(c.parentNode){c.parentNode.removeChild(c)}}function getFormElementsValue(e){e=$e(e);var a={};for(var d=0;d<e.elements.length;d++){var c=e.elements[d];if(!c.disabled&&c.name){var b=getElementValue(c);if(a[c.name]!==undefined){a[c.name]=[].concat(a[c.name]);a[c.name].push(b)}else{a[c.name]=b}}}return a}function getElementValue(a){a=$e(a);var f=a.tagName.toLowerCase();function d(g){return g.checked?g.value:null}function e(g){return g.getAttribute("value")!=null?g.value:g.text}var c={input:function(g){switch(g.type.toLowerCase()){case"checkbox":case"radio":return d(g);default:return g.value}},textarea:function(g){return g.value},select:function(l){switch(l.type.toLowerCase()){case"select-one":var h=l.selectedIndex;return h>=0?e(l.options[h]):null;default:var g,m=l.length;if(!m){return null}for(var k=0,g=[];k<m;k++){var j=l.options[k];if(j.selected){g.push(e(j))}}return g}return this[l.type=="select-one"?"selectOne":"selectMany"](l)}};var b=c[f];if(b==null){return null}return b(a)}var CSSUtil=function(e){var d=null;var c=e||document;var b=/(-[a-z])/gi;var a=function(f,g){return g.charAt(1).toUpperCase()};return{createStyleSheet:function(h,m,j){var g;j=j||c;var i=j.getElementsByTagName("head");if(!i||i.length<1){j.documentElement.insertBefore(j.createElement("head"),j.body);i=j.getElementsByTagName("head")}var f=i[0];var l=j.createElement("style");l.setAttribute("type","text/css");if(m){l.setAttribute("id",m)}if(isIE){f.appendChild(l);g=l.styleSheet;try{g.cssText=h}catch(k){}}else{try{l.appendChild(j.createTextNode(h))}catch(k){l.cssText=h}f.appendChild(l);g=l.styleSheet?l.styleSheet:(l.sheet||j.styleSheets[j.styleSheets.length-1])}this.cacheStyleSheet(g);return g},removeStyleSheet:function(h,g){g=g||c;var f=g.getElementById(h);if(f){f.parentNode.removeChild(f)}},swapStyleSheet:function(i,f,h){h=h||c;this.removeStyleSheet(i);var g=h.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("id",i);g.setAttribute("href",f);h.getElementsByTagName("head")[0].appendChild(g)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(g){if(!d){d={}}try{var i=g.cssRules||g.rules;for(var f=i.length-1;f>=0;--f){d[i[f].selectorText]=i[f]}}catch(h){}},getRules:function(g,k){k=k||c;if(d==null||g){d={};var j=k.styleSheets;for(var h=0,f=j.length;h<f;h++){try{this.cacheStyleSheet(j[h])}catch(l){}}}return d},getRule:function(f,h){var g=this.getRules(h);if(!(f instanceof Array)){return g[f]}for(var j=0;j<f.length;j++){if(g[f[j]]){return g[f[j]]}}return null},updateRule:function(f,j,h){if(!(f instanceof Array)){var k=this.getRule(f);if(k){k.style[j.replace(b,a)]=h;return true}}else{for(var g=0;g<f.length;g++){if(this.updateRule(f[g],j,h)){return true}}}return false},getCssText:function(g){var f=CSSUtil.getRule(g);return f?g+" { "+CSSUtil.getRule(g).style.cssText+" } ":""}}}();var EOSLOG_LEVEL=EOSLOG_LEVEL||"debug";var EOSDEBUG=EOSDEBUG==undefined?false:EOSDEBUG;function escapeHTML(a){if(typeof(a)=="string"){return a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\t/g,"&nbsp;&nbsp;").replace(/\n/g,"<br>")}else{return a}}if(typeof(EOSLog)!="function"){EOSLog=function(){};EOSLog.styles=new Array();EOSLog.messages=[];EOSLog.ID="EOS_LOG_CONSOLE";EOSLog.BODY_ID="EOS_LOG_CONSOLE_BODY";EOSLog.BUTTONS_ID="EOS_LOG_CONSOLE_BUTTONS";EOSLog.EVAL_ID="EOS_LOG_EVAL_ID";EOSLog.EVAL_INPUT_ID="EOS_LOG_EVAL_INPUT_ID";EOSLog.EVAL_RUN_ID="EOS_LOG_EVAL_RUN_ID";EOSLog.EVAL_CLEAR_ID="EOS_LOG_EVAL_CLEAR_ID";EOSLog.EVAL_SIGN_ID="EVAL_SIGN_ID";EOSLog.EVAL_SIGN_SELECT_ID="EVAL_SIGN_SELECT_ID";EOSLog.index=0;EOSLog.iDiffX=0;EOSLog.iDiffY=0;EOSLog.hasOut=false;EOSLog.timeLog=new Array();EOSLog.panel=null;EOSLog.topWin=window;EOSLog.doc=document}EOSLog.log=function(c,a){var b=new Date();EOSLog.messages.push({level:c,time:b,message:a,out:false});if(EOSLog.panel){EOSLog.refresh()}};EOSLog.refresh=function(){if(EOSLog.panel){var a;for(a=EOSLog.index;a<EOSLog.messages.length;a++){EOSLog.print(EOSLog.messages[a])}EOSLog.index=a==0?0:a-1}};EOSLog.info=function(a){EOSLog.log("info",escapeHTML(a))};EOSLog.error=function(a){EOSLog.log("error",escapeHTML(a))};EOSLog.debug=function(a){EOSLog.log("debug",escapeHTML(a))};EOSLog.warn=function(a){EOSLog.log("warn",escapeHTML(a))};EOSLog.handle=function(b){var a=new StringBuffer();a.append(EOSLOG_ERROR_TYPE).append(b.name).append(".");a.append(EOSLOG_ERROR_INFO).append(b.message).append(".");if(b.number){a.append(EOSLOG_ERROR_CODE).append(b.number).append(".>")}if(b.fileName){a.append(EOSLOG_ERROR_URL).append(b.fileName).append(".")}if(b.lineNumber){a.append(EOSLOG_ERROR_LINE).append(b.lineNumber).append(".")}if(b.stack){a.append(EOSLOG_ERROR_STACK).append(b.stack.replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).append("<br>")}if(b.description){a.append(EOSLOG_ERROR_DETAIL).append(b.description).append("<br>")}if(EOSLog.handle.caller&&EOSLog.handle.caller.caller){a.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(EOSLog.handle.caller.caller.toString().replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")).append("<br>")}EOSLog.log("error",a.toString())};window.onerror=function(b,d,c){if(EOSDEBUG){var a=new StringBuffer();if(isIE){try{var g=EOSLog.getDetailError(window.onerror.caller,b,d,c);a.append(EOSLOG_ERROR_INFO).append(g.sMessage).append("<br> ");a.append(EOSLOG_ERROR_URL).append(g.sUrl).append("<br> ");a.append(EOSLOG_ERROR_LINE).append(g.sLine).append("<br> ");a.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(g.errFunc).append("<br>")}catch(f){}}else{a.append(EOSLOG_ERROR_INFO).append(b).append("<br> ");a.append(EOSLOG_ERROR_URL).append(d).append("<br> ");a.append(EOSLOG_ERROR_LINE).append(c).append("<br> ")}EOSLog.log("error",a.toString())}};EOSLog.isShow=function(c,b){var a=EOSLog.styles[c];if(b.checked){a.style.display="block"}else{a.style.display="none"}};EOSLog.clear=function(){var a=$id(EOSLog.BODY_ID,EOSLog.doc);a.innerHTML=""};EOSLog.console=function(){var a=$create("div",EOSLog.doc);a.style.position="absolute";a.style.left="300px";a.style.top="300px";var f=new StringBuffer();if(isIE){f.append("<iframe src='"+blankURL+'\' style="position:absolute;z-index:-1; frameborder="0" ></iframe>')}var b="";var d=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1;if(d){b='style="filter:alpha(opacity=50)"'}f.append('<div style="z-index:1000">');f.append('<TABLE  cellspacing="0" cellpadding="0"  class="eos-dialog"><TR><TD '+b+' class="left-top-conner"><div class="ieBlank"></div></TD><TD  '+b+' class="top"></TD><TD  '+b+' class="right-top-conner"><div class="ieBlank"></div></TD></TR><TR><TD  '+b+' class="left"><div class="ieBlank"></div></TD><TD style="background-color: #eaf0f2;">');f.append("<div style='display:none;position: absolute;height=200px;overflow-y:auto; z-index: 1000;' id='").append(EOSLog.EVAL_SIGN_ID).append("'>");f.append("<select class='EOS-LOG-SIGN-DIV' size='10' id='").append(EOSLog.EVAL_SIGN_SELECT_ID).append("'></select></div>");f.append("<div onmouseup=\"style.cursor='auto'\" onmousedown=\"style.cursor='move';\" class='EOS-LOG-BUTTONS' style=\"width:100%\"id='");f.append(EOSLog.BUTTONS_ID).append("'><table width=\"100%\"align='right' border='0' style='font-size:9pt'><tr><td width=\"300px\">");f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'time\',this)" name="time" value="1">TIME');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'info\',this)" name="info" value="1">INFO');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'debug\',this)" name="degbug" value="1">DEBUG');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'warn\',this)" name="warn" value="1">WARN');f.append('<input type="checkbox" checked onmousedown="EOSLog.isShow(\'error\',this)" name="error" value="1">ERROR</td><td align=\'right\'>');f.append('&nbsp;<div  id="eos_log_button0"  class="eos-button" onclick="EOSLog.clear()" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Clear</div></div>&nbsp;');f.append('<div id="eos_log_button1"  class="eos-button" onclick="EOSLog.command()" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Cmd</div></div>&nbsp;');f.append('<div id="eos_log_button2"  class="eos-button" onclick="EOSLog.hide()"onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Close</div></div>&nbsp;');f.append("</td></tr></table></div>");f.append("<div status='hide' class='EOS-LOG-EVAL' id='").append(EOSLog.EVAL_ID).append("' style='width:100%;display:none'><div>");f.append("<textarea style='width:100%;height:100px;font-size: 12px' id='").append(EOSLog.EVAL_INPUT_ID).append("'></textarea>");f.append("</div><div height='20'>");f.append('<div  id="eos_log_button3"  class="eos-button" onclick="EOSLog.runEval()"onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Run</div></div>&nbsp;');f.append('<div  id="eos_log_button4"  class="eos-button" onclick="EOSLog.clearEval()"onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner">Clear</div></div>&nbsp;');f.append("</div>");f.append("</div>");f.append("<div style='border-top:#C0C0C0 solid 1px;overflow:scroll' class='EOS-LOG-BODY' id='").append(EOSLog.BODY_ID).append("' style='overflow:auto'></div>");f.append("</TD><TD  "+b+' class="right" id="eos_log_right"><div class="ieBlank"></div></TD></TR><TR><TD  '+b+' class="left-bottom-conner"></TD><TD  '+b+' class="bottom" id="eos_log_bottom"></TD><TD  '+b+' class="right-bottom-conner" id="eos_log_rightBottom"></TD></TR></TABLE>');f.append("</div>");a.innerHTML=f.toString();a.id=EOSLog.ID;var k=10;function c(){try{EOSLog.doc.body.appendChild(a)}catch(i){if(k>0){k--;setTimeout(c,11)}}}c();var h=$id(EOSLog.BUTTONS_ID,EOSLog.doc);a.style.display="none";EOSLog.hide();var j=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);eventManager.add(j,"keyup",EOSLog.evalKeyUp);eventManager.add(j,"keydown",EOSLog.evalKeyDown);EOSLog.hasOut=true;EOSLog.panel=$id(EOSLog.BODY_ID,EOSLog.doc);EOSLog.refresh();initDrag(a);if(isFF){for(var g=0;g<5;g++){buttonForFF(EOSLog.doc.getElementById("eos_log_button"+g))}}};EOSLog.command=function(){var a=$id(EOSLog.EVAL_ID,EOSLog.doc);if(a.style.display=="none"){a.style.display=""}else{a.style.display="none"}};EOSLog.runEval=function(){var cmd=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);var value=cmd.value;try{eval(value)}catch(err){var buffer=new StringBuffer();buffer.append(EOSLOG_ERROR_TYPE).append(err.name).append("<br>");buffer.append(EOSLOG_ERROR_INFO).append(err.message).append("<br>");if(err.number){buffer.append(EOSLOG_ERROR_CODE).append(err.number).append("<br>")}if(err.fileName){buffer.append(EOSLOG_ERROR_URL).append(err.fileName).append("<br>")}if(err.lineNumber){buffer.append(EOSLOG_ERROR_LINE).append(err.lineNumber).append("<br>")}if(err.stack){buffer.append(EOSLOG_ERROR_STACK).append(err.stack).append("<br>")}if(err.description){buffer.append(EOSLOG_ERROR_DETAIL).append(err.description).append("<br>")}buffer.append(EOSLOG_ERROR_FUNCTION).append("<br>").append(value).append("<br>");EOSLog.log("error",EOSLOG_EVAL_ERROR+"<br>"+buffer.toString())}};EOSLog.clearEval=function(){var a=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);a.value=""};EOSLog.print=function(b){if(b.out){return}var d=$create("div",EOSLog.doc);d.className="EOS-LOG-"+b.level;var a=new StringBuffer();a.append("<table border='0'><tr><td valign='top' width='20px'>").append("<div class='EOS-LOG-TITLE-").append(b.level).append("'>");a.append(b.level).append("</div></td><td class='EOS-LOG-WORD'>").append("<div class='EOS-LOG-TIME'>runtime:").append(b.time.toLocaleTimeString());a.append("</div>").append(b.message).append("</td></tr></table>");var c=EOSLog.panel;d.innerHTML=a.toString();if(c.firstChild){c.insertBefore(d,c.firstChild)}else{c.appendChild(d)}b.out=true};EOSLog.init=function(){if(!EOSDEBUG){return false}if(window.EOSLog_inited){return}EOSLog.topWin=_get_top_window();EOSLog.doc=EOSLog.topWin.document;eventManager.add(document,"keyup",EOSLog.keypress);if(EOSLog.topWin==window){EOSLog.styles.debug=createStyle("EOS-LOG-debug",EOSLog.doc);EOSLog.styles.info=createStyle("EOS-LOG-info",EOSLog.doc);EOSLog.styles.error=createStyle("EOS-LOG-error",EOSLog.doc);EOSLog.styles.time=createStyle("EOS-LOG-time",EOSLog.doc);EOSLog.styles.warn=createStyle("EOS-LOG-warn",EOSLog.doc);EOSLog.console();EOSLog.hide()}else{if(!EOSLog.topWin.EOSLog){moveScript(document,EOSLog.doc);moveCss(document,EOSLog.doc)}}window.EOSLog_inited=true};EOSLog.keypress=function(){var a=eventManager.getKeyCode();if(a==123){EOSLog.show();return false}};EOSLog.show=function(){var a=$id(EOSLog.ID,EOSLog.doc);a.style.display="block";a.style.zIndex=getMaxZindex(EOSLog.doc)};EOSLog.hide=function(){var a=$id(EOSLog.ID,EOSLog.doc);a.style.display="none"};EOSLog.time=function(i,g,c){if(!i){i="SYSTEM"}if(!EOSLog.timeLog[i]){var f=new Date();EOSLog.timeLog[i]={time:f,msg:g}}else{var b=new Date();var h=EOSLog.timeLog[i];var d=b-h.time;var a=new StringBuffer();a.append("ID:").append(i).append("<br>");if(h.msg){a.append("start:").append(h.msg).append("<br>")}a.append(" time:<b>").append(d).append("ms</b><br>");if(g){a.append("end:").append(g)}EOSLog.log("time",a.toString());if(c){EOSLog.timeLog[i]=null}}};function $info(b){if("info".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.info(b)}}function $debug(b){if("info,debug".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.debug(b)}}function $warn(b){if("info,debug,warn".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.warn(b)}}function $error(b){if("info,debug,warn,error".indexOf(EOSLOG_LEVEL)>=0){var a=EOSLog.topWin.EOSLog||EOSLog;a.error(b)}}function $time(b){var a=EOSLog.topWin.EOSLog||EOSLog;a.time(b)}function $handle(b){var a=EOSLog.topWin.EOSLog||EOSLog;a.handle(b)}EOSLog.enable=function(){};EOSLog.evalKeyUp=function(){var c=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);var a=eventManager.getKeyCode();var d=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(a==190){var b=EOSLog.getkeyWord(c);EOSLog.sign(c,b)}};EOSLog.selectUpOption=function(a){var b=a.selectedIndex-1;if(b>-1){var c=a.options[b];if(c){c.selected=true}}else{var c=a.options[0];if(c){c.selected=true}}};EOSLog.selectDownOption=function(a){var b=a.selectedIndex+1;var c=a.options[b];if(c){c.selected=true}else{var c=a.options[0];if(c){c.selected=true}}};EOSLog.evalKeyDown=function(){var b=$id(EOSLog.EVAL_INPUT_ID,EOSLog.doc);var a=eventManager.getKeyCode();var c=$id(EOSLog.EVAL_SIGN_SELECT_ID,EOSLog.doc);var d=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(a==9){eventManager.stopPropagation();EOSLog.insertAtCaret(b,"    ")}else{if(d.style.display!="none"){if(a==38){eventManager.stopPropagation();EOSLog.selectUpOption(c);return false}else{if(a==40){eventManager.stopPropagation();EOSLog.selectDownOption(c);return false}else{if(a==13){eventManager.stopPropagation();EOSLog.insertAtCaret(b,c.value);d.style.display="none";return false}else{d.style.display="none"}}}}}};EOSLog.sign=function(ob,keyword){var div=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);var props=false;try{var tempObj;if(keyword){if(keyword.indexOf(".")>=0){var arr=keyword.split(".");tempObj=window[arr[0]]||eval(arr[0]);for(var i=1;i<arr.length;i++){if(tempObj){tempObj=tempObj[arr[i]]}else{tempObj=null}}}else{tempObj=window[keyword]||eval(keyword)}}var select1=$id(EOSLog.EVAL_SIGN_SELECT_ID,EOSLog.doc);select1.length=0;var values=[];for(var a in tempObj){if(!(a+"").indexOf("__")==0){values.push(a);props=true}}values.sort();for(var i=0;i<values.length;i++){var option;var a=values[i];option=new Option(a,a);select1.options.add(option)}if(select1.length<10){select1.size=select1.length}else{select1.size=10}if(props){div.style.display="block";function select1Change(){EOSLog.insertAtCaret(ob,select1.value);select1.length=0;div.style.display="none"}eventManager.add(select1,"change",select1Change)}else{div.style.display="none"}}catch(e){div.style.display="none"}};EOSLog.getkeyWord=function(b){var a=$id(EOSLog.EVAL_SIGN_ID,EOSLog.doc);if(EOSLog.doc.selection){var k=EOSLog.doc.selection.createRange();var g=EOSLog.doc.body.createTextRange();g.moveToElementText(b);for(end=0;g.compareEndPoints("StartToEnd",k)<0;end++){g.moveStart("character",1);for(var h=0;h<=end;h++){if(b.value.charAt(h)=="\n"){end++}}}var d=EOSLog.getSingWordByLeft(b,end);if(a.parentNode.tagName.toLocaleUpperCase()!="BODY"){EOSLog.doc.body.appendChild(a)}a.style.top=k.offsetTop+16+EOSLog.doc.body.scrollTop;a.style.left=k.offsetLeft+EOSLog.doc.body.scrollLeft;return d}else{var l=b;if(typeof(l.selectionStart)=="number"){start=l.selectionStart;end=l.selectionEnd;if(start==end){var c=l.value.substring(0,end);var o=EOSLog.getSingWordByLeft(l,end);var n=c.split("\n");var m=n[n.length-1];var f=m.length*6-l.scrollLeft;var j=n.length*16-l.scrollTop;if(f>l.offsetWidth){while(f>0&&f>l.offsetWidth){f=f-l.offsetWidth;j=j+16}}a.style.top=b.offsetTop+j;a.style.left=b.offsetLeft+f;return o}}}return null};EOSLog.getSingWordByLeft=function(a,d){var c=a.value.substring(0,end);var b=/([\w|\.]+)\.$/;b.test(c);return RegExp.$1};EOSLog.insertAtCaret=function(a,b){if(isIE){a.focus();EOSLog.doc.selection.createRange().text+=b}else{if(a.setSelectionRange){var f=a.selectionStart;var d=a.selectionEnd;var g=a.value.substring(0,f);var c=a.value.substring(d);a.value=g+b+c;var h=f+b.length;a.focus();a.setSelectionRange(h,h)}else{alert("This   version   of   Mozilla   based   browser   does   not   support   setSelectionRange")}}};if(!window.EOSLog_inited){try{EOSLog.init()}catch(e){if(eventManager){eventManager.add(window,"load",EOSLog.init)}}}EOSLog.scriptObject={};EOSLog.getScriptStr=function(a){if(!EOSLog.scriptObject[a]){EOSLog.scriptObject[a]=getRemoteResource(a)}return EOSLog.scriptObject[a]};function EOSDebugInfo(){this.sLine=null;this.sUrl=null;this.sMessage=null;this.errFunc=null;this.errLine=null;this.stackFunc=[]}EOSLog.getDetailError=function(g,m,a,b){var j=new EOSDebugInfo();j.sLine=b;j.sUrl=a;j.sMessage=m;j.errFunc=g;var l=null;if(g){var n=document.documentElement.outerHTML;if(n.indexOf(g)>0){l=getRemoteResource(window.location)}else{j.sLine=b-1;var c=document.getElementsByTagName("script");for(var d=0;d<c.length;d++){var k=c[d];if(k.src){var h=EOSLog.getScriptStr(k.src);if(h&&h.indexOf(g.toString())>=0){j.sUrl=k.src;l=h;break}}}}if(l){var f=l.split("\n");j.errLine=f[j.sLine-1];j.errFunc=getDisplayStr(j.errFunc);j.errLine=getDisplayStr(j.errLine);if(j.errLine&&j.errFunc){if(j.errFunc.indexOf(j.errLine)>=0){j.errFunc=j.errFunc.replace(j.errLine,"<b><span style='color:red;background-color:#eeeeee;font-size:larger'>"+j.errLine+"</span></b>")}}}}return j};function getDisplayStr(a){if(a){a=a.toString();return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}return a}function getRemoteResource(a){var b=createXMLHttp();b.open("GET",a,false);b.send(null);return b.responseText}function initDrag(a){var f=EOSLog.topWin.fx_DD||fx_DD;var c=$id("eos_log_right",EOSLog.doc);var d=$id("eos_log_bottom",EOSLog.doc);var b=$id("eos_log_rightBottom",EOSLog.doc);f(a,{handle:d,modifiers:true,onDrag:function(){var h=this.mouse.start.y;var g=this.mouse.now.y;if(g-h+this.value.now.y>=27){this.element.style.height=g-h+this.value.now.y}resizeLogPanel(parseInt(a.style.height))},onComplete:function(){},onStart:function(){this.value.now.y=this.element.getStyle("height").toInt()}});f(a,{handle:c,modifiers:true,onDrag:function(){var h=this.mouse.start.x;var g=this.mouse.now.x;if(g-h+this.value.now.x>=150){this.element.style.width=g-h+this.value.now.x}resizeLogPanel(null,parseInt(a.style.width))},onComplete:function(){},onStart:function(){this.value.now.x=this.element.getStyle("width").toInt()}});f(a,{handle:b,modifiers:true,onStart:function(){this.value.now.x=this.element.getStyle("width").toInt();this.value.now.y=this.element.getStyle("height").toInt()},onDrag:function(){var i=this.mouse.start.y;var g=this.mouse.now.y;if(g-i+this.value.now.y>=27){a.style.height=g-i+this.value.now.y}var j=this.mouse.start.x;var h=this.mouse.now.x;if(h-j+this.value.now.x>=150){a.style.width=h-j+this.value.now.x}resizeLogPanel(parseInt(a.style.height),parseInt(a.style.width))},onComplete:function(){}})}function resizeLogPanel(a,b){if(a!=null&&a!=""){EOSLog.panel.style.height=a-27}if(b!=null&&b!=""){EOSLog.panel.style.width=b}}EOSLog.formatXML=function(l){return l;try{var k=l.split(">");var g="";var d=0;for(var b=0;b<k.length-1;b++){var c=k[b];if(c.indexOf("<")!=0){var h=c.split("<");for(var a=0;a<d;a++){g=g+"\t"}g=g+h[0]+"\n";d=d-1;for(var a=0;a<d;a++){g=g+"\t"}g=g+"<"+h[1]+">\n"}else{if(c.indexOf("</")!=0){for(var a=0;a<d;a++){g=g+"\t"}g=g+k[b]+">\n";if(c.indexOf("<!")==-1&&c.indexOf("<?")==-1){d=d+1}}else{d=d-1;for(var a=0;a<d;a++){g=g+"\t"}g=g+k[b]+">\n"}}}return g}catch(f){return l}};var EOSResizeObjects=[];var EOSResizeContainer=[];function getTopContainer(b){var a=null;while(true){b=b.offsetParent;if(b==null){if(a!=null){if(a.getAttribute("height")!=null||a.style.height!=""){return a}}break}if(b.tagName.toLowerCase()=="table"){a=b}}return null}function registerTopContainer(c){var a=getTopContainer(c);if(a==null){return false}for(var b=0;b<EOSResizeContainer.length;b++){if(EOSResizeContainer[b]==a){return true}}EOSResizeContainer.push(a);return true}function eos_layout_doHResize(){if(isFF){for(var a=0;a<EOSResizeObjects.length;a++){if(_eos_curr_open_panel!=null){if(!EOSResizeObjects[a].isInCurrPanel()){EOSResizeObjects[a].doAutoResizeS2=false;continue}}EOSResizeObjects[a].autoResizeS1()}for(var a=0;a<EOSResizeContainer.length;a++){EOSResizeContainer[a].style.height=EOSResizeContainer[a].offsetHeight-1}setTimeout(_layout_auto_resize,1)}}function _layout_auto_resize(){for(var a=0;a<EOSResizeContainer.length;a++){EOSResizeContainer[a].style.height=EOSResizeContainer[a].getAttribute("height")}for(var a=0;a<EOSResizeObjects.length;a++){if(EOSResizeObjects[a].doAutoResizeS2===false){EOSResizeObjects[a].doAutoResizeS2=true;continue}EOSResizeObjects[a].autoResizeS2()}}function _layout_setResised(){for(var a=0;a<_eos_colsed_panel.length;a++){_eos_colsed_panel[a].needResize=true}}eventManager.add(window,"resize",_layout_setResised);if(isFF){eventManager.add(window,"load",eos_layout_doHResize);eventManager.add(window,"resize",eos_layout_doHResize)};function createXMLHttp(){if(window.XMLHttpRequest){return(new XMLHttpRequest())}var a=["MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var b=0;b<a.length;b++){try{xmlhttp_ver=a[b];return new ActiveXObject(a[b])}catch(c){}}return null}function Ajax(a,b){this.url=a;this.param=[];this.dataParam=[];this.method="POST";this.encoding=Ajax.encoding||"utf-8";this.async=b||false;this.xmlParam="";this.submitParam=null;this.isHTML=false;this.submitType="xml";this.dataType=EOS.dataType;this.isCommonUrl=false;this.reset()}Ajax.prototype.setDataType=function(a){this.dataType=a||"xml";if(a==="json"){this.submitType="json"}};Ajax.prototype.initParam=function(){if(this.dataType=="json"){this.setDataType("json");var b={params:{},data:{}};EOS.apply(b.params,EOS.json.objectArrayToJson(this.param));EOS.apply(b.data,this.xmlParam);EOS.apply(b.data,EOS.json.objectArrayToJson(this.dataParam));this.submitParam=b}else{var e="";var d="<root>";for(var c=0;c<this.param.length;c++){var g=this.param[c];e+="<param><key>"+xmlConversion(g.key)+"</key><value>"+xmlConversion(g.value)+"</value></param>"}d+="<params>"+e+"</params>\n";var f=this.xmlParam;if(this.dataParam&&this.dataParam.length>0){for(var c=0,a=this.dataParam.length;c<a;c++){var h=this.dataParam[c];f+=h.value}}if(f&&f.indexOf("<root><data>")==0){f=f.substr("<root><data>".length);f=f.substr(0,f.lastIndexOf("</data></root>"))}d+="<data>"+f+"</data></root>";this.submitParam=d}};Ajax.prototype.setAsync=function(a){if(a==null){a=true}this.async=a};Ajax.prototype.wrapperUrl=function(){if(this.isCommonUrl){return this.url}var c=[];if(this.dataType=="json"){var b=this.submitParam.params;for(var a in b){c.push([a,"=",b[a]].join(""))}}c.push(["____r=",new Date()].join(""));return[this.url,this.dataType=="json"?".ext":".ajax","?",c.join("&")].join("")};Ajax.prototype.wrapperData=function(){if(this.dataType=="json"){var a=this.submitParam.data;var f=this.submitParam.params;if(f){for(var c in f){a[c]=f[c]}}var e=EOS.json.toJSONString(a);if(e=="{}"){return""}return e}else{var b=this.submitParam;if(typeof this.submitParam=="object"){b=EOS.json.toXMLString(this.submitParam)}return'<?xml version="1.0" encoding="'+this.encoding+'"?>'+encodeURIComponent(b)}};Ajax.prototype.setRequestHeaders=function(){if(isMoz&&this.xmlHttp.overrideMimeType){this.xmlHttp.overrideMimeType("text/html;charset=utf-8")}if(this.dataType=="json"){this.xmlHttp.setRequestHeader("Content-Type","application/json;charset="+this.encoding)}else{this.xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset="+this.encoding)}this.xmlHttp.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlHttp.setRequestHeader("_eosAjax",this.submitType);this.xmlHttp.setRequestHeader("encoding",this.encoding)};Ajax.prototype.reset=function(){this.retDom=null;this.responseText=null;this.xmlHttp=createXMLHttp()};Ajax.prototype.cancel=function(){if(!this.running){return this}this.running=false;this.xmlHttp.abort();this.reset();return this};Ajax.prototype.isSuccess=function(){return !!!this.getException()};Ajax.prototype.onSuccess=function(){};Ajax.prototype.onFailure=function(a){alert(AJAX_EXCEPTION+"\n\n"+a)};Ajax.prototype.callBack=function(){var d=false,c=null;var b=this.getExceptionInvalid();if(b===true||b==="true"){c=this.getLoginPage();if(c){d=true}b=AJAX_EXCEPTION_INVALID+"\n\n"+this.url}else{b=this.getExceptionMessage()||this.getException()}if(d){if(window.contextPath&&c.indexOf(window.contextPath+"/")!=0){c=window.contextPath+(c.indexOf("/")==0?"":"/")+c}var a=_get_top_window();a.location=c;return}if(b&&this.onFailure){return this.onFailure(b)}return this.onSuccess()};Ajax.prototype.onStateChange=function(){if(!this.xmlHttp||this.xmlHttp.readyState!=4||!this.running){return}try{$debug("\n return XML:\n "+EOSLog.formatXML(this.xmlHttp.responseText));this.responseText=this.xmlHttp.responseText;this.status=this.xmlHttp.readyState;if(this.dataType=="json"){eval("var r="+this.responseText);this.retJson=r}else{this.retDom=createXmlDom();this.retDom.loadXML(this.responseText)}return this.callBack.apply(this,arguments)}catch(e){$handle(e);return this.onFailure(e)}finally{this.running=false;this.xmlHttp.onreadystatechange=function(){}}};Ajax.prototype.getParam=function(b){for(var a=0;a<this.param.length;a++){var c=this.param[a];if(c.key==b){return c.value}}};Ajax.prototype.setOutParam=function(a){this.addParam("__outParam",a)};Ajax.prototype.setParamsInfo=function(a){this.addParam("__paramsInfo",a)};Ajax.prototype.setInoutParam=function(a){this.addParam("__inoutParams",a)};Ajax.prototype.getOutParam=function(){return this.getParam("__outParam")};Ajax.prototype.getParamsInfo=function(){return this.getParam("__paramsInfo")};Ajax.prototype.getInoutParam=function(){return this.getParam("__inoutParams")};Ajax.prototype.submit=function(a){if(this.url&&this.url.lastIndexOf(".beanx")==this.url.length-(".beanx").length){this.isCommonUrl=true}else{if(this.url&&this.url.lastIndexOf(".cservice")==this.url.length-(".cservice").length){this.isCommonUrl=true}else{if(this.url&&this.url.lastIndexOf(".__temp_service")==this.url.length-(".__temp_service").length){var q=this.url.lastIndexOf("/");var n=this.url.lastIndexOf(".kservice");var b=this.url.substring(q+1,n);q=b.lastIndexOf(".");var f=b.substring(0,q);var m=b.substring(q+1);if(!this.xmlParam){var c=this.getParam("__outParam");var h=this.getParam("__inoutParams");var d=this.getParam("__paramsInfo");var l=[];if(!d){d=[];for(var s=0;s<this.param.length;s++){var k=this.param[s];d.push(k.key)}d=d.join(",")}if(d.indexOf(",__outParam")==-1){d+=",__outParam"}if(d.indexOf(",__inoutParams")==-1){d+=",__inoutParams"}var g=d.split(",");for(var o=0;o<g.length;o++){var x=g[o];l.push(this.getParam(x))}l.push(d);this.param=[];this.xmlParam=ServiceCaller.submitXMLTemplate(f,m,ServiceCaller.getSubmitXML(l))}}}}this.running=true;this.encoding=a||this.encoding;this.initParam();try{var u=this.wrapperUrl();this.xmlHttp.open(this.method,u,this.async);var w=this.wrapperData();var v=this;if(this.async){this.xmlHttp.onreadystatechange=function(){v.onStateChange.apply(v,arguments)}}this.setRequestHeaders();$debug("submit url:"+this.url+"\n submit XML:\n"+EOSLog.formatXML(w));if(this.dataType=="json"){this.xmlHttp.send(w||null)}else{this.xmlHttp.send("__ajaxParam="+encodeURIComponent(w))}if(!this.async){return this.onStateChange()}}catch(t){$error("xmlHttp ajax request error.");this.running=false}};Ajax.prototype.getXMLDom=function(){if(this.retDom){return this.retDom}};Ajax.prototype.getJSON=function(){if(this.retJson){return this.retJson}};Ajax.prototype.getText=function(){if(this.xmlHttp){return this.xmlHttp.responseText}};Ajax.prototype.getValue=function(a){if(this.retDom==null){return null}if(a==null||a==""){return null}var b=this.retDom.selectSingleNode(a);if(b!=null){return getNodeValue(b)}else{return null}};Ajax.prototype.getValues=function(c){var b=new Array();if(this.retDom==null){return b}if(c==null||c==""){return b}var a=this.retDom.selectNodes(c);for(var d=0;d<a.length;d++){var e=a[d];b[d]=getNodeValue(e)}return b};Ajax.prototype.getDataset=function(a,b){var b=b||a;var c=new Dataset(b);c.init(this.retDom.selectNodes(a))};Ajax.prototype.setForm=function(c,d){for(var a=0;a<c.elements.length;a++){var b=c.elements[a];this.setObjectValue(b,null,d)}};Ajax.prototype.setObjectValue=function(c,g,d){if(!(c)||c==null){return}var f=g;if(f==null){if(c.name&&c.name!=null&&c.name!=""){if(d!=null){f=d+"/"+c.name}else{f=c.name}}}if(!(c.type)){if(f==null){if(c.name&&c.name!=""){f=c.name}else{if(c.id&&c.id!=""){f=c.id}}}if(f!=null){var h=this.getProperty(f);if(h!=null){c.innerText=h}}return}if(f!=null){if(c.type=="text"||c.type=="hidden"){var h=this.getProperty(f);if(h!=null){c.value=h}return}if(c.type=="radio"||c.type=="checkbox"){var e=this.dom.selectNodes("root/data/"+f);for(var b=0;b<e.length;b++){if(c.value==e[b].text){c.checked=true}else{c.checked=false}}return}if(c.type=="select-one"){var h=this.getProperty(f);for(var b=0;b<c.options.length;b++){if(h==c.options[b].value){c.options[b].selected=true}}return}if(c.type=="select-multiple"){var l=this.getValues("root/data/"+f);if(l.length>0){for(var b=0;b<c.options.length;b++){c.options[b].selected=false;for(var a=0;a<l.length;a++){if(l[a]==c.options[b].value){c.options[b].selected=true}}}}return}}};Ajax.prototype.Updater=function(b){this.isHTML=true;this.submitType="html";this.submit("utf-8");var c=this.retDom.selectSingleNode("root/data");var a=getNodeValue(c);setInnerHTML(b,a)};Ajax.prototype.addParam=function(a,b){if(b&&b.toXMLString){this.setDataType("xml");b.name=a;this.dataParam.push({key:a,value:b.toXMLString()})}else{this.param.push({key:a,value:b})}};Ajax.prototype.clearParam=function(){this.param=[]};Ajax.prototype.getProperty=function(a){if(this.retDom==null){return null}if(a==null||a==""){return null}var b=this.retDom.selectSingleNode("root/data/"+a);if(b!=null){return getNodeValue(b)}else{return null}};Ajax.prototype.submitForm=function(d,c){var f="";d=$id(d);for(i=0;i<d.elements.length;i++){var b=d.elements[i];if(b.type=="radio"||b.type=="checkbox"){if(!b.checked){continue}}if(b.type=="application/x-shockwave-flash"){continue}var a=d.elements[i].name||d.elements[i].id;var e=getElementValue(d.elements[i]);if(a){this.addParam(a,e)}}this.submit(c);if(this.retDom==null){return false}return true};Ajax.prototype.loadData=function(a){this.submitXML(a)};Ajax.prototype.submitXML=function(b,a){if(b){if(this.dataType=="xml"&&typeof(b)=="object"){b=EOS.json.toXMLString(b)}this.xmlParam=b}this.submit(a)};Ajax.prototype.getResponseXMLDom=function(){return this.retDom};Ajax.prototype.getReturnNodeValue=function(b){var c=this.getResponseXMLDom();var a=c?c.selectNodes(b):null;if(a&&a.length>0){return getNodeValue(a[0])}return null};Ajax.prototype.getException=function(){var a="/root/exceptions";return this.getReturnNodeValue(a)};Ajax.prototype.getExceptionCode=function(){var a="/root/exceptions/exception/code";return this.getReturnNodeValue(a)};Ajax.prototype.getExceptionMessage=function(){var a="/root/exceptions/exception/message";return this.getReturnNodeValue(a)};Ajax.prototype.getExceptionInvalid=function(){var a="/root/exceptions/invalid";return this.getReturnNodeValue(a)};Ajax.prototype.getLoginPage=function(){var a="/root/exceptions/loginPage";var b=this.getReturnNodeValue(a);b=b?trim(b+""):null;return b};var HideSubmit=Ajax;function ServiceCaller(){this.service_URL_SUFFIX=".service";this.ajax=null;this.encoding="utf-8"}ServiceCaller.submitXMLTemplate=function(d,c,a){var b=["<root><data>","	<ajaxCall>","		<serviceName>"+xmlConversion(d)+"</serviceName>","		<operateName>"+xmlConversion(c)+"</operateName>","		<params>",a||"","		</params>","		<return></return>","		<exception></exception>","	</ajaxCall>","</data></root>"];return b.join("\n")};ServiceCaller.getParamesArray=function(b,e,a){var d=[];b=b||[];a=a||b.length;for(var c=e;c<a;c++){d.push(b[c])}return d};ServiceCaller.returnConversion=function(f){var e=f.getAttribute("__category");var d=f.getAttribute("__type");if(e=="xml"){return f.xml}else{if(e=="entity"){return Dataset.initEntity(f)}else{if(e=="dataset"){var g=new Dataset(f.tagName);g.init(f.childNodes);return g}else{if(e=="collection"){var b=f.selectNodes("./entry");var a=[];for(var c=0;c<b.length;c++){var f=b[c];if(f.nodeType==1){a.push(getNodeValue(f))}}return a}}}}return getNodeValue(f)};ServiceCaller.parameConversion=function(g){var f=null,e=null;var h=typeof(g);var b="primeval";var a={data:"",type:b};if(g===null||g===undefined){e="null"}else{if(g===""){e="empty"}}if(e){a.data='<value __isNullOrEmpty="'+e+'" />';a.type=b;return a}if(h=="string"||h=="number"||h=="boolean"){b="primeval";a.data=xmlConversion(""+g)}else{if(h=="object"&&g.xml&&(g.async===false||g.async===true)){b="xml";a.data=g.xml}else{if(g instanceof Entity){b="entity";a.data=g.toXMLString(false)}else{if(h=="object"&&g.tagName&&g.tagName.toUpperCase()=="FORM"){g=getFormElementsValue(g)}if(g instanceof Dataset){g=g.getEntities()}if(g instanceof Array){b="collection";f=[];for(var d=0;d<g.length;d++){f.push(ServiceCaller.parameConversion(g[d]).data)}a.data=f.join("\n")}else{b="form";f=[];for(var c in g){f.push("<property>");f.push("<key>");f.push(xmlConversion(c));f.push("</key>");f.push("<value>");f.push(xmlConversion(g[c]+""));f.push("</value>");f.push("</property>")}a.data=f.join("\n")}}}}a.data=(b=="collection"||b=="form")?a.data:"<value>"+a.data+"</value>";a.type=b;return a};ServiceCaller.getSubmitXML=function(a){var c=[];for(var b=0;b<a.length;b++){result=ServiceCaller.parameConversion(a[b]);c.push('<param __category="'+result.type+'">');c.push(result.data);c.push("</param>")}return c.join("\n")};ServiceCaller.prototype.callBack=function(){var d=false,c=null;var b=this.getExceptionInvalid();if(b===true||b==="true"){c=this.getLoginPage();if(c){d=true}b=AJAX_EXCEPTION_INVALID+"\n\n"+this.serviceName+"."+this.operateName}else{b=this.getExceptionMessage()||this.getException()}if(d){if(window.contextPath&&c.indexOf(window.contextPath+"/")!=0){c=window.contextPath+(c.indexOf("/")==0?"":"/")+c}var a=_get_top_window();a.location=c;return}if(b&&this.onFailure){return this.onFailure(b)}this.onSuccess();return this.getReturnValue()};ServiceCaller.prototype._callCore=function(d,c,f,b,a){this.ajax=new Ajax(d+this.service_URL_SUFFIX,f);this.ajax.callBack=b||this.ajax.callBack;var e=ServiceCaller.getSubmitXML(a);this.serviceName=d;this.operateName=c;this.ajax.submitXML(ServiceCaller.submitXMLTemplate(d,c,e),this.encoding)};function form2Object(a,b){var g={};g=getFormElementsValue(a);var e=g;if(b){e={};b=b+"";b=b.lastIndexOf("/")==b.length-1?b:b+"/";if(b.indexOf("[*]")<0){for(var h in g){if(h.indexOf(b)==0){e[h]=g[h]}}}else{var c=false;for(var h in g){for(var d=1;d<Number.MAX_VALUE;d++){var f=b.replace("[*]","["+d+"]");if(h.indexOf(f)==0){e[h]=g[h];break}}}}}return e}ServiceCaller.prototype.call=function(c,b,a){this._callCore(c,b,false,null,ServiceCaller.getParamesArray(arguments,2));return this.callBack()};ServiceCaller.prototype.isSuccess=function(){return !!!this.getException()};ServiceCaller.prototype.onSuccess=function(){};ServiceCaller.prototype.onFailure=function(a){alert(AJAX_EXCEPTION+"\n\n ServiceCaller : "+a)};ServiceCaller.prototype.callAsyn=function(c,b,a){var d=this;this._callCore(c,b,true,function(){d.callBack()},ServiceCaller.getParamesArray(arguments,2))};ServiceCaller.prototype.getResponseXMLDom=function(){return this.ajax.getResponseXMLDom()};ServiceCaller.prototype.getReturnValue=function(f,g){var c="/root/data/ajaxCall/return/value";g=g||this.getResponseXMLDom();var b=g?g.selectNodes(c):[];var a=[];for(var d=0;d<b.length;d++){var e=b[d];if(e.nodeType==1){e=f===false?e:ServiceCaller.returnConversion(e);a.push(e)}}if(a.length==0){a=null}return a};ServiceCaller.prototype.getReturnNodeValue=function(a){return this.ajax?this.ajax.getReturnNodeValue(a):null};ServiceCaller.prototype.getReturn=function(){var a="/root/data/ajaxCall/return";return this.getReturnNodeValue(a)};ServiceCaller.prototype.getException=function(){var a="/root/data/ajaxCall/exceptions/ecxeption";return this.getReturnNodeValue(a)};ServiceCaller.prototype.getExceptionMessage=function(){var a="/root/data/ajaxCall/exceptions/exception/message";return this.getReturnNodeValue(a)};ServiceCaller.prototype.getExceptionCode=function(){var a="/root/data/ajaxCall/exceptions/exception/code";return this.getReturnNodeValue(a)};ServiceCaller.prototype.getExceptionInvalid=function(){var a="/root/data/ajaxCall/exceptions/invalid";return this.getReturnNodeValue(a)};ServiceCaller.prototype.getLoginPage=function(){var a="/root/data/ajaxCall/exceptions/loginPage";var b=this.getReturnNodeValue(a);b=b?trim(b+""):null;return b};var Eos_All_Message=new Array();function isNull(b){if(typeof(b)=="object"){b=b.value}var a;if(b.length==0){return true}for(a=0;a<b.length;a++){if(b.charAt(a)!=" "){return false}}return true}function isIP(b){if(typeof(b)=="object"){b=b.value}var a=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/;if(a.test(b)){if(RegExp.$1.length>3||RegExp.$2.length>3||RegExp.$3.length>3||RegExp.$4.length>3){return false}if(RegExp.$1>0&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<255){return true}}return false}function isInteger(a){if(typeof(a)=="object"){a=a.value}if(/^(\+|-)?\d+$/.test(a)){return true}else{return false}}function isPositiveInteger(a){if(typeof(a)=="object"){a=a.value}if(/^(\+)?\d+$/.test(a)){return true}else{return false}}function isURL(b){if(typeof(b)=="object"){b=b.value}if(b.indexOf("://")!=-1){var a=b.substr(0,b.indexOf("://"));if(a==""){return false}a=b.substr(b.indexOf("://")+3,a.length);if(a==""){return false}}else{return false}return true}function isDecimal(e,b,a){if(typeof(e)=="object"){e=e.value}if(/^(\+|-)?\d+($|\.\d+$)/.test(e)){var d=e.indexOf(".");if(b!=null){var c=e.length;if(d!=-1){c=c-1}if(b<c){return false}}if(a!=null){if(d==-1){return true}if(e.length-d-1>a){return false}}return true}else{return false}}function isPort(a){if(typeof(a)=="object"){a=a.value}if(/^\d+$/.test(a)){if(parseInt(a,10)>65535||parseInt(a,10)<=0){return false}return true}else{return false}}function isEmail(b){if(typeof(b)=="object"){b=b.value}var a=/^([-_A-Za-z0-9\.]+)@[A-Za-z0-9]{1}[_A-Za-z0-9\.]*\.[A-Za-z0-9]+$/;if(a.test(b)){return true}return false}function isLastMatch(c,b){if(typeof(c)=="object"){c=c.value}if(typeof(b)=="object"){b=b.value}var a=new RegExp(b+"$");if(a.test(c)){return true}else{return false}}function isFirstMatch(c,b){if(typeof(c)=="object"){c=c.value}if(typeof(b)=="object"){b=b.value}var a=new RegExp("^"+b);if(a.test(c)){return true}else{return false}}function isMatch(c,b){if(typeof(c)=="object"){c=c.value}if(typeof(b)=="object"){b=b.value}var a=new RegExp(b);if(a.test(c)){return true}else{return false}}function isChinaMobileNo(c){if(typeof(c)=="object"){c=c.value}var a=/(^[1][0-9]{10}$)|(^0[1][0-9]{10}$)/;var b=new RegExp(a);if(b.test(c)){return true}return false}function isPhoneNo(c){if(typeof(c)=="object"){c=c.value}var a=/(^([0][1-9]{2,3}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0][1-9]{2,3}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/;var b=new RegExp(a);if(b.test(c)){return true}return false}function isNumberOr_Letter(a){if(typeof(a)=="object"){a=a.value}if(/[^(\w*)]/.test(a)){return false}return true}function isNumberOrLetter(a){if(typeof(a)=="object"){a=a.value}if(/[^(a-z)*(A-Z)*(0-9)*]/.test(a)){return false}return true}function isFolder(c){if(typeof(c)=="object"){c=c.value}var a=/(^[^\.])/;var b=new RegExp(a);if(!b.test(c)){return false}a=/(^[^\\\/\?\*\"\<\>\:\|]*$)/;var b=new RegExp(a);if(b.test(c)){return true}return false}function isChinaOrNumbOrLett(c){if(typeof(c)=="object"){c=c.value}var a="^[0-9a-zA-Z\u4e00-\u9fa5]+$";var b=new RegExp(a);if(b.test(c)){return true}return false}function isChinaZipcode(a){if(typeof(a)=="object"){a=a.value}if(!isInteger(a)){return false}if(a.length!=6){return false}return true}function isChinaIDNo(h){if(typeof(h)=="object"){h=h.value}var e=EOS_CITY_LIST;var b=0;var a="";var j=h;var c=j.length;if(!/^\d{17}(\d|X|x)$/i.test(j)&&!/^\d{15}$/i.test(j)){return false}j=j.replace(/X|x$/i,"a");if(e[parseInt(j.substr(0,2))]==null){return false}if(c==18){sBirthday=j.substr(6,4)+"-"+Number(j.substr(10,2))+"-"+Number(j.substr(12,2));var g=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=(g.getFullYear()+"-"+(g.getMonth()+1)+"-"+g.getDate())){return false}for(var f=17;f>=0;f--){b+=(Math.pow(2,f)%11)*parseInt(j.charAt(17-f),11)}if(b%11!=1){return false}}else{if(c==15){sBirthday="19"+j.substr(6,2)+"-"+Number(j.substr(8,2))+"-"+Number(j.substr(10,2));var g=new Date(sBirthday.replace(/-/g,"/"));var k=g.getFullYear().toString()+"-"+(g.getMonth()+1)+"-"+g.getDate();if(sBirthday!=k){return false}}}return true}function checkPeriod(b,a){if(typeof(b)=="object"){b=b.value}if(typeof(a)=="object"){a=a.value}if(!isDate(b)){return false}if(!isDate(a)){return false}if(a>=b){return true}else{return false}}function matchRegExp(d,c,a){if(typeof(d)=="object"){d=d.value}if(c==null||c==""){return false}var b;if(a==null||a==""){b=new RegExp(c)}else{if(/[^mig]/.test(a)){return false}b=new RegExp(c,a)}if(b.test(d)){return true}return false}function checkInput(obj){if(processExtAttr(obj)){return true}var is_Null=obj.getAttr("allowNull");if(is_Null=="false"){if(isNull(obj)){f_alert(obj,CHECK_MUST_INPUT);return false}else{}}else{if(isNull(obj)){f_alert_verify_successful(obj);return true}}var maxLength=obj.getAttr("maxLength");var minLength=obj.getAttr("minLength");if(maxLength!=null){if(obj.value.length>maxLength){f_alert(obj,CHECK_INPUT_LENGTH_CANNOT_MORE_THAN+maxLength);return false}}if(minLength!=null){if(obj.value.length<minLength){f_alert(obj,CHECK_INPUT_LENGTH_CANNOT_LESS_THAN+minLength);return false}}var type=obj.getAttr("type");if(type!=null){try{if(!eval("f_check_"+type+"(obj)")){return false}else{}}catch(o){alert(type+":"+CHECK_ERROROCCUR);return false}}var maxValue=obj.getAttr("maxValue");var minValue=obj.getAttr("minValue");if(!(maxValue==null&&minValue==null)){var inputValue;var oMinValue;var oMaxValue;if(isNaN(parseFloat(obj.value))){inputValue=obj.value}else{inputValue=parseFloat(obj.value)}if(maxValue!=null){if(isNaN(parseFloat(maxValue))||minValue==null||isNaN(parseFloat(minValue))||isNaN(parseFloat(obj.value))){oMaxValue=maxValue}else{oMaxValue=parseFloat(maxValue)}if(inputValue>oMaxValue){f_alert(obj,CHECK_NOT_MORE_THAN+maxValue);return false}}if(minValue!=null){if(isNaN(parseFloat(minValue))||maxValue==null||isNaN(parseFloat(maxValue))||isNaN(parseFloat(obj.value))){oMinValue=minValue}else{oMinValue=parseFloat(minValue)}if(inputValue<oMinValue){f_alert(obj,CHECK_NOT_LESS_THAN+minValue);return false}}}f_alert_verify_successful(obj);return true}function processExtAttr(h){if(h.EOS_extendedAttribute!=null){return false}var b=h.validateAttr||h.getAttribute("validateAttr");if(!b){return true}var f=new Object();var c=b.split(";");for(var e=0;e<c.length;e++){var a=c[e].split("=");if(a.length!=2){continue}var d=a[0];var g=a[1];f[d]=g}h.EOS_extendedAttribute=f;h.getAttr=function(i){return this.EOS_extendedAttribute[i]}}function f_check_number(a){if(/^\d+$/.test(a.value)){return true}else{f_alert(a,CHECK_INPUT_NUMBER);return false}}function f_check_naturalNumber(b){var a=b.value;if(a.length>1&&a.charAt(0)=="0"){f_alert(b,CHECK_INPUT_NATURALNUMBER);return false}if(/^[0-9]+$/.test(a)){return true}else{f_alert(b,CHECK_INPUT_NATURALNUMBER);return false}}function f_check_integer(a){if(isInteger(a)){return true}else{f_alert(a,CHECK_IUPUT_INT);return false}}function f_check_float(a){if(/^(\+|-)?\d+($|\.\d+$)/.test(a.value)){return true}else{f_alert(a,CHECK_INPUT_FLOAT);return false}}function f_check_zh(a){if(/^[\u4e00-\u9fa5]+$/.test(a.value)){return true}f_alert(a,CHECK_INPUT_ZH);return false}function f_check_letter(a){if(/^[A-Za-z]+$/.test(a.value)){return true}f_alert(a,CHECK_INPUT_LETTER);return false}function f_check_IP(a){if(isIP(a.value)){return true}f_alert(a,CHECK_INVALID_IP);return false}function f_check_port(a){if(isPort(a.value)){return true}f_alert(a,CHECK_INVALID_PORT);return false}function f_check_URL(a){if(isURL(a.value)){return true}f_alert(a,CHECK_INVALID_WEBSITE);return false}function f_check_email(a){if(isEmail(a.value)){return true}f_alert(a,CHECK_INVALID_EMAIL);return false}function f_check_folder(a){if(isFolder(a.value)){return true}f_alert(a,CHECK_INVALID_FOLDER);return false}function f_check_chinaMobile(a){if(isChinaMobileNo(a.value)){return true}f_alert(a,CHECK_INVALD_HANDPHONE);return false}function f_check_phone(a){if(isPhoneNo(a.value)){return true}f_alert(a,CHECK_INVALID_PHONE);return false}function f_check_chinaZipcode(a){if(!/^\d+$/.test(a.value)){f_alert(a,CHECK_POSTALCODE_MUST_NUMBER);return false}if(a.value.length!=6){f_alert(a,CHECK_INVAILID_POSTALCODE_LENGTH);return false}return true}function f_check_chinaIDNo(a){if(isChinaIDNo(a)){return true}else{f_alert(a,CHECK_INVALID_ID);return false}}function f_check_formatStr(b){var a=b.getAttr("regExpr");if(matchRegExp(b,a)){return true}f_alert(b,CHECK_INVALID_EXP);return false}function f_check_double(c){var b=c.getAttr("totalDigit");var a=c.getAttr("fracDigit");if(isDecimal(c,b,a)){return true}var d=CHECK_INPUT_NUMBER;if(b!=null){d=d+CHECK_LEGNT_NOT_THAN+b+CHECK_WEI}if(a!=null){d=d+CHECK_FRACTION_LENGTH_NOT_THAN+a+CHECK_WEI}f_alert(c,d);return false}function f_alert(c,d){try{checkTabPage(c)}catch(b){}var a;if(c.getAttr){a=c.getAttr("message")}if(a!=null){d=a}f_alert_verify_failure(c,d);f_alert_resetMessagePos()}function checkTabPage(f){var c=f.parentNode;while(c&&c.getAttribute){var a=c.eos_tabpage_id||c.getAttribute("eos_tabpage_id");if(a){var b=$id(a);if(b){try{b.getTabPane().selectTab(b)}catch(d){}}break}c=c.parentNode}}function checkForm(e){var d=true;var c=null;var a;for(a=e.elements.length-1;a>=0;a--){if((e.elements[a].validateAttr||e.elements[a].getAttribute("validateAttr"))+""=="undefined"){continue}if(e.elements[a].disabled==true){continue}if(e.elements[a].name==null||e.elements[a].name==""){if(!(e.elements[a].id!=null&&e.elements[a].id.indexOf("_input")!=-1)){continue}}if(checkInput(e.elements[a])==false){c=e.elements[a];d=false}}if(d){return d}var b=c.type;if(b=="text"||b=="TEXT"||b=="textarea"||b=="TEXTAREA"){c.select()}return d}function f_alert_getPosition(g){var a=g.id;if(a!=null){var c=a.indexOf("_input");if(c!=-1){g=$id(a.substr(0,c)+"_container")||g}}var f=parseInt(g.style.top?g.style.top:g.offsetTop);var e=parseInt(g.style.left?g.style.left:g.offsetLeft);var d=g;var b=true;while(d=d.offsetParent){if(d.tagName=="BODY"){continue}f+=parseInt(d.offsetTop)-parseInt(d.scrollTop);e+=parseInt(d.offsetLeft)-parseInt(d.scrollLeft);if(d.style.position.toLowerCase()=="absolute"){b=false}}e=parseInt(e)+parseInt(g.style.width?g.style.width:g.offsetWidth)+10+"px";f+="px";return{left:e,top:f}}function f_alert_create_Message_plane(b,a){var d=document.createElement("DIV");d.className="alert_message";var c=f_alert_getPosition(b);d.style.top=c.top;d.style.left=c.left;if(b.style.height==""){d.style.height=""}else{d.style.height=parseInt(b.style.height)-2}d.style.whiteSpace="nowrap";d.style.zindex=999;d.onclick=function(){this.hidden()};d.show=function(e){this.innerHTML="&nbsp;"+e+"&nbsp;";this.style.display="block";this.style.zindex=999;return;this.innerHTML="&nbsp;"+e+"&nbsp;";if(d.isLoading){if(d.timeout){clearTimeout(d.timeout)}d.timeout=setTimeout(function(){return _showMessage.apply(d,[d,e])},10)}else{if(!this.isShow){document.body.appendChild(this);this.isShow=true;this.isLoading=true;setOpacity(this,0);fx_fadeIn(this,function(){return loadingFinished.apply(d,[d])},500)}}};d.hidden=function(){this.style.display="none";return;if(d.isLoading){if(d.timeout){clearTimeout(d.timeout)}d.timeout=setTimeout(function(){return _hiddenMessage.apply(d,[d])},10)}else{this.isLoading=true;this.isShow=false;fx_fadeOut(this,function(){try{document.body.removeChild(d)}catch(f){}return loadingFinished.apply(d,[d])},400)}};d.setPos=function(e){this.style.top=e.top;this.style.left=e.left};document.body.appendChild(d);d.show(a);b.Eos_Message=d;Eos_All_Message[Eos_All_Message.length]=b}function loadingFinished(a){this.isLoading=false}function _hiddenMessage(a){if(a.isLoading){a.timeout=setTimeout(function(){return _hiddenMessage.apply(a,[a])},10)}else{a.hidden()}}function _showMessage(b,a){if(b.isLoading){b.timeout=setTimeout(function(){return _showMessage.apply(b,[b,a])},10)}else{b.show(a)}}function f_alert_show_message(b,a){if(b.Eos_Message!=null){f_alert_resetMessagePos();b.Eos_Message.show(a)}else{f_alert_create_Message_plane(b,a)}}function f_alert_hidden_message(a){if(a.Eos_Message){if(a.removeClass){a.removeClass("verify_failure");a.addClass("verify_successful")}a.Eos_Message.style.display="none"}return;if(a.Eos_Message!=null){a.Eos_Message.hidden()}}function f_alert_verify_failure(b,a){removeClass(b,"verify_successful");addClass(b,"verify_failure");f_alert_show_message(b,a)}function f_alert_verify_successful(a){removeClass(a,"verify_failure");addClass(a,"verify_successful");f_alert_hidden_message(a)}function f_alert_resetMessagePos(a){for(var b=0;b<Eos_All_Message.length;b++){var c=Eos_All_Message[b];var d=f_alert_getPosition(c);c.Eos_Message.setPos(d);if(a&&typeof(a)=="function"){a(c,d)}}return;for(var b=0;b<Eos_All_Message.length;b++){var d=f_alert_getPosition(Eos_All_Message[b]);Eos_All_Message[b].Eos_Message.setPos(d)}}function f_alert_hidden_all_message(){var b=document.forms[0];if(b){for(a=b.elements.length-1;a>=0;a--){if((b.elements[a].validateAttr||b.elements[a].getAttribute("validateAttr"))+""=="undefined"){continue}if(b.elements[a].disabled==true){continue}if(b.elements[a].name==null||b.elements[a].name==""){if(!(b.elements[a].id!=null&&b.elements[a].id.indexOf("_input")!=-1)){continue}}f_alert_hidden_message(b.elements[a])}}return;f_alert_resetMessagePos();for(var a=0;a<Eos_All_Message.length;a++){Eos_All_Message[a].Eos_Message.hidden()}}eventManager.add(window,"resize",f_alert_resetMessagePos);function regCheckEvent(c,d){if(c==null){return}d=d||"blur";var b;for(b=c.elements.length-1;b>=0;b--){if((c.elements[b].validateAttr||c.elements[b].getAttribute("validateAttr"))+""=="undefined"){continue}var a=c.elements[b];eventManager.add(a,d,function(e){e=eventManager.getEvent()||e;var f=e.srcElement||e.target;checkInput(f)})}}function checkOnblur(a){regCheckEvent(a)}function checkOnkeypress(a){regCheckEvent(a,"keyup");regCheckEvent(a,"focus")};var EOSMaskCache={};function Mask(c,b){var a=this;this.id=c;this.inited=false;EOSMaskCache[this.id]=this;this.isFrameSetPage=false;this.win=b||window;this.init=function(){this.frameList=this.win.document.getElementsByTagName("frame");if(this.frameList.length>0){this.isFrameSetPage=true;this.inited=true;return this.inited}this.container=this.container||this.win.document.body;if(!this.inited&&this.win.document.body){this.core=this.win.document.createElement("div");this.core.id=this.id+"_div";this.core.onmousedown=function(){eventManager.stopBubble()};if(isIE){}this.core.className="eos-page-mask";this.core.style.display="none";this.win.document.body.appendChild(this.core);this.inited=true}return this.inited};this.setContainer=function(d){if(this.container&&this.container.setAttribute){this.container.setAttribute("_mask",null)}this.container=d;if(this.container&&this.container.setAttribute){this.container.setAttribute("_mask",this.id)}};this.isHidden=function(){return this.core.style.display=="none"};this.autoResize=function(){if(this.isHidden()){return}var g=parseInt(this.container.style.marginTop);var k=parseInt(this.container.style.marginLeft);g=g||0;k=k||0;var i=0,f=0,e,j;if(this.container==this.win.document.body){e=this.win.screen.width;j=this.win.screen.height}else{i=getElementXY(this.container);f=i[0];i=i[1];e=this.container.offsetWidth;j=this.container.offsetHeight}e+=g;j+=k;var d=this.core;d.style.top=i-g+"px";d.style.left=f-k+"px";d.style.width=e+"px";d.style.height=j+"px";if(this.container==this.win.document.body){this.container.scrollTop=0;this.container.scrollLeft=0}},this.show=function(d){if(this.isFrameSetPage){for(var f=0;f<this.frameList.length;f++){try{if(!this.frameList[f].contentWindow.eos_pageMask){this.frameList[f].contentWindow.eos_pageMask=new Mask("eos_pageMask_f_"+f,this.frameList[f].contentWindow)}this.frameList[f].contentWindow.eos_pageMask.show()}catch(g){}}return}if(!this.init()||!this.isHidden()){return}if(d){this.setContainer(d)}this.oldOverFlowX=this.container.style.overflowX;this.oldOverFlowY=this.container.style.overflowY;this.container.style.overflowX="hidden";this.container.style.overflowY="hidden";var h=getMaxZindex(this.container.ownerDocument||document);h++;this.container.style.zIndex=h;this.core.style.display="block";h++;this.core.style.zIndex=h;this.core.focus();this.autoResize()};this.hide=function(){if(this.isFrameSetPage){for(var d=0;d<this.frameList.length;d++){try{if(!this.frameList[d].contentWindow.eos_pageMask){this.frameList[d].contentWindow.eos_pageMask=new Mask("frame_"+this.frameList[d].contentWindow.location,this.frameList[d].contentWindow)}this.frameList[d].contentWindow.eos_pageMask.hide()}catch(f){}}return}if(this.isHidden()||!this.container){return}this.container.style.overflowX=this.oldOverFlowX;this.container.style.overflowY=this.oldOverFlowY;this.core.style.display="none"};this.hideAfterTime=function(d){this.win.setTimeout(function(){a.hide()},d||100)};if(window.addEventListener){window.addEventListener("load",function(){a.init()},false)}else{window.attachEvent("onload",function(){a.init()})}}window.eos_pageMask=new Mask("eos_pageMask");function maskElement(c,g){g=g||window;c=$id(c);c.maskId="_eos_"+c.id+"_mask";var j=$id(c.maskId,g.document);var a=c.offsetWidth,b=c.offsetHeight;if(!j){j=$create("div",g.document);j.style.display="none";j.id=c.maskId;if(document!=g.document){moveCss(document,g.document)}g.document.body.appendChild(j)}j.style.position="absolute";j.style.width=a+"px";j.style.height=b+"px";var f=getElementXY(c);setElementXY(j,f);j.className="eos-page-mask";j.style.display="block";g._bakscroll=g.onscroll;var i=getMaxZindex(g.document);j.onmousedown=function(){eventManager.stopBubble()};j.onkeydown=function(){eventManager.stopBubble()};j.onkeypress=function(){eventManager.stopBubble()};j.style.zIndex=i+2;j.pActiveElement=document.activeElement;try{j.focus()}catch(d){}try{j.getElementsByTagName("a")[0].focus()}catch(d){}}function unMaskElement(a,b){b=b||window;a=$id(a);var c=$id(a.maskId);if(c){c.style.display="none"}}function maskTop(){maskWindow(_get_top_window(true))}function maskWindow(d){d=d||window;hideSelect(d);if(isFrameSet(d)){var f=d.document.getElementsByTagName("frame");for(var b=0;b<f.length;b++){try{maskWindow(f[b].contentWindow)}catch(c){}}}else{var h=$id("_eos_page_mask",d.document);if(!h){h=$create("div",d.document);h.style.display="none";h.id="_eos_page_mask";h.className="eos-page-mask";if(document!=d.document){moveCss(document,d.document)}d.document.body.appendChild(h)}function a(){var j=parseInt(d.document.body.style.marginTop);var p=parseInt(d.document.body.style.marginLeft);j=j||0;p=p||0;var k=0,i=0,e,m;var o=(Math.max(d.document.documentElement.scrollLeft,d.document.body.scrollLeft)||0);var n=(Math.max(d.document.documentElement.scrollTop,d.document.body.scrollTop)||0);e=Math.max(d.document.body.scrollWidth,(d.document.body.clientWidth+o));m=Math.max(d.document.body.scrollHeight,(d.document.body.clientHeight+n));e+=j;m+=p;h.style.top=k-j+"px";h.style.left=i-p+"px";h.style.width=e+"px";h.style.height=m+"px"}h.className="eos-page-mask";h.style.display="block";a();d._bakresize=d.onresize;window.onresize=function(){a()};var g=getMaxZindex(d.document);h.onmousedown=function(){eventManager.stopBubble()};h.onkeydown=function(){eventManager.stopBubble()};h.onkeypress=function(){eventManager.stopBubble()};h.style.zIndex=g+2;h.pActiveElement=document.activeElement;try{h.focus()}catch(c){}}}function hideSelect(f){var a=!-[1,]&&!window.XMLHttpRequest;if(!a){return}if(f){if(!f["mask-select-style"]){f["mask-select-style"]=createStyle("select",f.document,true)}if(f["mask-select-style"]){f["mask-select-style"].style.visibility="hidden"}var g=f.document.getElementsByTagName("frame");for(var b=0;b<g.length;b++){try{hideSelect(g[b].contentWindow)}catch(d){}}var c=f.document.getElementsByTagName("iframe");for(var b=0;b<c.length;b++){try{hideSelect(c[b].contentWindow)}catch(d){}}}}function showSelect(f){var a=!-[1,]&&!window.XMLHttpRequest;if(!a){return}if(f){if(!f["mask-select-style"]){f["mask-select-style"]=createStyle("select",f.document,true)}if(f["mask-select-style"]){f["mask-select-style"].style.visibility="visible"}var g=f.document.getElementsByTagName("frame");for(var b=0;b<g.length;b++){try{showSelect(g[b].contentWindow)}catch(d){}}var c=f.document.getElementsByTagName("iframe");for(var b=0;b<c.length;b++){try{showSelect(c[b].contentWindow)}catch(d){}}}}function unMaskWindow(c){c=c||window;showSelect(c);if(isFrameSet(c)){var d=c.document.getElementsByTagName("frame");for(var a=0;a<d.length;a++){try{unMaskWindow(d[a].contentWindow)}catch(b){}}}else{var f=$id("_eos_page_mask",c.document);if(f){try{f.style.display="none";f.pActiveElement&&f.pActiveElement.focus();f.pActiveElement=null}catch(b){}}if(c._bakresize){c.onresize=c._bakresize}}}function unMaskTop(){unMaskWindow(_get_top_window(true))}function isFrameSet(a){return a.document.getElementsByTagName("frameset").length!=0};var EOSProgressCache={};var ProgressBar=function(d){d=d||"eos_pageProgressBar";this.winWidth=160;this.winHeight=60;this.id=d;var b="__progressbar_"+d+"_title";EOSProgressCache[d]=this;var a=$id(d);if(!a){a=$create("div");a.id=d;a.className="eos-popwin";a.style.width="100px";var c=['<div  class="eos-popwin-body">','<div style="margin:5px;margin-top:15px" ><div class="eos-progress-icon"></div>','<span id="__progressbar_'+d+'_title" ></span></div>',"</div>"].join("\n");a.innerHTML=c;document.body.appendChild(a)}this.isHidden=true;this.container=a;this.titleBar=$id("__progressbar_"+d+"_title");this.show=function(j,h,f){j=j||"Please Waiting ...";this.titleBar.innerHTML=j;var g;this.container.style.width=this.winWidth+"px";this.container.style.height=this.winHeight+"px";this.container.style.display="";if(h&&f){this.container.style.left=h+"px";this.container.style.top=f+"px"}else{if(typeof(h)=="object"&&h.offsetLeft){g=h;h=g.offsetLeft+(g.offsetWidth-this.winWidth)/2;f=g.offsetTop+(g.offsetHeight-this.winHeight)/2;this.container.style.left=h+"px";this.container.style.top=f+"px"}else{moveDivToCenter(this.container)}}try{this.container.focus()}catch(i){}this.isHidden=false};this.hide=function(){if(this.container){this.container.style.display="none"}this.isHidden=true}};function showProgressBar(e,d,b,a){var c=EOSProgressCache[e]||null;if(!c){c=new ProgressBar(e)}c.show(d,b,a);return c}function hideProgressBar(b){b=b||"eos_pageProgressBar";var a=EOSProgressCache[b]||null;if(a){a.hide()}return a}function hideAllProgressBar(){for(var a in EOSProgressCache){EOSProgressCache[a].hide()}};var EOStopWin=_get_top_window()||window;EOStopWin._eos_modal_dialog=EOStopWin._eos_modal_dialog||[];function getModalDialogId(){return"_eos_modal_dialog"+Math.random()+EOStopWin._eos_modal_dialog.length}var getCurrentModalArguments=function(){var a=EOStopWin._eos_modal_dialog.length;if(a>0){return EOStopWin._eos_modal_dialog[a-1]}else{return null}};var getModalDialog=function(d){var a=EOStopWin._eos_modal_dialog.length;for(var b=0;b<a;b++){var c=EOStopWin._eos_modal_dialog[b];if(c.id==d){return c}}return null};var lockLatestModelDialog=function(){var a=getCurrentModalArguments();if(a){a.showMask();hideSelect(a.frameWin)}else{maskTop()}};var unLockLatestModelDialog=function(){var a=getCurrentModalArguments();if(a){a.hideMask();showSelect(a.frameWin)}else{unMaskTop()}};var hideModelDialog=function(a,c){try{var j=getModalDialog(a);EOStopWin._eos_modal_dialog.pop();if(!j){return}var g=j.frameWin||j.iframe.contentWindow;try{var b=_get_top_window();b.currStack=g.bfCurrStack||[]}catch(i){}try{var d=g.returnValue}catch(i){}try{if(g.EOSTreeMenu){g.EOSTreeMenu.hideAll()}}catch(i){}if(j.container){j.container.style.display="none"}if(j.win){unLockLatestModelDialog()}}catch(h){var f=h}if(!c){try{if(j.callBack){j.callBack(d)}}catch(h){var f=h}}try{j.iframe.src=blankURL;j.ddDiv.style.display="none";ReleaseElemEvents(j.container);ReleaseElemEvents(j.ddDiv);j.ddDiv.parentNode.removeChild(j.ddDiv);j.container.parentNode.removeChild(j.container)}catch(h){var f=h}};var resizeModelDialog=function(h,b,a){var c=getModalDialog(h);c.container.style.width=b+"px";c.container.style.height=a+"px";c.maskDiv.style.width=b+"px";c.maskDiv.style.height=a+"px";var g=$id(c.id+"__model_dialog_body",c.win.document);if(a-27>0){g.style.height=a-27-7+"px"}var f=$id(c.id+"__model_dialog_frame",c.win.document);if(f){if(a-28>=0){f.style.height=a-32+"px"}f.style.width=b-14+"px"}try{c.ddDiv.style.width=b+"px";c.ddDiv.style.height=a+"px"}catch(d){}};var moveModelDialog=function(f,d,a){var b=getModalDialog(f);b.container.style.left=d+"px";b.container.style.top=a+"px";try{b.ddDiv.style.left=d+"px";b.ddDiv.style.top=a+"px"}catch(c){}};var moveModelDialogToCenter=function(b){var a=getModalDialog(b);a.container.style.top=((EOStopWin.document.body.clientHeight-a.container.offsetHeight)/2+EOStopWin.document.body.scrollTop)+"px";a.container.style.left=((EOStopWin.document.body.clientWidth-a.container.offsetWidth)/2+EOStopWin.document.body.scrollLeft)+"px"};function ModalArguments(a){this.id=a;this.win=null;this.parentWin=null;this.callBack=null;this.Argument=null;this.iframe=null;this.container=null;this.mask=null;this.frameWin=null;this.maskDiv=null;this.ddDiv=null}ModalArguments.prototype.init=function(){};ModalArguments.prototype.showMask=function(){this.maskDiv.style.display=""};ModalArguments.prototype.hideMask=function(){this.maskDiv.style.display="none"};function showModalCenter(i,g,f,c,b,h){var d=null;var a=null;return showModal(i,g,f,c,b,d,a,h)}function showModal(i,g,f,c,b,d,a,h){topWin.EOS.use("eos-modeldialog",function(){lazyShowModal(i,g,f,c,b,d,a,h)})}function lazyShowModal(i,m,b,c,f,l,g,k){c=c?parseInt(c,10):300;f=f?parseInt(f,10):200;c=c+14;f=f+14;var d=_get_top_window();var o=d.document.getElementsByTagName("BODY")[0];if(l==null||l==""){l=((d.document.body.clientWidth-c)/2+d.document.body.scrollLeft);if(l<0){l=0}}else{l=parseInt(l,10)}if(g==null||g==""){g=((EOStopWin.document.body.clientHeight-f)/2+EOStopWin.document.body.scrollTop);if(g<0){g=0}}else{g=parseInt(g,10)}var a=d.document.body.scrollTop;var n=getModalDialogId();var h=new ModalArguments(n);h.parentWin=window;h.callBack=b;h.Argument=m;h.win=d;h.init();try{lockLatestModelDialog()}catch(j){}EOStopWin._eos_modal_dialog.push(h);__showModal(n,i,h,c,f,l,g,k);d.document.body.scrollTop=a}(function(){EOS.dom=EOS.dom||{};function a(d,f){return d.contains?d!=f&&d.contains(f):!!(d.compareDocumentPosition(f)&16)}function b(g,f){var d,c=g.type.toLowerCase();if(c=="mouseover"){d=g.relatedTarget||g.fromElement}else{if(c="mouseout"){d=g.relatedTarget||g.toElement}else{return true}}return d&&d.prefix!="xul"&&!a(f,d)&&d!==f}EOS.apply(EOS.dom,{drag:function(h,c,i){i=i||window;var k=i.document;var d;var g=function(m){if(m&&m.pageX!=undefined){return{x:m.pageX,y:m.pageY}}m=i.event;return{x:m.clientX,y:m.clientY}};var j=function(m){d={top:parseInt(c.style.top),left:parseInt(c.style.left)};EOS.dom.addEvent(k,"mousemove",f);EOS.dom.addEvent(k,"mouseup",l);EOS.dom.showLayer(k);EOS.apply(d,g(m));return false};var l=function(){EOS.dom.removeEvent(k,"mousemove",f);EOS.dom.removeEvent(k,"mouseup",l);EOS.dom.hideLayer(k);return false};var f=function(n){var m=g(n);c.style.top=d.top+m.y-d.y+"px";c.style.left=d.left+m.x-d.x+"px";return false};EOS.dom.addEvent(h,"mousedown",j)},showLayer:function(c){if(!c.____dragLayer){c=c||document;var d=c.createElement("DIV");d.style.zIndex=1000000000;d.style.backgroundColor="#ffffff";d.style.width="100%";d.style.height="100%";d.style.position="absolute";d.style.top=0;d.style.left=0;d.style.opacity=0;d.style.filter="alpha(opacity=0)";c.body.appendChild(d);c.____dragLayer=d}c.____dragLayer.style.display=""},hideLayer:function(c){if(c.____dragLayer){c.____dragLayer.style.display="none"}},addEvent:function(f,d,c){var g=c;if(d=="mouseout"||d=="mouseover"){g=function(h){if(b(h,f)){c()}}}if(f.attachEvent){f["e"+d+c]=g;f[d+c]=function(){f["e"+d+c](window.event)};f.attachEvent("on"+d,f[d+c])}else{f.addEventListener(d,g,false)}},removeEvent:function(f,d,c){if(f.detachEvent){f.detachEvent("on"+d,f[d+c]);f[d+c]=null}else{f.removeEventListener(d,c,false)}}})})();function __showModal(v,b,q,p,a,B,u,C){var n=$create("div",q.win.document);n.id=v+"__model_dialog_container";n.className="eos-popwin";n.onfocus=function(){n.blur()};var c="";if(isIE){}var r=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1;var x="";if(r){x='style="filter:alpha(opacity=50)"'}var t=[c,'<div style="width:100%;height:100%">','<div id="'+v+'__model_dialog_mask" onmousedown="eventManager.stopEvent();return false;" class="eos-div-mask" style="position:absolute;top:0px;left:0px;display:none;"></div>','<TABLE  cellspacing="0" cellpadding="0" width="100%" height="100%" class="eos-dialog"><TR><TD ',x,' class="left-top-conner"><div class="ieBlank"></div></TD><TD  ',x,' class="top"></TD><TD  ',x,' class="right-top-conner"><div class="ieBlank"></div></TD></TR><TR><TD  ',x,' class="left"><div class="ieBlank"></div></TD><TD class="bgColor">','<div style="width:100%;cursor:move" id="'+v+'__model_dialog_head" class="eos-popwin-head" ><a id="'+v+'__model_dialog_focus" href="#f"></a>','<div class="eos-popwin-head-icon">&#160;</div>','<div class="eos-popwin-head-title">'+(C||" Dialog Window")+"</div>",'<div id="popupControls" class="eos-popwin-head-button"  >','<a href="javascript:void(0);" id="'+v+'__model_dialog_closebutton" onmousedown="window.returnValue=undefined;hideModelDialog(\''+v+"',true)\">&#160;</a>","</div>","</div>",'<div id="'+v+'__model_dialog_body" class="eos-popwin-body">',"</div>","</TD><TD  ",x,' class="right" id="',v,'_right"><div class="ieBlank"></div></TD></TR><TR><TD  ',x,' class="left-bottom-conner"></TD><TD  ',x,' class="bottom" id="',v,'_bottom"></TD><TD  ',x,' class="right-bottom-conner" id="',v,'_rightBottom"></TD></TR></TABLE>',"</div>"].join("");var j=['<iframe src="',blankURL,'" type="_eos_modal_dialog" eosid="'+v+'" name="'+v+'__model_dialog_frame" id="'+v+'__model_dialog_frame" scrolling="auto" ','  HSPACE ="0" VSPACE="0" MARGINHEIGHT="0" MARGINWIDTH="0" ',' class="eos-popwin-body-iframe"  border ="0"   ','frameborder="0" allowtransparency="true" ></iframe>'].join("\n");var m=_get_top_window().getMaxZindex(q.win.document);n.style.width=p+"px";n.style.height=a+"px";n.style.left=B+"px";n.style.top=u+"px";n.style.overflow="hidden";var h=$mootools(n);h.setOpacity(0);n.innerHTML=t;q.win.document.body.appendChild(n);var k=_get_top_window().getMaxZindex(q.win.document||document);k++;n.tabIndex=k;n.onmousedown=function(){try{this.focus()}catch(f){}eventManager.stopEvent()};n.onkeypress=function(){eventManager.stopEvent()};n.onkeydown=function(f){var D=(eventManager.getEvent(q.win)||f).keyCode;if(D==27){eventManager.stopEvent();window.returnValue=undefined;hideModelDialog(v)}};var w=$id(v+"__model_dialog_mask",q.win.document);w.style.width=p+"px";w.style.height=a+"px";q.maskDiv=w;w.style.zIndex=m+2;n.style.zIndex=m+1;var A=$id(v+"__model_dialog_body",q.win.document);var i=A.offsetWidth;A.style.height=(a-27)>0?(a-27-7):0+"px";A.innerHTML=j;var o=$id(v+"__model_dialog_frame",q.win.document);if(o){o.src=b;o.style.height=(a-28)>0?(a-28-7):0+"px";o.style.width=i;o.style.zIndex=m+1}var g=$id(v+"__model_dialog_head",q.win.document);g.onmousedown=function(){eventManager.stopEvent();return;try{n.focus()}catch(f){}eventManager.stopEvent()};EOS.dom.drag(g,n,q.win);var l=$create("div",q.win.document);l.style.position="absolute";l.style.width=p+"px";l.style.height=a+"px";l.style.left=B+"px";l.style.top=(u)+"px";l.style.cursor="move";l.onmousedown=function(){eventManager.stopEvent()};l.style.zIndex=m;q.win.document.body.appendChild(l);q.iframe=o;q.container=n;q.ddDiv=l;var z=$id(v+"__model_dialog_focus",q.win.document);var y=$id(v+"_right",q.win.document);var s=$id(v+"_bottom",q.win.document);var d=$id(v+"rightBottom",q.win.document);fx_fadeIn(n,function(){},650)}function openNewWindow(g,a,c,j,d,f,k,b,h,i){f=(f||f=="yes")?"yes":"no";k=(k||k=="yes")?"yes":"no";b=(b||b=="yes")?"yes":"no";h=(h||h=="yes")?"yes":"no";i=(i||i=="yes")?"yes":"no";newwin=window.open(g,"popupnav","width="+a+",height="+c+",left="+j+",top="+d+",status="+f+",menubar="+k+",location="+b+",toolbar="+h+",scrollbars="+i);newwin.focus();return newwin}var _dialogArguments,_frameElement;try{window.dialogArguments=window.dialogArguments}catch(e){var dialogArguments}try{_frameElement=window.frameElement||null}catch(e){_frameElement=null}if(_frameElement&&!isCrossDomain(window.parent)){var windowType,eosid;if(isIE&&!isIE10){windowType=_frameElement.type;eosid=_frameElement.eosid}else{windowType=_frameElement.type||_frameElement.getAttribute("type");eosid=_frameElement.eosid||_frameElement.getAttribute("eosid")}if(windowType=="_eos_modal_dialog"){var modal=getModalDialog(eosid);if(modal){window.dialogArguments=modal.Argument;window.returnValue=null;window.parentWindow=modal.parentWin;window._eos_dialog_id=modal.id;modal.frameWin=window}initDialogWindowEvent();var winTop=_get_top_window();window.bfCurrStack=winTop.currStack;winTop.currStack=[];eventManager.add(window,"unload",function(){winTop.currStack=window.bfCurrStack||[]})}}function initDialogWindowEvent(){var b=window.close;if(isIE10){document.write('<script type="text/javascript"> function close(){hideModelDialog(window["_eos_dialog_id"]);}<\/script>')}else{window.close=function(){hideModelDialog(window._eos_dialog_id)}}window.resize=function(d,c){resizeModelDialog(window._eos_dialog_id,d,c)};var a=window.moveTo;window.moveTo=function(d,c){moveModelDialog(window._eos_dialog_id,d,c)};window.moveCenter=function(){moveModelDialogToCenter(window._eos_dialog_id)}}function loadParent(a){if(window.parentWindow){if(a){window.parentWindow.location=a}else{window.parentWindow.location=window.parentWindow.location}}};function hideAllSelect(d){if(isIE&&d){var c=d.getElementsByTagName("select");for(var b=0;b<c.length;b++){c[b].back_display=c[b].style.display;c[b].style.display="none"}var a=getFrameDocuments(d);for(var b=0;b<a.length;b++){hideAllSelect(a[b])}}}function showAllSelect(d){if(isIE&&d){var c=d.getElementsByTagName("select");for(var b=0;b<c.length;b++){c[b].style.display=c[b].back_display}var a=getFrameDocuments(d);for(var b=0;b<a.length;b++){showAllSelect(a[b])}}}function getFrameDocuments(d){var a=[];if(isIE){var c=d.frames;for(var b=0;b<c.length;b++){a.push(c[b].document)}}else{var c=d.getElementsByTagName("iframe");for(var b=0;b<c.length;b++){a.push(c[b].contentDocument)}c=d.getElementsByTagName("frame");for(var b=0;b<c.length;b++){a.push(c[b].contentDocument)}}return a};var _eos_colsed_panel=[];var _eos_curr_open_panel=null;function Panel(a){this.id=a;PageControl.add(a,this);this.container=null;this.title=null;this.onExpandFunc=null;this.onCloseFunc=null;this.status=null;this.button=null}Panel.OPEN_STYLE_BUTTON="PANEL_OPEN_BUTTON";Panel.CLOSE_STYLE_BUTTON="PANEL_CLOSE_BUTTON";Panel.prototype.init=function(){this.container=$id(this.id+"_container");this.button=$id(this.id+"_button");this.titleObj=$id(this.id+"_title");this.table=$id("_"+this.id+"_panel_table");this.freshButton();var a=this;this.button.onclick=function(){a.changeStatus()}};Panel.prototype.setTitle=function(a){this.title=a;this.titleObj.innerHTML=a};Panel.prototype.getTitle=function(){return this.title};Panel.prototype.freshButton=function(){if(this.status){this.button.className=Panel.CLOSE_STYLE_BUTTON}else{this.button.className=Panel.OPEN_STYLE_BUTTON}};Panel.prototype.changeStatus=function(){var a=this.button;if(a){if(!this.status){this.open(a)}else{this.close(a)}}};Panel.prototype.open=function(obj){var table=$id("_"+this.id+"_panel_table");if(!table){return}_eos_curr_open_panel=this;if(this.onExpandFunc){try{var result=eval(this.onExpandFunc+"();");if(result!=false){table.rows[1].style.display="";if(!this.backupHeight){table.height=table.backupHeight;this.container.style.height=this.backupHeight}this.status=true;this.freshButton()}}catch(e){}}else{table.rows[1].style.display="";if(this.backupHeight){this.container.style.height=this.height}this.status=true;this.freshButton();if(this.needResize===true){_eos_colsed_panel.pop(this);for(var i=0;i<_registryEvent.length;i++){var e=_registryEvent[i];if(e.obj==window&&e.type=="resize"){e.fn()}}this.needResize=false}}_eos_curr_open_panel=null};Panel.prototype.close=function(obj){var table=$id("_"+this.id+"_panel_table");if(!table){return}if(this.onCloseFunc){try{_eos_colsed_panel.push(this);var result=eval(this.onCloseFunc+"();");if(result!=false){table.rows[1].style.display="none";this.backupHeight=this.container.style.height||this.container.height;this.height=this.container.style.height;this.container.style.height="20px";this.status=false;this.freshButton()}}catch(e){}}else{_eos_colsed_panel.push(this);table.rows[1].style.display="none";this.backupHeight=this.container.style.height||this.container.height;this.height=this.container.style.height;this.container.style.height="20px";this.status=false;this.freshButton()}};Panel.prototype.collapse=Panel.prototype.close;Panel.prototype.expand=Panel.prototype.open;function RichTextEditor(a){this.id=a;this.name="";this.value="";this.width="100%";this.height=200;this.basePath=contextPath+"/eos/ckeditor/";this.hiddenInput=null;this.toolbarSet="Full";this.container=null;this.editableContainer=null;this.richEditor=null;this.times=0;PageControl.add(a,this)}RichTextEditor.prototype.init=function(){var ID=this.id+"_textarea";this.container=$id(this.id+"_container");if(/[1-9]{0,1}[0-9](\\.[0-9])?%/.test(this.width)){this.width="100%"}else{if(isNaN(parseInt(this.width))){this.width="100%"}}if(isNaN(parseInt(this.height))){this.height=200}var editor2=CKEDITOR.instances[ID];if(editor2){editor2.destroy(true);CKEDITOR.remove(editor2)}CKEDITOR.replace(ID,{width:this.width,height:this.height,toolbar:this.toolbarSet});eval("this.richEditor =  CKEDITOR.instances."+ID);this.richEditor.setData("")};RichTextEditor.prototype.getValue=function(){var b=this.getFCKEditor();var a=b.getData();return a};RichTextEditor.prototype.getFCKEditor=function(){var ID=this.id+"_textarea";eval("var oEditor  =  CKEDITOR.instances."+ID);return oEditor};RichTextEditor.prototype.setValue=function(a){var b=this.getFCKEditor();if(this.editableContainer&&this.times==0){b._.editable.$=this.editableContainer;this.times=1}if(a!=null&&a!=undefined){b.setData(a)}else{b.setData("")}this.value=a};RichTextEditor.prototype.setFocus=function(){};RichTextEditor.prototype.lostFocus=function(){};RichTextEditor.prototype.showEditor=function(){this.container.style.display=""};RichTextEditor.prototype.hideEditor=function(){this.container.style.display="none"};RichTextEditor.prototype.hide=function(){this.hideEditor()};RichTextEditor.prototype.validate=function(){return true};RichTextEditor.prototype.isFocus=function(){return false};RichTextEditor.prototype.getDisplayValue=function(a){return a};RichTextEditor.prototype.setPosition=function(d,b,c,a){this.container.style.position="absolute";this.container.style.top="0px";this.container.style.left="0px";var e=getMaxZindex(document);if(this.container.style.zIndex!=e){this.container.style.zIndex=e}setElementXY(this.container,[d,b])};function DictRadioGroup(a){this.id=a;this.value=null;this.container=$id(this.id+"_container");this.radioes=this.container.getElementsByTagName("input");this.container.onmousedown=function(){eventManager.stopPropagation()};this.hiddenInput=new Object();this.jsonObj=null;this.initEvent();PageControl.add(a,this)}DictRadioGroup.prototype.init=function(){};DictRadioGroup.prototype.initEvent=function(){var d=this;function c(){EOS.event.fireEvent(d.id,"change");d.refreshValue()}for(var b=0;b<this.radioes.length;b++){var a=this.radioes[b];eventManager.add(a,"click",c)}eventManager.add(this.container,"keypress",c)};DictRadioGroup.prototype.refreshInput=function(){str=this.hiddenInput.value;for(var b=0;b<this.radioes.length;b++){var a=this.radioes[b];if(a.value==str){a.checked=true}else{a.checked=false}}};DictRadioGroup.prototype.refreshValue=function(){var c;for(var b=0;b<this.radioes.length;b++){var a=this.radioes[b];if(a.checked){c=a.value;break}}this.hiddenInput.value=c};DictRadioGroup.prototype.setValue=function(a){EOS.event.fireEvent(this.id,"change");this.hiddenInput.value=a;this.refreshInput()};DictRadioGroup.prototype.getValue=function(){this.refreshValue();return this.hiddenInput.value};DictRadioGroup.prototype.setFocus=function(){var c=false;for(var b=0;b<this.radioes.length;b++){var a=this.radioes[b];if(a.checked==true){a.focus();c=true;break}if(!c){this.radioes[0].focus()}}};DictRadioGroup.prototype.lostFocus=function(){};DictRadioGroup.prototype.showEditor=function(){var b=getMaxZindex();this.container.style.zIndex=b;this.container.style.display="";addClass(this.container.firstChild,"dict_comp");if(this.isDcEdit==true){var a=this.container.firstChild;a.style.width=a.firstChild.offsetWidth;initShadow(a)}this.setFocus()};DictRadioGroup.prototype.hideEditor=function(){this.container.style.display="none"};DictRadioGroup.prototype.setPosition=function(d,c,b,a){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=d+"px";this.container.style.top=c+"px"};DictRadioGroup.prototype.isFocus=function(){return true};DictRadioGroup.prototype.validate=function(){return true};DictRadioGroup.prototype.getDisplayValue=function(b){if(b==null){b=this.getValue()}if(!this.jsonObj){return b}var a=this.jsonObj[b];return a!==undefined&&a!==null?a:b};function CheckGroup(a){this.id=a;PageControl.add(a,this);this.subCheck=new Array();this.selectCheck=new Array()}CheckGroup.prototype.getRows=function(){return this.subCheck};CheckGroup.prototype.init=function(){for(var a=0;a<this.subCheck.length;a++){var b=this.subCheck[a];b.inited=true;if(b.isChecked){b.setSelected()}else{b.disSelected()}}this.afterInit()};CheckGroup.prototype.getSelectLength=function(){var a=0;for(var b=0;b<this.subCheck.length;b++){if(this.subCheck[b].getStatus()){a++}}return a};CheckGroup.prototype.getIndex=function(c){var a=-1;for(var b=0;b<this.subCheck.length;b++){if(this.subCheck[b]==c){a=b;break}}return a};CheckGroup.prototype.getLength=function(){return this.subCheck.length};CheckGroup.prototype.getSelectRows=function(){var a=[];for(var b=0;b<this.subCheck.length;b++){if(this.subCheck[b].getStatus()){a.push(this.subCheck[b])}}return a};CheckGroup.prototype.getSelectParams=function(b){var d=this.getSelectRows();var a=[];for(var c=0;c<d.length;c++){var e=d[c].getParam(b);a.push(e)}return a};CheckGroup.prototype.selectAll=function(){for(var a=0;a<this.subCheck.length;a++){var b=this.subCheck[a];b.setSelected()}};CheckGroup.prototype.selectReverse=function(){for(var a=0;a<this.subCheck.length;a++){var b=this.subCheck[a];b.reverseSelect()}};CheckGroup.prototype.disSelectAll=function(){for(var a=0;a<this.subCheck.length;a++){var b=this.subCheck[a];b.disSelected()}};CheckGroup.prototype.get=function(a){return this.subCheck[a]};CheckGroup.prototype.register=function(a){this.subCheck.push(a)};CheckGroup.prototype.afterInit=function(){};function rowCheckBox(a){this.id=a;this.isChecked=false;PageControl.add(a,this);this.params=[];this.checkbox=null;this.container=null;this.subboxes=new Array();this.row=null;this.selectStyle="";this.rowSelect=true;this.rowEvent="click";this.onSelectFunc=null;this.onUnSelectFunc=null;this.groupid=null;this.tagName="tr";this.showCheckBox=true;this.inited=false;this.backClassName=null;this.beforeSelectFunc=null;this.afterSelectFunc=null;this.beforeUnSelectFunc=null;this.afterUnSelectFunc=null}rowCheckBox.prototype.init=function(){this.container=$id(this.id+"_container");this.checkbox=$createElement("input",{id:this.id+"_checkbox",type:"checkbox"});this.container.appendChild(this.checkbox);for(var c=0;c<this.params.length;c++){var e=$createElement("input",{name:this.params[c].name,value:this.params[c].value,type:"checkbox",style:{display:"none"}});this.container.appendChild(e)}if(this.showCheckBox){this.checkbox.style.display=""}else{this.checkbox.style.display="none"}var b=this.container.getElementsByTagName("input");if(b){for(var c=0;c<b.length;c++){var d=b[c];if(d.id!=this.id){this.subboxes.push(d);d.checked=this.value}}}var g=this;this.checkbox.onclick=function(){setTimeout(a,1);eventManager.stopPropagation();return false};var a=function(){g.reverseSelect()};if(this.rowSelect){this.row=getRow(this.container,this.tagName);this.backClassName=this.row.className;eventManager.add(this.row,this.rowEvent,a)}var f=PageControl.getOne(this.groupid);f.register(this)};rowCheckBox.prototype.changeStatus=function(){for(var a=0;a<this.subboxes.length;a++){var b=this.subboxes[a];b.checked=this.value}if(this.row){if(this.value){this.row.className=this.selectStyle}else{this.row.className=this.backClassName}}};rowCheckBox.prototype.getStatus=function(){return this.value};rowCheckBox.prototype.getIndex=function(){return this.group.getIndex(this)};rowCheckBox.prototype.getParam=function(a){for(var b=0;b<this.subboxes.length;b++){var c=this.subboxes[b];if(c.name.replace(/\[\d*\]/,"[*]")==a||c.name.replace(/\[\d*\]/,"")==a){return c.value}}return null};rowCheckBox.prototype.reverseSelect=function(){if(this.value){this.disSelected()}else{this.setSelected()}};rowCheckBox.prototype.setSelected=function(){if(this.beforeSelectFunc&&this.inited){if(eval(this.beforeSelectFunc+"(this)")===false){return}}this.checkbox.checked=true;this.value=true;this.changeStatus();if(this.onSelectFunc&&this.inited){if(typeof(this.onSelectFunc)=="string"){eval(this.onSelectFunc+"(this)")}else{this.onSelectFunc(this)}}if(this.afterSelectFunc&&this.inited){eval(this.afterSelectFunc+"(this)")}};rowCheckBox.prototype.disSelected=function(){if(this.beforeUnSelectFunc&&this.inited){if(eval(this.beforeUnSelectFunc+"(this)")===false){return}}if(this.onUnSelectFunc&&this.inited){if(typeof(this.onUnSelectFunc)=="string"){eval(this.onUnSelectFunc+"(this)")}else{this.onUnSelectFunc(this)}}this.checkbox.removeAttribute("checked");this.value=false;this.changeStatus();if(this.afterUnSelectFunc&&this.inited){eval(this.afterUnSelectFunc+"(this)")}};function getRow(c,a){a=a?a.toUpperCase():"TR";var b=c;while(b){if(b.tagName.toUpperCase()==a){return b}b=b.parentNode}}function selectAll(b){var a=PageControl.getOne(b);a.selectAll()}function selectOther(b){var a=PageControl.getOne(b);a.selectReverse()}function selectReverse(a){selectOther(a)}function selectNone(b){var a=PageControl.getOne(b);a.disSelectAll()}function disSelectAll(a){selectNone(a)}function controlCheckGroup(a,b){if(a.checked){selectAll(b)}else{selectNone(b)}}function RadioGroup(a){this.id=a;PageControl.add(a,this);this.subRadio=new Array();this.currRadio=null;this.defaultRow=null}RadioGroup.prototype.getRows=function(){return this.subRadio};RadioGroup.prototype.init=function(){for(var a=0;a<this.subRadio.length;a++){if(this.subRadio[a].isChecked){this.subRadio[a].reverseSelect()}else{this.subRadio[a].disSelected()}this.subRadio[a].inited=true}this.afterInit()};RadioGroup.prototype.getParam=function(b){var a=this.getSelectRow();if(a){return a.getParam(b)}return null};RadioGroup.prototype.getIndex=function(c){var a=-1;for(var b=0;b<this.subRadio.length;b++){if(this.subRadio[b]==c){return b}}return a};RadioGroup.prototype.getSelectRow=function(){return this.currRadio};RadioGroup.prototype.get=function(a){return this.subRadio[a]};RadioGroup.prototype.getLength=function(){return this.subRadio.length};RadioGroup.prototype.getSelectLength=function(){if(this.currRadio){return 1}else{return 0}};RadioGroup.prototype.register=function(a){this.subRadio.push(a)};RadioGroup.prototype.refresh=function(jsRadio){if(this.currRadio!=jsRadio){if(jsRadio.setSelected()!==false){if(this.currRadio){this.currRadio.disSelected()}this.currRadio=jsRadio;if(jsRadio.afterSelectFunc&&jsRadio.inited){eval(jsRadio.afterSelectFunc+"(this)")}}}};RadioGroup.prototype.afterInit=function(){};function rowRadio(a){this.id=a;this.isChecked=false;PageControl.add(a,this);this.params=[];this.radio=null;this.container=null;this.subboxes=new Array();this.row=null;this.selectStyle="";this.rowSelect=true;this.rowEvent="click";this.onSelectFunc=null;this.onUnSelectFunc=null;this.groupid=null;this.group=null;this.tagName="tr";this.showRadio=true;this.inited=false;this.backClassName=null;this.beforeSelectFunc=null;this.afterSelectFunc=null}rowRadio.prototype.init=function(){this.container=$id(this.id+"_container");this.radio=$createElement("input",{id:this.id+"_radio",type:"radio"});this.container.appendChild(this.radio);for(var c=0;c<this.params.length;c++){var e=$createElement("input",{name:this.params[c].name,value:this.params[c].value,type:"checkbox",style:{display:"none"}});this.container.appendChild(e)}if(this.showRadio){this.radio.style.display=""}else{this.radio.style.display="none"}var b=this.container.getElementsByTagName("input");if(b){for(var c=0;c<b.length;c++){var d=b[c];if(d.id!=this.id){this.subboxes.push(d);d.checked=this.value}}}var g=this;this.radio.onclick=function(){eventManager.stopPropagation();setTimeout(a,1);return false};function a(){g.reverseSelect()}if(this.rowSelect){this.row=getRow(this.container,this.tagName);this.backClassName=this.row.className;eventManager.add(this.row,this.rowEvent,a)}var f=$o(this.groupid);f.register(this);this.group=f};rowRadio.prototype.changeStatus=function(){for(var a=0;a<this.subboxes.length;a++){var b=this.subboxes[a];b.checked=this.value}if(this.row){if(this.value){this.row.className=this.selectStyle}else{this.row.className=this.backClassName}}};rowRadio.prototype.getStatus=function(){return this.value};rowRadio.prototype.getParam=function(a){for(var b=0;b<this.subboxes.length;b++){var c=this.subboxes[b];if(c.name.replace(/\[\d*\]/,"[*]")==a||c.name.replace(/\[\d*\]/,"")==a){return c.value}}return null};rowRadio.prototype.reverseSelect=function(){this.group.refresh(this)};rowRadio.prototype.getIndex=function(){return this.group.getIndex(this)};rowRadio.prototype.setSelected=function(){if(this.beforeSelectFunc&&this.inited){if(eval(this.beforeSelectFunc+"(this)")===false){return false}}this.radio.checked=true;this.value=true;this.changeStatus();if(this.onSelectFunc&&this.inited){if(typeof(this.onSelectFunc)=="string"){eval(this.onSelectFunc+"(this)")}else{this.onSelectFunc(this)}}};rowRadio.prototype.disSelected=function(){if(this.onUnSelectFunc&&this.inited){if(typeof(this.onUnSelectFunc)=="string"){eval(this.onUnSelectFunc+"(this)")}else{this.onUnSelectFunc(this)}}this.radio.removeAttribute("checked");this.value=false;this.changeStatus()};function Entity(a){if(!a){a="entity"}this.status=Entity.STATUS_INIT;this.name=a;this.values={};this.parent=new Dataset(a);this.keys=[];this.__keys={};this.__type=null;this.id=null}Entity.STATUS_NEW=0;Entity.STATUS_INIT=1;Entity.STATUS_MODIFIED=2;Entity.STATUS_DELT=3;Entity.STATUS_HIDDEN=4;Entity.XPATH_LEVEL=2;Entity.LINK_SIGN="__collection";Entity.prototype.getPropertyByFieldName=function(a){return this.values[a]};Entity.prototype.setPropertyByFieldName=function(a,c){var b=false;b=this.setValue(a,c);if(b){this.update()}};Entity.prototype.setPropertyByXpath=function(e,c){var b=(e+"").split("/");var d=b[b.length-1];if(b.length==1){this.setPropertyByFieldName(d,c);return}b=b.slice(0,b.length-1);e=b.join("/");var a=this.getPropertyByXpath(e);if(a instanceof Entity){a.setPropertyByFieldName(d,c)}else{if(a!==undefined&&a!==null){oldValue=a[d];a[d]=c}else{a=this.createEntityTree(e);a.setPropertyByFieldName(d,c)}}};Entity.prototype.createEntityTree=function(f){var c=(f+"").split("/");var a=this;var d;for(var b=0;b<c.length;b++){var e=c[b];d=a.getPropertyByFieldName(e);if(d===null||d===undefined){d=new Entity(e);a.setPropertyByFieldName(e,d)}a=d}return d};Entity.prototype.getPropertyByXpath=function(e){var c=(e+"").split("/");var b=this;for(var a=0;a<c.length;a++){var d=c[a];if(b instanceof Entity){b=b.getPropertyByFieldName(d)}else{b=b[d]}if(b===null||b===undefined){break}}return b};function deepEntity(a){Entity.prototype.getProperty=Entity.prototype.getPropertyByFieldName;Entity.prototype.setProperty=Entity.prototype.setPropertyByFieldName;if(a){Entity.prototype.getProperty=Entity.prototype.getPropertyByXpath;Entity.prototype.setProperty=Entity.prototype.setPropertyByXpath}}deepEntity(false);Entity.prototype.clone=function(a){var d=new Entity(this.name);d.__type=this.__type;for(var c=0;c<this.keys.length;c++){var b=this.keys[c];var e=this.getProperty(b);if(e instanceof Dataset||e instanceof Entity){d.setProperty(b,e.clone(a))}else{d.setValue(b,e)}}return d};Entity.prototype.toXMLString=function(b){b=b!==false;var c=new StringBuffer();var h="";var f=this.name;if(b){if(this.name&&this.name.indexOf("/")>0){h=this.name.split("/")[0];f=this.name.split("/")[1];c.append("<").append(h).append(">\n")}c.append("<").append(f);if(this.__type){c.append(' __type="').append(this.__type).append('"')}if(this.id){}c.append(">\n")}var m=this.getKeys();var a={};for(var e=0;e<m.length;e++){var d=this.getProperty(m[e]);var l=d instanceof Dataset;var n=d instanceof Entity;if(d===null||d===undefined||d===""){if(m[e].indexOf("/")>0){var g=m[e].split("/");if(!a[g[0]]){a[g[0]]=[]}var j="<"+g[1]+' __isNullOrEmpty="null"/>\n';a[g[0]].push(j)}else{c.append("<").append(m[e]).append(' __isNullOrEmpty="null"/>\n')}}else{if(!l&&!n){if(m[e].indexOf("/")>0){var g=m[e].split("/");if(!a[g[0]]){a[g[0]]=[]}var j="<"+g[1]+">"+xmlConversion(d+"")+"</"+g[1]+">\n";a[g[0]].push(j)}else{c.append("<").append(m[e]).append(">");if(d||d===0){c.append(xmlConversion(d.toString()))}c.append("</").append(m[e]).append(">\n")}}else{c.append(d+"")}}}for(var k in a){if(a.hasOwnProperty(k)){c.append("<").append(k).append(">");c.append(a[k].join(""));c.append("</").append(k).append(">\n")}}if(b){c.append("</").append(f).append(">\n");if(h){c.append("</").append(h).append(">\n")}}return c.toString()};Entity.prototype.toJson=function(e){e=e!==false;var c=Entity2Json(this);if(e){var d=this.name.split("/");if(this.__type){c.__type=this.__type}for(var b=0,a=d.length;b<a;b++){var f={};f[d[b]]=c;c=f}}return c};Entity.prototype.toString=Entity.prototype.toXMLString;Entity.prototype.getKeys=function(){return this.keys};Entity.prototype.xpathParse=function(b){b+="";var c=b.indexOf("/");if(c<0){return b}else{var a=b.split("/");if(a.length!=2){$error(EOS_DATASET_NOT_SUPPORT_XPATH)}return a}};Entity.prototype.setValue=function(a,c){var b=false;if(!this.values[a]){if(!this.__keys[a]){this.keys.push(a);this.__keys[a]=true}b=true}else{if(this.values[a]!=c){b=true}}this.values[a]=c;return b};Entity.prototype.getValue=function(a){return this.values[a]};Entity.prototype.update=function(){if(this.parent){if(this.parent instanceof Dataset){this.parent.onUpdateEntity(this)}this.parent.update()}this.__onUpdate();this.onUpdate()};Entity.prototype.onUpdate=function(){};Entity.prototype.__onUpdate=function(){};function Dataset(a){this.values=[];this.entityType=a}Dataset.prototype.addEntity=function(b,a){this.values.push(b);b.parent=this;if(a!==false){b.status=Entity.STATUS_NEW}this.onAddEntity(b);this.update()};Dataset.prototype.insertEntity=function(b,a,c){if(c!==undefined){this.values.splice(c,0,b)}else{this.values.push(b)}b.parent=this;if(a!==false){b.status=Entity.STATUS_NEW}this.onAddEntity(b);this.update()};Dataset.prototype.addBlankEntity=function(){var a=new Entity(this.entityType);if(this.getLength()!=0){a=this.get(0).clone()}this.values.push(a);a.parent=this;a.status=Entity.STATUS_NEW;this.onAddEntity(a);this.update();return a};Dataset.prototype.removeEntity=function(b,a){if(this.onDeleteEntity(b)){if(a===true){for(var c=0;c<this.values.length;c++){var d=this.values[c];if(d===b){this.values.splice(c,1);break}}}else{b.status=Entity.STATUS_DELT}this.update()}};Dataset.prototype.getAlltEntities=function(){var c=[];for(var b=0;b<this.values.length;b++){var a=this.values[b];c.push(a)}return c};Dataset.prototype.setValue=function(a,b,c){a.setValue(b,c)};Dataset.prototype.getModifiedEntities=function(){var c=[];for(var b=0;b<this.values.length;b++){var a=this.values[b];if(a.status==Entity.STATUS_MODIFIED){c.push(a)}}return c};Dataset.prototype.getInsertEntities=function(){var c=[];for(var b=0;b<this.values.length;b++){var a=this.values[b];if(a.status==Entity.STATUS_NEW){c.push(a)}}return c};Dataset.prototype.getRemovedEntities=function(){var c=[];for(var b=0;b<this.values.length;b++){var a=this.values[b];if(a.status==Entity.STATUS_DELT){c.push(a)}}return c};Dataset.prototype.filter=function(c,d){var e=[];for(var b=0;b<this.values.length;b++){var a=this.values[b];if(a.getProperty(c)==d){e.push(a)}}return e};Dataset.prototype.findEntity=function(d,c){for(var b=0;b<this.values.length;b++){var a=this.values[b];if(a.getProperty(d)==c){return a}}return null};Dataset.prototype.toString=function(){var a=new StringBuffer();for(var c=0;c<this.values.length;c++){var b=this.values[c];a.append(b.toString())}return a.toString()};Dataset.prototype.toJson=function(){return Dataset2Json(this)};Dataset.prototype.clear=function(){this.values=[];this.update()};Dataset.prototype.appendDataset=function(c){for(var b=0;b<c.getLength();b++){var a=c.get(b).clone(true);this.addEntity(a);a.status=Entity.STATUS_INIT}this.update()};Dataset.prototype.init=function(b){if(b.length==1){var e=b[0].getAttribute("__isNullOrEmpty");if(e=="empty"||e=="null"){return}}for(var c=0;c<b.length;c++){var d=b[c];if(!d.tagName){continue}var a=Dataset.initEntity(d);a.id=d.getAttribute(Entity.LINK_SIGN)?d.getAttribute(Entity.LINK_SIGN):null;this.onFillEntity(a);this.addEntity(a);a.status=Entity.STATUS_INIT}};Dataset.initEntity=function(d){if(!d){return null}var a=new Entity(d.tagName);a.__type=d.getAttribute("__type");var f=d.childNodes;var c=[];c.type=null;for(var b=0;b<f.length;b++){var g=f[b];if(g.nodeType==1){if(!g.getAttribute(Entity.LINK_SIGN)){Dataset.initField(a,g)}else{if(c.type==g.tagName){c.push(g)}else{if(c.type!=null){var e=new Dataset(c.type);e.init(c);a.setProperty(c.type,e)}c=[];c.type=g.tagName;c.push(g)}}}}if(c.type!=null){var e=new Dataset(c.type);e.init(c);a.setProperty(c.type,e)}c=[];return a};Dataset.initField=function(b,d){if(d.childNodes.length>1){for(var c=0;c<d.childNodes.length;c++){var e=d.childNodes[c];if(e.nodeType==1){var a=d.tagName+"/"+e.tagName;b.setProperty(a,getNodeValue(e))}}}else{b.setProperty(d.tagName,getNodeValue(d))}};Dataset.prototype.slice=function(c,e){var d=new Dataset(this.entityType);if(!e){e=this.getLength()}if(e>this.getLength()){e=this.getLength()}for(var b=c;b<e;b++){var a=this.get(b).clone();d.addEntity(a)}return d};Dataset.prototype.update=function(){this.onUpdate()};Dataset.prototype.getEntities=function(){return this.values};Dataset.prototype.getLength=function(){return this.getEntities().length};Dataset.prototype.get=function(a){return this.values[a]};Dataset.prototype.onFillEntity=function(a){};Dataset.prototype.onUpdateEntity=function(a){};Dataset.prototype.onAddEntity=function(a){};Dataset.prototype.onDeleteEntity=function(a){return true};Dataset.prototype.onUpdate=function(){};Dataset.prototype.clone=function(a){var d=new Dataset(this.entityType);if(!a){return d}else{for(var c=0;c<this.values.length;c++){var b=this.values[c].clone(a);d.values.push(b)}return d}};Dataset.prototype.getInsertDataset=function(){var b=new Dataset(this.entityType);var c=this.getInsertEntities();for(var a=0;a<c.length;a++){b.addEntity(c[a].clone(true))}return b};Dataset.prototype.getRemovedDataset=function(){var b=new Dataset(this.entityType);var c=this.getRemovedEntities();for(var a=0;a<c.length;a++){b.addEntity(c[a].clone(true))}return b};Dataset.prototype.getModifiedDataset=function(){var b=new Dataset(this.entityType);var c=this.getModifiedEntities();for(var a=0;a<c.length;a++){b.addEntity(c[a].clone(true))}return b};Dataset.prototype.getSubmitXML=function(){var c=this.getInsertEntities();var a=new StringBuffer();if(c.length>0){for(var b=0;b<c.length;b++){c[b].name="insertEntities";a.append(c[b].toString())}}else{a.append('<insertEntities __isNullOrEmpty="null"/>')}c=this.getModifiedEntities();if(c.length>0){for(var b=0;b<c.length;b++){c[b].name="updateEntities";a.append(c[b].toString())}}else{a.append('<updateEntities __isNullOrEmpty="null"/>')}c=this.getRemovedEntities();if(c.length>0){for(var b=0;b<c.length;b++){c[b].name="deleteEntities";a.append(c[b].toString())}}else{a.append('<deleteEntities __isNullOrEmpty="null"/>')}return a.toString()};Dataset.create=function(e,c,d){var g=null;$debug("type of xml"+typeof(e));if(typeof(e)=="string"){g=createXmlDom();g.loadXML(e)}else{if(typeof(e)=="object"){g=e}else{$error("error xml of "+e);return null}}if(c.indexOf("/")!=0){c="/"+c}if(c.indexOf("/root/data")<0){c="/root/data"+c}var a=g.selectNodes(c);if(a){if(!d){var b=c.split("/");d=b[b.length-1]}var f=new Dataset(d);f.init(a);return f}else{$error("no node found by xpath:"+c+"in xml:"+g.xml);return null}};function Dataset2Array(c,a,h){var m=[];if(!c){return m}a=a||"";var k=c.getLength();for(var e=0;e<k;e++){var d=c.get(e);if(h){if(d.status==Entity.STATUS_DELT||d.status==Entity.STATUS_HIDDEN){continue}}var f=Entity2Array(d);var g=e+1;for(var b=0;b<f.length;b++){var l=a+"["+g+"]/"+f[b].key;m.push({key:l,value:f[b].value})}}return m}function Entity2Array(d){var f=[];if(!d){return f}if(d.__type){f.push({key:"__type",value:d.__type})}var g=d.keys.length;for(var e=0;e<g;e++){var k=d.keys[e];var h=d.getProperty(k);if(h instanceof Entity){var a=Entity2Array(h);for(var c=0;c<a.length;c++){var b=k+"/"+a[c].key;f.push({key:b,value:a[c].value})}}else{if(h instanceof Dataset){var l=Dataset2Array(h,k);for(var c=0;c<l.length;c++){k=l[c].key;f.push({key:k,value:l[c].value})}}else{k=k;f.push({key:k,value:h})}}}return f}function isEmptyObject(b){if(typeof(b)!="object"){return false}for(var a in b){return false}return true}function Json2Entity(c,a){if(!c){return c}a=a||new Entity();for(var b in c){if(c.hasOwnProperty(b)){var d=c[b];if(isArray(d)){d=Json2Dataset(d,b)}else{if(isEmptyObject(d)){d=null}else{if(d!==null&&d!==undefined&&typeof(d)=="object"){d=Json2Entity(d);d.parent=a;d.name=b}}}a.setProperty(b,d)}}return a}function Json2Dataset(b,e,f){f=f||new Dataset();b=b||[];if(!isArray(b)){b=[b]}for(var d=0,c=b.length;d<c;d++){var a=Json2Entity(b[d]);a.name=e||a.name;f.addEntity(a,false)}return f}function Entity2Json(a,d){d=d||{};var e=a.getKeys();for(var c=0,b=e.length;c<b;c++){var f=a.getProperty(e[c]);if(f instanceof Entity){f=Entity2Json(f)}else{if(f instanceof Dataset){f=Dataset2Json(f)}}d[e[c]]=f}return d}function Dataset2Json(f,c,a){c=c||[];for(var e=0,d=f.values.length;e<d;e++){var b=f.values[e];if(a!==true&&(b.status==Entity.STATUS_DELT||b.status==Entity.STATUS_HIDDEN)){continue}c.push(Entity2Json(b))}return c};function SimpleEditor(a){return SimpleEditorInner(a,true)}function SimpleEditorInner(a,c){var b=null;if(a){if(!a.getAttribute("__eos__editor__inited")){if(a.tagName&&a.tagName.toLowerCase()=="form"){b=initFormEditor(a)}else{b=initSimpleEditorInner(a,c)}a.setAttribute("__eos__editor__inited",true)}}return b}function initSimpleEditorInner(a,b){if(b){a.onmouseover=function(){this.mouseOver=true};a.onmouseout=function(){this.mouseOver=false};a.onmousedown=function(){eventManager.stopEvent()}}a.setValue=function(f){if(this.type=="select-multiple"){var c;var g=[];if(f instanceof Array){c=f}else{c=f.split(",")}for(var e=0;e<this.options.length;e++){for(var d=0;d<c.length;d++){if(c[d]==this.options[e].value){this.options[e].selected=true;break}}}}else{if(f===null||f===undefined){this.value=""}else{this.value=f}}};a.getValue=function(){if(this.type=="select-multiple"){var c=[];for(var d=0;d<this.options.length;d++){if(this.options[d].selected==true){c.push(this.options[d].value)}}return c}return this.value};if(b){a.showEditor=function(){this.style.display="";try{this.focus()}catch(d){}var c=this;setTimeout(function(){try{c.focus()}catch(f){}},1)};a.hideEditor=function(){this.style.display="none";this.hiddenMessage()};a.setPosition=function(f,d,e,c){this.style.position="absolute";var g=getMaxZindex(document);if(this.style.zIndex!=g){this.style.zIndex=g}this.style.top="0px";this.style.left="0px";setElementXY(this,[f,d]);if(this.type=="text"||this.type=="password"||this.type=="select-one"){this.style.width=e+"px";this.style.height=c+"px"}else{if(this.type=="select-multiple"){this.style.width=e+"px"}}};a.isFocus=function(){return this.mouseOver};a.validate=function(){return checkInput(this)};a.onkeyup=function(){if(this.validate()==false){var c=this;var d=this.timeout;clearTimeout(d);this.timeout=setTimeout(function(){return f_alert_hidden_message.apply(c,[c])},3500)}};a.hiddenMessage=function(){f_alert_verify_successful(this)};a.getDisplayValue=function(f){if(!f){return null}if(this.type=="select-one"){for(var e=0;e<this.options.length;e++){if(this.options[e].value==f){return this.options[e].text}}}else{if(this.type=="select-multiple"){var c;var g=[];if(f instanceof Array){c=f}else{c=f.split(",")}for(var e=0;e<this.options.length;e++){for(var d=0;d<c.length;d++){if(c[d]==this.options[e].value){g.push(this.options[e].text);break}}}if(f instanceof Array){return g}else{return g.join(",")}}else{if(this.type=="password"){return"******"}}}return f}}return a}function initSimpleEditor(a){initSimpleEditorInner(a,true)}function initFormEditorInner(a,c){a.value=null;a.onmouseover=function(){this.mouseOver=true};a.onmouseout=function(){this.mouseOver=false};a.setValue=function(i){a.value=i;setTimeout(j,50)};a.getValue=function(){return this.value};a.showEditor=function(){this.style.display=""};a.hideEditor=function(){this.style.display="none"};a.setPosition=function(m,l,k,i){setPosition(this,[m,l]);if(this.type=="text"||this.type=="password"||this.type=="select-one"||this.type=="select-multiple"){this.style.width=k+"px";this.style.height=i+"px"}};a.isFocus=function(){return this.mouseOver};a.validate=function(){return checkForm(this)};a.getDisplayValue=function(i){return i};a.freshFromEntity=function(i){this.value=i;j()};a.update=function(){h()};function h(){if(a.value){for(var i in a.editors){var k=a.editors[i];a.value.setProperty(i,k.getValue())}}}function g(){}function j(){if(a.value){for(var i in a.editors){var k=a.editors[i];k.setValue(a.value.getProperty(i))}}}a.editors={};for(var d=0;d<a.elements.length;d++){var e=a.elements[d];if(e.name){var f=e.getAttribute("jsid");if(f&&f.length>0){var b=$id(f);if(b){a.editors[e.name]=b}}else{a.editors[e.name]=(SimpleEditorInner(e,c))}}}return a}function initFormEditor(a){initFormEditorInner(a,true)};function TimeSelect(a){this.id=a;PageControl.add(this.id,this);this.name=null;this.hour="00";this.minute="00";this.second="00";this.hourInput=null;this.minuteInput=null;this.secondInput=null;this.container=null;this.upButton=null;this.downButton=null;this.hiddenInput=null;this.dateTime=null;this.defaultValue=null;this.__privateFormat="HH:mm:ss";this.format="HH:mm:ss";this.tabIndex=null;this.accesskey=null;this.currInput=null;this.BUTTON_UP_ID="BUTTON_UP"+a;this.BUTTON_DOWN_ID="BUTTON_DOWN"+a;this.INPUT_HOUR_ID="INPUT_HOUR"+a;this.INPUT_MINUTE_ID="INPUT_MINUTE"+a;this.INPUT_SECOND_ID="INPUT_SECOND"+a;this.INPUT_HIDDEN_ID="INPUT_HIDDEN"+a;this.maxValue="23:59:59";this.minValue="00:00:00";this.maxHour=23;this.minHour=0;this.maxMinute=59;this.minMinute=0;this.maxSecond=59;this.minSecond=0;this.readonly=false;this.isOver=false;this.disabled=false;this.allowNull=true}TimeSelect.prototype.setReadOnly=function(a){this.readonly=a;if(a){this.hourInput.readOnly=true;this.minuteInput.readOnly=true;this.secondInput.readOnly=true}else{this.hourInput.readOnly=false;this.minuteInput.readOnly=false;this.secondInput.readOnly=false}};TimeSelect.prototype.getReadOnly=function(){return this.readonly};TimeSelect.prototype.setDisabled=function(a){this.disabled=a;if(a){this.hiddenInput.disabled=true;this.hourInput.disabled=true;this.minuteInput.disabled=true;this.secondInput.disabled=true}else{this.hiddenInput.disabled=false;this.hourInput.disabled=false;this.minuteInput.disabled=false;this.secondInput.disabled=false}};TimeSelect.prototype.getDisabled=function(){return this.disabled};TimeSelect.prototype.init=function(){var a=this.toHtml();var b=$create("div");b.innerHTML=a;this.container=$id(this.id+"_container");this.container.appendChild(b);this.container.className="eos-time";this.container.onmouseover=function(){this.className="eos-time-over";this.isOver=true};this.container.onmouseout=function(){this.className="eos-time";this.isOver=false};this.container.onmousedown=function(){};if(!this.defaultValue&&!this.defaultNull){this.defaultValue="00:00:00"}if(this.defaultValue&&timeFormat(this.defaultValue,this.format)){if(this.maxValue&&this.defaultValue>this.maxValue){this.defaultValue=this.maxValue}if(this.minValue&&this.defaultValue<this.minValue){this.defaultValue=this.minValue}}this.initObject();this.setReadOnly(this.readonly);this.setDisabled(this.disabled);this.currInput=null};TimeSelect.prototype.initObject=function(){this.setCheckValue();this.hourInput=$id(this.INPUT_HOUR_ID);this.minuteInput=$id(this.INPUT_MINUTE_ID);this.secondInput=$id(this.INPUT_SECOND_ID);this.upButton=$id(this.BUTTON_UP_ID);this.downButton=$id(this.BUTTON_DOWN_ID);this.hiddenInput=$id(this.INPUT_HIDDEN_ID);var a=this;this.hourInput.onkeydown=function(){var b=eventManager.getKeyCode();return a.downkeyCode(b)};this.minuteInput.onkeydown=function(){var b=eventManager.getKeyCode();return a.downkeyCode(b)};this.secondInput.onkeydown=function(){var b=eventManager.getKeyCode();return a.downkeyCode(b)};this.setValue(this.defaultValue)};TimeSelect.prototype.setCheckValue=function(){if(isFormatTime(this.maxValue,this.format)){this.maxValue=timeFormat(this.maxValue,this.format,this.__privateFormat)}if(!isFormatTime(this.maxValue,this.__privateFormat)){this.maxValue="23:59:59"}var a=this.maxValue.split(":");this.maxHour=a[0];this.maxMinute=a[1];this.maxSecond=a[2];if(isFormatTime(this.minValue,this.format)){this.minValue=timeFormat(this.minValue,this.format,this.__privateFormat)}if(!isFormatTime(this.minValue,this.__privateFormat)){this.minValue="00:00:00"}var b=this.minValue.split(":");this.minHour=b[0];this.minMinute=b[1];this.minSecond=b[2]};TimeSelect.prototype.downkeyCode=function(a){if(a==38){this.up();return false}if(a==40){this.down();return false}if(a==9||a==8||a==37||a==39){return true}if(a==229){return false}if(a<106&&a>95){return true}if(a==46){return true}if(a>47&&a<58){return true}else{return false}};TimeSelect.prototype.clear=function(){if(this.allowNull){this.setValue(null)}};TimeSelect.prototype.up=function(){if(this.readonly||this.disabled){return}if(!this.currInput){this.currInput=this.secondInput;if(allTrim(this.hourInput.value)==""&&allTrim(this.minuteInput.value)==""){this.hourInput.value="00";this.minuteInput.value="00"}}var a=this.currInput.value*1+1;this.currInput.value=dateToStringValue(a);this.prevent(this.currInput);this.currInput.focus();this.currInput.select()};TimeSelect.prototype.down=function(){if(this.readonly||this.disabled){return}$debug(this.currInput);if(!this.currInput){this.currInput=this.secondInput;if(this.hourInput.value==""&&this.minuteInput.value==""){this.hourInput.value="00";this.minuteInput.value="00"}}var a=this.currInput.value*1-1;this.currInput.value=dateToStringValue(a);this.prevent(this.currInput);this.currInput.focus();this.currInput.select()};TimeSelect.prototype.getHours=function(){this.refreshValue();return dateToStringValue(this.hourInput.value)};TimeSelect.prototype.getMinutes=function(){this.refreshValue();return dateToStringValue(this.minuteInput.value)};TimeSelect.prototype.getSeconds=function(){this.refreshValue();return dateToStringValue(this.secondInput.value)};TimeSelect.prototype.setHours=function(a){this.hourInput.value=dateToStringValue(a);this.refreshValue()};TimeSelect.prototype.setMinutes=function(a){this.minuteInput.value=dateToStringValue(a);this.refreshValue()};TimeSelect.prototype.setSeconds=function(a){this.secondInput.value=dateToStringValue(a);this.refreshValue()};TimeSelect.prototype.getValue=function(){this.refreshValue();if(this.dateTime){return timeFormat(this.dateTime,this.__privateFormat,this.format)}else{return null}};TimeSelect.prototype.setValue=function(a){if(a===null||a===undefined||a==""){this.dateTime=null}else{this.dateTime=timeFormat(a,this.format,this.__privateFormat)}this.refresh()};TimeSelect.prototype.setFocus=function(){this.hourInput.focus()};TimeSelect.prototype.isFocus=function(){return this.isOver};TimeSelect.prototype.showEditor=function(){this.container.style.display=""};TimeSelect.prototype.hideEditor=function(){this.container.style.display="none"};TimeSelect.prototype.getDisplayValue=function(a){return a};TimeSelect.prototype.setPosition=function(d,b,c,a){if(this.container){this.container.style.position="absolute";var e=getMaxZindex(document);if(this.container.style.zIndex!=e){this.container.style.zIndex=e}setElementXY(this.container,[d,b])}};TimeSelect.prototype.refresh=function(){if(this.dateTime){var a=this.dateTime.split(":");a[0]=a[0]||"00";a[1]=a[1]||"00";a[2]=a[2]||"00";this.hourInput.value=a[0];this.minuteInput.value=a[1];this.secondInput.value=a[2]}else{this.hourInput.value="";this.minuteInput.value="";this.secondInput.value=""}this.refreshValue()};TimeSelect.prototype.refreshValue=function(){var a=dateToStringValue(this.hourInput.value);var c=dateToStringValue(this.minuteInput.value);var b=dateToStringValue(this.secondInput.value);if(a&&c&&b){this.dateTime=a+":"+c+":"+b;this.hiddenInput.value=this.dateTime}};TimeSelect.prototype.toHtml=function(){var a='tabIndex="'+this.tabIndex+'" accesskey="'+this.accesskey+'" ';var b=a+'type="text" autocomplete="off" onpropertychange="$o(\''+this.id+'\').setForObjValue(this)"  maxlength="2" onclick="this.focus();this.select()" onfocus="$o(\'';b+=this.id+"').Focus(this);\" onkeyup=\"$o('"+this.id+"').keyPress(this)\"";b+=' onpaste="return false" ondragenter="return false" onchange="$o(\'';b+=this.id+"').setForObjValue(this)\" onblur=\"$o('"+this.id+"').Blur(this)\"";var c="";c+='<div id="'+this.id+'_time_container" class="eos-time-container" style="background-color:#ffffff;width: 91px;height:20px;float:left;overflow:hidden">';c+='<div style="font-size:11pt;float:left;width: 72px;height:20px;overflow:hidden;float:left;padding-top:1px;padding-buttom:3px;padding-left:3px;">';c+='<input numtype="h" id="'+this.INPUT_HOUR_ID+'"  '+b+' style="ime-mode:disabled;width:18px;height:14px;vertical-align:middle;background-color:transparent;border:0px solid black;font-size: 9pt;text-align: center;"><b>:</b>';c+='<input numtype="m" id="'+this.INPUT_MINUTE_ID+'"  '+b+' style="ime-mode:disabled;width:18px;height:14px;vertical-align:middle;background-color:transparent;border:0px solid black;font-size: 9pt;text-align: center;"><b>:</b>';c+='<input numtype="s" id="'+this.INPUT_SECOND_ID+'"  '+b+' style="ime-mode:disabled;width:18px;height:14px;vertical-align:middle;background-color:transparent;border:0px solid black;font-size: 9pt;text-align: center;">';c+="</div>";c+='<div style="width: 16px;height:20px;overflow:hidden;float:right;padding-top:0px;">';c+='<div style="width: 16px;height:9px;overflow:hidden;">';c+="<div onclick=\"$id('"+this.id+'\').controlTime(true)" id="'+this.BUTTON_UP_ID+'" class="eos-time-arrow-up" onmouseover="this.className=\'eos-time-arrow-up-over\'" onmouseout="this.className=\'eos-time-arrow-up\'" style="width: 16px;height:10px;">';c+="</div>";c+="</div>";c+='<div style="width: 16px;height:9px;overflow:hidden;margin-top:1px;">';c+="<div onclick=\"$id('"+this.id+'\').controlTime(false)" id="'+this.BUTTON_DOWN_ID+'" class="eos-time-arrow-down" onmouseover="this.className=\'eos-time-arrow-down-over\'" onmouseout="this.className=\'eos-time-arrow-down\'" style="width: 16px;height:10px;">';c+="</div>";c+="</div>";c+="</div>";c+="</div>";c+="<div><input validateAttr='type=eos_time'  type='hidden' ";if(this.name){c+="name='"+this.name+"'"}c+="id='"+this.INPUT_HIDDEN_ID+"' value='"+this.dateTime+"'></div>";return c};TimeSelect.prototype.keyPress=function(a){if(a.value.length==2){this.prevent(a)}};TimeSelect.prototype.Blur=function(b){this.lostFocus=true;var a=this;if(b.value.length==2){this.prevent(b)}else{if(b.value.length==1){b.value="0"+b.value;this.prevent(b)}}window.tmpTimeout=setTimeout(function(){if(a.lostFocus){a.validate()}},300)};TimeSelect.prototype.Focus=function(a){this.currInput=a;this.lostFocus=false};TimeSelect.prototype.validate=function(){if(allTrim(this.hourInput.value+this.minuteInput.value+this.secondInput.value)==""){if(this.allowNull){f_alert_verify_successful($id(this.id+"_time_container"));return true}else{f_alert($id(this.id+"_time_container"),CHECK_MUST_INPUT);return false}}if(allTrim(this.hourInput.value)==""||allTrim(this.minuteInput.value)==""||allTrim(this.secondInput.value)==""){f_alert($id(this.id+"_time_container"),TIME_INPUTTIME+this.hourInput.value+":"+this.minuteInput.value+":"+this.secondInput.value+TIME_FORMATERROR);return false}if(parseInt(this.maxHour*3600+this.maxMinute*60+this.maxSecond)<parseInt(this.hourInput.value*3600+this.minuteInput.value*60+this.secondInput.value)){f_alert($id(this.id+"_time_container"),TIME_INPUTTIME+this.hourInput.value+":"+this.minuteInput.value+":"+this.secondInput.value+TIME_LESSTHAN+this.maxValue);return false}if((this.minHour*3600+this.minMinute*60+this.minSecond)>(this.hourInput.value*3600+this.minuteInput.value*60+this.secondInput.value)){f_alert($id(this.id+"_time_container"),TIME_INPUTTIME+this.hourInput.value+":"+this.minuteInput.value+":"+this.secondInput.value+TIME_MORETHAN+this.minValue);return false}f_alert_verify_successful($id(this.id+"_time_container"));return true};TimeSelect.prototype.prevent=function(a){if(a.value==""||a.value===null||a.value===undefined){return}numtype=a.getAttribute("numtype");if(numtype=="h"){if(a.value*1>23){a.value="00"}else{if(a.value*1<0){a.value="23"}else{if(isNaN(a.value)){a.value="00"}}}}else{if(numtype=="m"||numtype=="s"){if(a.value*1>59){a.value="00"}else{if(a.value*1<0){a.value="59"}else{if(isNaN(a.value)){a.value="00"}}}}}};TimeSelect.prototype.setForObjValue=function(a){this.prevent(a);this.refreshValue()};TimeSelect.prototype.controlTime=function(a){if(a){this.up()}else{this.down()}this.refreshValue();this.validate()};function f_check_eos_time(b){if(b.id){var c=b.id;if(c.indexOf("INPUT_HIDDEN")>=0){c=c.replace("INPUT_HIDDEN","");var a=$id(c);if(a){return a.validate()}}}return true};function Calendar(b,a){this.showMoreDay=true;this.id=b;this.Obj=b;this.date=null;this.mouseOffset=null;this.timer=null;this.timeSelect=null;this.format=isDateFormat(a)?a:"yyyy-MM-dd";if(isTimeFormat(this.format)){this.showTime=true;this.__privateFormat="yyyy-MM-dd HH:mm:ss";this.maxValue=dateFormat("2500-12-31 23:59:59","yyyy-MM-dd HH:mm:ss",this.format);this.minValue=dateFormat("1700-01-01 00:00:00","yyyy-MM-dd HH:mm:ss",this.format)}else{this.showTime=false;this.__privateFormat="yyyy-MM-dd";this.maxValue=dateFormat("2500-12-31","yyyy-MM-dd",this.format);this.minValue=dateFormat("1700-01-01","yyyy-MM-dd",this.format)}this.submitFormat=null;this.inputObject=null;this.eventObject=null;this.hiddenObject=null;this.canClose=true;this.container=null;this.focusStatus=false;this.defaultNull=false;this.allowInput=true;this.onSelectFunc=null;this.value=null;PageControl.add(this.id,this)}Calendar.currentCalendar=null;Calendar.editorContainer=null;Calendar.doc=document;Calendar.prototype.init=function(){this.container=$id(this.id+"_container");this.inputObject=$id(this.id+"_input");this.hiddenObject=$id(this.id+"_hidden");this.eventObject=$id(this.id+"_button");this.button=this.eventObject;this.text=this.inputObject;this.hidden=this.hiddenObject;this.setReadOnly(this.readOnly);this.setDisabled(this.isDisabled);this.button.style.verticalAlign="bottom";if(this.width!=null){this.container.style.width=this.width}try{this.refreshDisplayValue();this.refreshHiddenValue()}catch(b){}this.initEvent();if(this.maxValue){this.maxValue=dateFormat(this.maxValue,this.format,this.__privateFormat)}if(this.minValue){this.minValue=dateFormat(this.minValue,this.format,this.__privateFormat)}this.resetValue=this.value;var a=getFormByObj(this.inputObject);if(a!=null){initEosControlReset(a,this)}this.inited=true};Calendar.prototype.reset=function(){this.value=this.resetValue;this.refreshDisplayValue();this.refreshHiddenValue()};Calendar.prototype.setReadOnly=function(a){this.readOnly=a;this.inputObject.readOnly=a||!this.allowInput;if(a){this.eventObject.style.cursor="default"}else{this.eventObject.style.cursor="pointer"}};Calendar.prototype.getReadOnly=function(){return this.readOnly};Calendar.prototype.setDisabled=function(a){this.isDisabled=a;if(a){this.disabled();this.eventObject.style.cursor="default"}else{this.enable();this.eventObject.style.cursor="pointer"}};Calendar.prototype.setDisplayValue=function(a){var b=this.inputObject.value;this.inputObject.value=a;if(b!==a&&this.inited){if(this.inputObject.onchange){this.inputObject.onchange()}else{this.inputObject.fireEvent("onchange")}}};Calendar.prototype.getDisabled=function(){return this.isDisabled};Calendar.prototype.refreshDisplayValue=function(){if(this.value){this.setDisplayValue(dateFormat(this.value,this.__privateFormat,this.format));f_alert_verify_successful(this.inputObject)}};Calendar.prototype.refreshHiddenValue=function(){if(this.value){var a=this.__privateFormat;if(this.submitFormat&&this.submitFormat!=this.__privateFormat){a=this.submitFormat}this.hiddenObject.value=dateFormat(this.value,this.__privateFormat,a)}else{this.hiddenObject.value=""}};Calendar.prototype.isFocus=function(){return this.focusStatus};Calendar.prototype.initEvent=function(){var a=this;this.inputObject.onkeyup=function(){if(checkInput(this)==false){return}f_alert_verify_successful(this);if(this.value==""){a.value=null}else{a.date=dateFormat(this.value,a.format,a.__privateFormat);a.value=dateFormat(this.value,a.format,a.__privateFormat)}a.refreshHiddenValue()};this.inputObject.userOnblur=this.inputObject.onblur;this.inputObject.onblur=function(){if(this.userOnblur!=null){this.userOnblur()}this.onkeyup()};this.eventObject.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button.gif";this.eventObject.onmouseover=function(){if(a.getDisabled()||a.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button_over.gif"};this.eventObject.onmouseout=function(){if(a.getDisabled()||a.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button.gif"};this.eventObject.onmousedown=function(){if(a.getDisabled()||a.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button_down.gif"};this.eventObject.onmouseup=function(){if(a.getDisabled()||a.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/calendar/calendar_button_over.gif";var b=function(){if(CalendarEditor.getCalendar()==a){if(CalendarEditor.showStatus){a.hide()}else{a.show()}}else{a.show()}};if(CalendarEditor.inited===false){CalendarEditor.lazyInit(b);CalendarEditor.inited=true}else{b()}eventManager.stopPropagation()}};Calendar.prototype.show=function(){PageControl.addtoStack(this);var d={maxValue:this.maxValue,minValue:this.minValue,value:this.value,format:this.__privateFormat,showTime:this.showTime};CalendarEditor.reFreshEditor(d);CalendarEditor.showEditor();var g=getPosition(this.container);var a=g.left;var f=g.top;if(window!=CalendarEditor.win){if(isIE){var e=getAbsPos(this.inputObject,CalendarEditor.win);a=e.left;f=e.top;if(CalendarEditor.win!=window){a=a-2;f=f-2}}else{var e=getScreenPos(window,CalendarEditor.win);a=a+e.left-document.body.scrollLeft;f=f+e.top-document.body.scrollTop}}f=f*1+this.inputObject.offsetHeight*1;CalendarEditor.setPosition(a,f);CalendarEditor.setCurrEditor(this);if(!this.inputObject){$error("err parameters of date in Calendar:"+this.id+".show");return}var b=this.inputObject.value;var c=false;if(b){if(isDate(b,this.format)){if(this.showTime){if(isFormatTime(b,this.format)){b=dateFormat(b,this.format,this.__privateFormat);c=true}}else{b=dateFormat(b,this.format,this.__privateFormat);c=true}}}if(!c){b=dateToString(new Date(),this.__privateFormat)}this.focusStatus=true};Calendar.prototype.hide=function(){try{CalendarEditor.hideEditor();this.focusStatus=false}catch(a){}};Calendar.prototype.getValue=function(){return this.value};Calendar.prototype.setValue=function(a){if(!a||a==""){this.value=null;this.setDisplayValue("");this.hiddenObject.value="";return}if((typeof(a))!="string"){this.value=dateToString(a,this.__privateFormat);this.refreshDisplayValue();this.refreshHiddenValue()}else{if(isDate(a,this.__privateFormat)){this.value=a;this.refreshDisplayValue();this.refreshHiddenValue()}else{if(this.submitFormat&&isDate(a,this.submitFormat)){this.value=dateFormat(a,this.submitFormat,this.__privateFormat);this.refreshDisplayValue();this.refreshHiddenValue()}}if(isDate(a,"yyyy-MM-dd HH:mm:ss.S")||isDate(a,"yyyy-MM-dd HH:mm:ss")){this.value=dateFormat(a,"yyyy-MM-dd HH:mm:ss",this.__privateFormat);this.refreshDisplayValue();this.refreshHiddenValue()}else{this.setDisplayValue("");this.hiddenObject.value=""}}};Calendar.prototype.setPosition=function(d,b,c,a){this.hide();if(this.container){this.container.style.display="";this.container.style.position="absolute";var e=getMaxZindex(document);if(this.container.style.zIndex!=e){this.container.style.zIndex=e}this.container.style.left=d;this.container.style.top=b;this.eventObject.style.height=a;this.container.style.height=a;this.container.style.width=c;this.inputObject.style.height=a;this.inputObject.style.width=c-17}};Calendar.prototype.setFocus=function(){};Calendar.prototype.onValidate=function(b,a){return true};Calendar.prototype.validate=function(){var d=this.inputObject.value;if(d||d===0){var a=isDate(this.inputObject.value,this.format);var f=true;if(this.showTime){f=isFormatTime(this.inputObject.value,this.format)}if(a&&f){var e=stringToDate(this.maxValue,this.__privateFormat);var c=stringToDate(this.minValue,this.__privateFormat);var b=stringToDate(d,this.format);if(b-e>0){f_alert(this.inputObject,CALENDAR_ERROR_MIN.replace("{0}",d).replace("{1}",this.maxValue));return false}if(b-c<0){f_alert(this.inputObject,CALENDAR_ERROR_MAX.replace("{0}",d).replace("{1}",this.minValue));return false}}else{f_alert(this.inputObject,CALENDAR_ERROR_RORMAT.replace("{0}",d).replace("{1}",this.format));return false}}return this.onValidate(dateFormat(d,this.format,this.__privateFormat),this.text.value)};Calendar.prototype.hideEditor=function(){f_alert_verify_successful(this.inputObject);this.hide();this.container.style.display="none";this.eventObject.style.display="none"};Calendar.prototype.showEditor=function(){this.container.style.display="";this.eventObject.style.display=""};Calendar.prototype.disabled=function(){this.inputObject.disabled=true;this.eventObject.disabled=true;this.hiddenObject.disabled=true;this.container.disabled=true};Calendar.prototype.getDisplayValue=function(a){if(a===null||a===undefined||a==""){return""}if(isDate(a,this.__privateFormat)){return dateFormat(a,this.__privateFormat,this.format)}else{if(isDate(a,"yyyy-MM-dd")){return dateFormat(a,"yyyy-MM-dd",this.format)}if(isDate(a,"yyyy-MM-dd HH:mm:ss")){return dateFormat(a,"yyyy-MM-dd HH:mm:ss",this.format)}if(isDate(a,"yyyy-MM-dd HH:mm:ss.S")){return dateFormat(a,"yyyy-MM-dd HH:mm:ss",this.format)}return a}};Calendar.prototype.enable=function(){this.inputObject.disabled=false;this.eventObject.disabled=false;this.hiddenObject.disabled=false;this.container.disabled=false};function ShowCalendar(b){var a=$o(b);if(a){a.show()}}function CalendarEditor(){}CalendarEditor.container=null;CalendarEditor.value=null;CalendarEditor.maxValue="2500-12-31";CalendarEditor.minValue="1700-01-01";CalendarEditor.format="yyyy-MM-dd";CalendarEditor.showTime=false;CalendarEditor.MAX_YEAR=2500;CalendarEditor.MIN_YEAR=1700;CalendarEditor.lastYear=null;CalendarEditor.nextYear=null;CalendarEditor.year=null;CalendarEditor.month=null;CalendarEditor.lastMonth=null;CalendarEditor.nextMonth=null;CalendarEditor.today=null;CalendarEditor.body=null;CalendarEditor.showStatus=false;CalendarEditor.inited=false;CalendarEditor.currCell=null;CalendarEditor.lazyInit=function(a){var b=_get_top_window()||window;b.EOS.use("eos-calendar",function(){CalendarEditor.init();if(a){a()}})};CalendarEditor.init=function(){CalendarEditor.win=_get_top_window()||window;CalendarEditor.doc=CalendarEditor.win.document||document;var a=$id("_eos_webcomp_calendar_container",CalendarEditor.doc);if(a){CalendarEditor.container=a}else{var f="";if(isIE){f+='<iframe id="calendarIframe" src="'+blankURL+'" style="position:absolute;z-index:-1;" frameborder="0" ></iframe>'}f+='<div id="_eos_calendar_editor_container" onmousedown="eventManager.stopPropagation();" oncontextmenu="return false" class="eos-celendar-editor-container" style=" width: 228px;">';f+='    <div class="eos-celendar-editor-container2" style=" width: 100%;">';f+='    <table style="width: 100%" cellspacing="0" cellpadding="0">';f+="        <tr>";f+='            <td class="eos-calendar-head" style="height:26px">';f+="            <div>";f+='            <table  cellspacing="0" cellpadding="0" style="width: 100%">';f+="                <tr>";f+="                    <td>&nbsp;</td>";f+='                    <td style="width: 11px">';f+='                        <img style="cursor:hand;cursor:pointer;" id="_eos_calendar_last_year" alt="" src="'+PICTURE_ARROW_LEFT+'" class="eos-calendar-arrow-size"/></td>';f+='                    <td align="center" style="width: 41px">';f+='                        <input maxLength="4" id="_eos_calendar_year" class="eos-calendar-editor-date" onmouseover="eventManager.stopPropagation();" onmousedown="eventManager.stopPropagation();this.select();" onclick="eventManager.stopPropagation();this.select();" onmouseup="eventManager.stopPropagation();this.select();"   type="text" style="width:35px;padding-left:3;height:20px" />';f+="                    </td>";f+='                    <td style="width: 10px">';f+='                        <img style="cursor:hand;cursor:pointer;" id="_eos_calendar_next_year" alt="" src="'+PICTURE_ARROW_RIGHT+'" class="eos-calendar-arrow-size"/></td>';f+='                    <td width="30px">&nbsp;</td>';f+='                    <td style="width: 10px">';f+='                        <img style="cursor:hand;cursor:pointer;" id="_eos_calendar_last_month" alt="" src="'+PICTURE_ARROW_LEFT+'" class="eos-calendar-arrow-size"/></td>';f+='                    <td align="center"style="width:41px">';f+='                        <input maxLength="2" id="_eos_calendar_month"class="eos-calendar-editor-date" onmouseover="eventManager.stopPropagation();" onmousedown="eventManager.stopPropagation();this.select();" onclick="eventManager.stopPropagation();this.select();" onmouseup="eventManager.stopPropagation();this.select();" type="text" style="width:35px;padding-left:9;height:20px" /></td>';f+='                    <td style="width: 9px">';f+='                        <img style="cursor:hand;cursor:pointer;" id="_eos_calendar_next_month" alt="" src="'+PICTURE_ARROW_RIGHT+'" class="eos-calendar-arrow-size"/></td>';f+="                    <td>&nbsp;</td>";f+="                </tr>";f+="            </table>";f+="            </div>";f+="            </td>";f+="        </tr>";f+="        <tr>";f+='            <td style="height: 144px"><div style="height: 144px">';f+='            <table  style="width:'+(isIE?"100%":"228px")+';height:24px" cellspacing="0" cellpadding="0">';f+="                ";f+="                <tr>";f+='                    <td style="width: '+(isIE?"31":"33")+'px; height: 24px" class="eos-calendar-editor-week-left">'+CALENDAR_SUNDAY+"</td>";f+='                    <td style="width: '+(isIE?"31":"32")+'px; height: 24px" class="eos-calendar-editor-week">'+CALENDAR_MONDAY+"</td>";f+='                    <td style="width: '+(isIE?"31":"33")+'px; height: 24px" class="eos-calendar-editor-week">'+CALENDAR_TUESDAY+"</td>";f+='                    <td style="width: 31px; height: 24px" class="eos-calendar-editor-week">'+CALENDAR_WEDNESDAY+"</td>";f+='                    <td style="width: 31px; height: 24px" class="eos-calendar-editor-week">'+CALENDAR_THURSDAY+"</td>";f+='                    <td style="width: 31px; height: 24px" class="eos-calendar-editor-week">'+CALENDAR_FRIDAY+"</td>";f+='                    <td style="width: '+(isIE?"32":"33")+'px; height: 24px" class="eos-calendar-editor-week-right">'+CALENDAR_SATURDAY+"</td>";f+="                </tr>";f+="                </table>";f+='            <table id="_eos_calendar_editor_body" style="width:224;height:120px;table-layout:fixed" cellspacing="0" cellpadding="0" class="eos-calendar-editor-body">';if(isIE){f+="                <tr>";f+='                    <td id="_eos_calendar_day0" style="width: 32px; height: 18px" >25</td>';f+='                    <td id="_eos_calendar_day1" style="width: 32px; height: 18px" >26</td>';f+='                    <td id="_eos_calendar_day2" style="width: 32px; height: 18px" >27</td>';f+='                    <td id="_eos_calendar_day3" style="width: 32px; height: 18px" >28</td>';f+='                    <td id="_eos_calendar_day4" style="width: 32px; height: 18px" >29</td>';f+='                    <td id="_eos_calendar_day5" style="width: 32px; height: 18px" >30</td>';f+='                    <td id="_eos_calendar_day6" style="width: 32px; height: 18px" >1</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day7" style="width: 32px; height: 18px" >2</td>';f+='                    <td id="_eos_calendar_day8" style="width: 32px; height: 18px" >3</td>';f+='                    <td id="_eos_calendar_day9" style="width: 32px; height: 18px" >4</td>';f+='                    <td id="_eos_calendar_day10" style="width: 32px; height: 18px" >5</td>';f+='                    <td id="_eos_calendar_day11" style="width: 32px; height: 18px" >6</td>';f+='                    <td id="_eos_calendar_day12" style="width: 32px; height: 18px" >7</td>';f+='                    <td id="_eos_calendar_day13" style="width: 32px; height: 18px" >8</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day14" style="width: 32px; height: 18px" >9</td>';f+='                    <td id="_eos_calendar_day15" style="width: 32px; height: 18px" >10</td>';f+='                    <td id="_eos_calendar_day16" style="width: 32px; height: 18px" >11</td>';f+='                    <td id="_eos_calendar_day17" style="width: 32px; height: 18px" >12</td>';f+='                    <td id="_eos_calendar_day18" style="width: 32px; height: 18px" >13</td>';f+='                    <td id="_eos_calendar_day19" style="width: 32px; height: 18px" >14</td>';f+='                    <td id="_eos_calendar_day20" style="width: 32px; height: 18px" >15</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day21" style="width: 32px; height: 18px" >16</td>';f+='                    <td id="_eos_calendar_day22" style="width: 32px; height: 18px" >17</td>';f+='                    <td id="_eos_calendar_day23" style="width: 32px; height: 18px" >18</td>';f+='                    <td id="_eos_calendar_day24" style="width: 32px; height: 18px" >19</td>';f+='                    <td id="_eos_calendar_day25" style="width: 32px; height: 18px" >20</td>';f+='                    <td id="_eos_calendar_day26" style="width: 32px; height: 18px" >21</td>';f+='                    <td id="_eos_calendar_day27" style="width: 32px; height: 18px" >22</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day28" style="width: 32px; height: 18px" >23</td>';f+='                    <td id="_eos_calendar_day29" style="width: 32px; height: 18px" >24</td>';f+='                    <td id="_eos_calendar_day30" style="width: 32px; height: 18px" >25</td>';f+='                    <td id="_eos_calendar_day31" style="width: 32px; height: 18px" >26</td>';f+='                    <td id="_eos_calendar_day32" style="width: 32px; height: 18px" >27</td>';f+='                    <td id="_eos_calendar_day33" style="width: 32px; height: 18px" >28</td>';f+='                    <td id="_eos_calendar_day34" style="width: 32px; height: 18px" >29</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day35" style="width: 32px; height: 18px" >30</td>';f+='                    <td id="_eos_calendar_day36" style="width: 32px; height: 18px" >1</td>';f+='                    <td id="_eos_calendar_day37" style="width: 32px; height: 18px" >2</td>';f+='                    <td id="_eos_calendar_day38" style="width: 32px; height: 18px" >3</td>';f+='                    <td id="_eos_calendar_day39" style="width: 32px; height: 18px" >4</td>';f+='                    <td id="_eos_calendar_day40" style="width: 32px; height: 18px" >5</td>';f+='                    <td id="_eos_calendar_day41" style="width: 32px; height: 18px" >6</td>';f+="                </tr>"}else{f+="                <tr>";f+='                    <td id="_eos_calendar_day0" style="width: 32px; height: 18px" >25</td>';f+='                    <td id="_eos_calendar_day1" style="width: 32px; height: 18px" >26</td>';f+='                    <td id="_eos_calendar_day2" style="width: 32px; height: 18px" >27</td>';f+='                    <td id="_eos_calendar_day3" style="width: 31px; height: 18px" >28</td>';f+='                    <td id="_eos_calendar_day4" style="width: 31px; height: 18px" >29</td>';f+='                    <td id="_eos_calendar_day5" style="width: 31px; height: 18px" >30</td>';f+='                    <td id="_eos_calendar_day6" style="width: 31px; height: 18px" >1</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day7" style="width: 32px; height: 18px" >2</td>';f+='                    <td id="_eos_calendar_day8" style="width: 32px; height: 18px" >3</td>';f+='                    <td id="_eos_calendar_day9" style="width: 32px; height: 18px" >4</td>';f+='                    <td id="_eos_calendar_day10" style="width: 31px; height: 18px" >5</td>';f+='                    <td id="_eos_calendar_day11" style="width: 31px; height: 18px" >6</td>';f+='                    <td id="_eos_calendar_day12" style="width: 31px; height: 18px" >7</td>';f+='                    <td id="_eos_calendar_day13" style="width: 31px; height: 18px" >8</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day14" style="width: 32px; height: 18px" >9</td>';f+='                    <td id="_eos_calendar_day15" style="width: 32px; height: 18px" >10</td>';f+='                    <td id="_eos_calendar_day16" style="width: 32px; height: 18px" >11</td>';f+='                    <td id="_eos_calendar_day17" style="width: 31px; height: 18px" >12</td>';f+='                    <td id="_eos_calendar_day18" style="width: 31px; height: 18px" >13</td>';f+='                    <td id="_eos_calendar_day19" style="width: 31px; height: 18px" >14</td>';f+='                    <td id="_eos_calendar_day20" style="width: 31px; height: 18px" >15</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day21" style="width: 32px; height: 18px" >16</td>';f+='                    <td id="_eos_calendar_day22" style="width: 32px; height: 18px" >17</td>';f+='                    <td id="_eos_calendar_day23" style="width: 32px; height: 18px" >18</td>';f+='                    <td id="_eos_calendar_day24" style="width: 31px; height: 18px" >19</td>';f+='                    <td id="_eos_calendar_day25" style="width: 31px; height: 18px" >20</td>';f+='                    <td id="_eos_calendar_day26" style="width: 31px; height: 18px" >21</td>';f+='                    <td id="_eos_calendar_day27" style="width: 31px; height: 18px" >22</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day28" style="width: 32px; height: 18px" >23</td>';f+='                    <td id="_eos_calendar_day29" style="width: 32px; height: 18px" >24</td>';f+='                    <td id="_eos_calendar_day30" style="width: 32px; height: 18px" >25</td>';f+='                    <td id="_eos_calendar_day31" style="width: 31px; height: 18px" >26</td>';f+='                    <td id="_eos_calendar_day32" style="width: 31px; height: 18px" >27</td>';f+='                    <td id="_eos_calendar_day33" style="width: 31px; height: 18px" >28</td>';f+='                    <td id="_eos_calendar_day34" style="width: 31px; height: 18px" >29</td>';f+="                </tr>";f+="                <tr>";f+='                    <td id="_eos_calendar_day35" style="width: 32px; height: 18px" >30</td>';f+='                    <td id="_eos_calendar_day36" style="width: 32px; height: 18px" >1</td>';f+='                    <td id="_eos_calendar_day37" style="width: 32px; height: 18px" >2</td>';f+='                    <td id="_eos_calendar_day38" style="width: 31px; height: 18px" >3</td>';f+='                    <td id="_eos_calendar_day39" style="width: 31px; height: 18px" >4</td>';f+='                    <td id="_eos_calendar_day40" style="width: 31px; height: 18px" >5</td>';f+='                    <td id="_eos_calendar_day41" style="width: 31px; height: 18px" >6</td>';f+="                </tr>"}f+="            </table>";f+="            </div></td>";f+="        </tr>";f+='        <tr id="_eos_calendar_time_container">';f+='            <td style="height: 26px" align="left" class="eos-calendar-time">';f+='              <table cellspacing="0" cellpadding="0" border="0"><tr><td width="150px"><div style="float:left" align="left" id="_eos_calendar_time_editor_container"></div></td>';f+='              <td align="right">';f+="              </td></tr></table>";f+="            </td>";f+="        </tr>";f+="        <tr>";f+='            <td class="eos-calendar-bottom" style="height: 30px" align="right">';f+='<div  id="_eos_calendar_ok" class="eos-button" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner" style="display:inline">&nbsp&nbsp'+CALENDAR_BUTTON_OK+"&nbsp&nbsp</div></div>&nbsp;";f+='<div  id="_eos_calendar_today" class="eos-button" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner"  style="display:inline">&nbsp&nbsp'+CALENDAR_TODAY+"&nbsp&nbsp</div></div>&nbsp;";f+='<div  id="_eos_calendar_clear" class="eos-button" onmouseover="buttonMouseOver(this)" onmouseout="buttonMouseOut(this)" onmousedown="buttonMouseDown(this)" onmouseup="buttonMouseUp(this)"><div align="center" class="eos-button-inner"  style="display:inline">&nbsp&nbsp'+CLEAR+"&nbsp&nbsp</div></div>";f+="            </td>";f+="        </tr>";f+="    </table>";f+="    </div>";f+="</div>";var g=$create("div",CalendarEditor.doc);g.onmousedown=function(){eventManager.stopPropagation()};g.style.height="222px";g.style.width="228px";g.style.position="absolute";g.id="_eos_webcomp_calendar_container";g.innerHTML=f;g.style.display="none";CalendarEditor.container=g;function b(){CalendarEditor.doc.body.appendChild(g);CalendarEditor.container.onkeydown=function(){var e=eventManager.getKeyCode();if(e==13){if(CalendarEditor.showTime){CalendarEditor.onOk()}}if(e==27){CalendarEditor.hideEditor()}}}try{b()}catch(d){CalendarEditor.win.eventManager.add(window,"load",b)}if(document!=CalendarEditor.doc){moveCss(document,CalendarEditor.doc)}if(CalendarEditor.win.createTimeSelect){var c=CalendarEditor.win.createTimeSelect("_eos_calendar_time_editor");CalendarEditor.setTimeSelect(c);c.init()}}CalendarEditor.okBtn=$id("_eos_calendar_ok",CalendarEditor.doc);CalendarEditor.okBtn.onclick=CalendarEditor.onOk;CalendarEditor.lastYear=$id("_eos_calendar_last_year",CalendarEditor.doc);CalendarEditor.nextYear=$id("_eos_calendar_next_year",CalendarEditor.doc);CalendarEditor.year=$id("_eos_calendar_year",CalendarEditor.doc);CalendarEditor.month=$id("_eos_calendar_month",CalendarEditor.doc);CalendarEditor.lastMonth=$id("_eos_calendar_last_month",CalendarEditor.doc);CalendarEditor.nextMonth=$id("_eos_calendar_next_month",CalendarEditor.doc);CalendarEditor.today=$id("_eos_calendar_today",CalendarEditor.doc);CalendarEditor.clear=$id("_eos_calendar_clear",CalendarEditor.doc);CalendarEditor.body=$id("_eos_calendar_editor_body",CalendarEditor.doc);CalendarEditor.timeContainer=$id("_eos_calendar_time_container",CalendarEditor.doc);CalendarEditor.timeSelect=CalendarEditor.getTimeSelect();CalendarEditor.lastYear.onmouseover=function(){this.src=PICTURE_ARROW_LEFT_OVER};CalendarEditor.lastYear.onmouseout=function(){this.src=PICTURE_ARROW_LEFT};CalendarEditor.nextYear.onmouseover=function(){this.src=PICTURE_ARROW_RIGHT_OVER};CalendarEditor.nextYear.onmouseout=function(){this.src=PICTURE_ARROW_RIGHT};CalendarEditor.lastMonth.onmouseover=function(){this.src=PICTURE_ARROW_LEFT_OVER};CalendarEditor.lastMonth.onmouseout=function(){this.src=PICTURE_ARROW_LEFT};CalendarEditor.nextMonth.onmouseover=function(){this.src=PICTURE_ARROW_RIGHT_OVER};CalendarEditor.nextMonth.onmouseout=function(){this.src=PICTURE_ARROW_RIGHT};if(isFF){buttonForFF(CalendarEditor.okBtn);buttonForFF(CalendarEditor.today);buttonForFF(CalendarEditor.clear)}};function calendarUnload(){try{CalendarEditor.hideEditor()}catch(b){var a=$id("_eos_webcomp_calendar_container",CalendarEditor.doc);a.style.display="none"}}eventManager.add(window,"unload",calendarUnload);CalendarEditor.initEvent=function(){};CalendarEditor.setTimeSelect=function(a){CalendarEditor.win._eos_calendar_time_select=a};CalendarEditor.getTimeSelect=function(){return CalendarEditor.win._eos_calendar_time_select};CalendarEditor.showEditor=function(){if(CalendarEditor.showTime){CalendarEditor.timeContainer.style.display="";CalendarEditor.okBtn.style.display="";if(isFF){CalendarEditor.container.style.height="226px";CalendarEditor.container.firstChild.style.height="226px"}}else{CalendarEditor.timeContainer.style.display="none";CalendarEditor.okBtn.style.display="none";if(isFF){CalendarEditor.container.style.height="200px";CalendarEditor.container.firstChild.style.height="200px"}}CalendarEditor.initCalendarEvent();CalendarEditor.freshDate(CalendarEditor.value);CalendarEditor.freshTimeComp();CalendarEditor.showStatus=true;CalendarEditor.container.style.display="";if(isIE){var a=$id("calendarIframe",CalendarEditor.doc);a.style.width=a.nextSibling.offsetWidth;a.style.height=a.nextSibling.offsetHeight;a.style.top=a.nextSibling.offsetTop;a.style.left=a.nextSibling.offsetLeft}var b=$id("_eos_calendar_editor_container",CalendarEditor.doc);initShadow(b,CalendarEditor.doc)};CalendarEditor.initCalendarEvent=function(){CalendarEditor.lastYear.onclick=function(){CalendarEditor.changeYear(CalendarEditor.year.value-1)};CalendarEditor.nextYear.onclick=function(){CalendarEditor.changeYear(CalendarEditor.year.value*1+1)};CalendarEditor.year.onkeyup=function(){CalendarEditor.changeYear(CalendarEditor.year.value)};CalendarEditor.year.onblur=function(){CalendarEditor.changeYear(CalendarEditor.year.value)};CalendarEditor.month.onkeyup=function(){CalendarEditor.changeMonth(CalendarEditor.month.value)};CalendarEditor.month.onblur=function(){CalendarEditor.changeMonth(CalendarEditor.month.value)};CalendarEditor.lastMonth.onclick=function(){CalendarEditor.changeMonth(dateToStringValue(CalendarEditor.month.value-1))};CalendarEditor.nextMonth.onclick=function(){CalendarEditor.changeMonth(dateToStringValue(CalendarEditor.month.value*1+1))};CalendarEditor.today.onclick=function(){CalendarEditor.returnValue(new Date())};CalendarEditor.clear.onclick=function(){var a=CalendarEditor.getCalendar();if(a){a.inputObject.value="";a.hiddenObject.value="";a.value=null}CalendarEditor.hideEditor()}};CalendarEditor.hideEditor=function(){if(CalendarEditor.container){CalendarEditor.container.style.display="none";CalendarEditor.showStatus=false}};CalendarEditor.setPosition=function(c,g,b,k){CalendarEditor.container.style.position="absolute";var j=getMaxZindex(CalendarEditor.doc);if(CalendarEditor.container.style.zIndex!=j){CalendarEditor.container.style.zIndex=j}var f=CalendarEditor.container.offsetHeight;var d=CalendarEditor.container.offsetWidth;var a=CalendarEditor.doc.body.clientHeight;var e=CalendarEditor.doc.body.clientWidth;var l=a+CalendarEditor.doc.body.scrollTop;var h=e+CalendarEditor.doc.body.scrollLeft;if(f>=a){g=CalendarEditor.doc.body.scrollTop}else{if((g+f)>l){g=l-f}}if(d>=e){c=CalendarEditor.doc.body.scrollLeft}else{if((c+d)>h){c=h-d}}if(window.isGecko){g=g-4}CalendarEditor.container.style.left=c;CalendarEditor.container.style.top=g};CalendarEditor.reFreshEditor=function(a){CalendarEditor.maxValue=a.maxValue;CalendarEditor.minValue=a.minValue;CalendarEditor.format=a.format;CalendarEditor.value=a.value;CalendarEditor.showTime=a.showTime};CalendarEditor.setCurrEditor=function(a){CalendarEditor.win._eos_curr_calendar=a};CalendarEditor.getCalendar=function(a){return CalendarEditor.win._eos_curr_calendar};CalendarEditor.getMaxYear=function(){if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var a=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);return a.getFullYear()}return CalendarEditor.MAX_YEAR};CalendarEditor.getMaxMonth=function(){if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var a=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);return a.getMonth()}return 11};CalendarEditor.getMaxDay=function(){if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var a=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);return a.getDate()}return 31};CalendarEditor.getMinYear=function(){if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var a=stringToDate(CalendarEditor.minValue,CalendarEditor.format);return a.getFullYear()}return CalendarEditor.MIN_YEAR};CalendarEditor.getMinMonth=function(){if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var a=stringToDate(CalendarEditor.minValue,CalendarEditor.format);return a.getMonth()}return 0};CalendarEditor.getMinDay=function(){if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var a=stringToDate(CalendarEditor.minValue,CalendarEditor.format);return a.getDate()}return 1};CalendarEditor.isHoliday=function(c,d,b){var a=new Date(c,d,b);a.setFullYear(c);return(a.getDay()==6||a.getDay()==0)};CalendarEditor.freshTimeComp=function(){if(!CalendarEditor.showTime){return}var a=CalendarEditor.value.getHours();var c=CalendarEditor.value.getMinutes();var b=CalendarEditor.value.getSeconds();CalendarEditor.timeSelect.setHours(a);CalendarEditor.timeSelect.setMinutes(c);CalendarEditor.timeSelect.setSeconds(b)};CalendarEditor.refreshTime=function(a){if(CalendarEditor.showTime){a.setHours(CalendarEditor.timeSelect.getHours());a.setMinutes(CalendarEditor.timeSelect.getMinutes());a.setSeconds(CalendarEditor.timeSelect.getSeconds())}return a};CalendarEditor.freshHeader=function(){CalendarEditor.month.value=dateToStringValue(CalendarEditor.value.getMonth()+1);CalendarEditor.year.value=CalendarEditor.value.getFullYear()};CalendarEditor.changeMonth=function(g){if(isNaN(g)){return}if(g==""){return}if(g.length!=2){return}g=g-1;var b=CalendarEditor.getMaxMonth();var f=CalendarEditor.getMinMonth();var c=CalendarEditor.value.getFullYear();var e=CalendarEditor.getMaxYear();var h=CalendarEditor.getMinYear();if(g>b&&c==e){g=b}if(g<f&&c==h){g=f}var j=CalendarEditor.value.getDate();var d=new Date(c,g+1,0).getDate();j=j>d?d:j;var a=new Date(c,g,j);a.setFullYear(c);a=CalendarEditor.refreshTime(a);CalendarEditor.freshDate(dateToString(a,CalendarEditor.format))};CalendarEditor.changeYear=function(e){if(isNaN(e)){return}if(e.length<=3){return}var a=CalendarEditor.getMaxYear();var f=CalendarEditor.getMinYear();if(e>a){e=a}if(e<f){e=f}var d=CalendarEditor.value.getMonth();var b=CalendarEditor.value.getDate();if(d==1&&b==29){if(e%4!=0){b=28}}var c=new Date(e,d,b);c.setFullYear(e);c=CalendarEditor.refreshTime(c);CalendarEditor.freshDate(dateToString(c,CalendarEditor.format))};CalendarEditor.onClick=function(b){if(b.innerHTML!=""){var a=b.value;if(CalendarEditor.showTime){if(CalendarEditor.currCell){removeClass(CalendarEditor.currCell,"eos-calendar-editor-currday")}addClass(b,"eos-calendar-editor-currday");CalendarEditor.currCell=b;CalendarEditor.value=a;CalendarEditor.returnValue(a)}else{CalendarEditor.returnValue(a)}}};CalendarEditor.onOk=function(){if(CalendarEditor.value!=null){CalendarEditor.returnValue(CalendarEditor.value)}};CalendarEditor.outClick=function(b){try{CalendarEditor.hideEditor()}catch(a){}};CalendarEditor.returnValue=function(_date){_date=CalendarEditor.refreshTime(_date);if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){var maxDate=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);if(_date-maxDate>0){return}}if(isDate(CalendarEditor.minValue,CalendarEditor.format)){var minDate=stringToDate(CalendarEditor.minValue,CalendarEditor.format);if(_date-minDate<0){return}}var calendar=CalendarEditor.getCalendar();if(calendar){calendar.setValue(_date);if(calendar.onSelectFunc){try{eval(calendar.onSelectFunc+"(_date);")}catch(e){alert(e)}}calendar.validate()}CalendarEditor.hideEditor()};CalendarEditor.hideTime=function(){};CalendarEditor.isShow=function(){return CalendarEditor.showStatus};CalendarEditor.freshDate=function(t){var b=new Array(31,30,31,30,31,30,31,31,30,31,30,31);var l=new Date();if(isDate(t,CalendarEditor.format)){l=stringToDate(t,CalendarEditor.format)}var j=null;var f=null;if(isDate(CalendarEditor.maxValue,CalendarEditor.format)){j=stringToDate(CalendarEditor.maxValue,CalendarEditor.format);if(l-j>0){l=j}}if(isDate(CalendarEditor.minValue,CalendarEditor.format)){f=stringToDate(CalendarEditor.minValue,CalendarEditor.format);if(l-f<0){l=f}}CalendarEditor.value=l;CalendarEditor.freshHeader();var d=l.getFullYear();var k=l.getMonth();var u=1;var p=new Date(d,k,1).getDay();var q=k==0?d-1:d;var g=k==0?11:k-1;var o=b[g];if(g==1){o=((q%4==0)&&(q%100!=0)||(q%400==0))?29:28}o-=p-1;var n=1;b[1]=((d%4==0)&&(d%100!=0)||(d%400==0))?29:28;for(i=0;i<42;i++){var a=$id("_eos_calendar_day"+i,CalendarEditor.doc);a.onmouseover=function(){addClass(this,"eos-calendar-editor-overday")};a.onmouseout=function(){removeClass(this,"eos-calendar-editor-overday")};a.onclick=function(){CalendarEditor.onClick(this)};a.className="eos-calendar-editor-day";if(i<p){var c=new Date(d,k-1,o);a.innerHTML=o;a.title=dateToString(c,CALENDAR_DEFAULT_FORMAT);a.value=c;a.className="eos-calendar-editor-moreday";o++}else{if(u>b[k]){var m=new Date(d,k+1,n);a.innerHTML=n;a.title=dateToString(m,CALENDAR_DEFAULT_FORMAT);a.value=m;a.className="eos-calendar-editor-moreday";n++}else{if(i>=new Date(d,k,1).getDay()&&u<=b[k]){var h=new Date(d,k,u);h.setFullYear(d);a.title=dateToString(h,CALENDAR_DEFAULT_FORMAT);a.value=h;a.innerHTML=u;var s=new Date();var e=a.value;if(CalendarEditor.isHoliday(d,k,u)){a.className="eos-calendar-editor-holiday"}u++}else{a.innerHTML="";a.title=""}}}if(a.value){var s=new Date();if(a.value.getYear()==s.getYear()&&a.value.getMonth()==s.getMonth()&&a.value.getDate()==s.getDate()){addClass(a,"eos-calendar-editor-today");a.onmouseover=null;a.onmouseout=null}var r=CalendarEditor.value;if(a.value.getYear()==r.getYear()&&a.value.getMonth()==r.getMonth()&&a.value.getDate()==r.getDate()){addClass(a,"eos-calendar-editor-currday");CalendarEditor.currCell=a;a.onmouseover=null;a.onmouseout=null}else{removeClass(a,"eos-calendar-editor-currday")}var v=false;if(j!=null){if(a.value-j>0){v=true}}if(f!=null){var w=CalendarEditor.refreshTime(a.value);if(w-f<0){v=true}}if(v){a.onclick=null;a.onmouseover=null;a.onmouseout=null;a.title=""}}}};function createTimeSelect(b){var a=new TimeSelect(b);return a}function f_check_calendar(b){if(b.id){var c=b.id;if(c.indexOf("_input")>0){c=c.replace("_input","");var a=$id(c);if(a){return a.validate()}}}return true};function LookUp(a){this.id=a;PageControl.add(a,this);this.value=null;this.lookupBtn=null;this.lookupText=null;this.lookupUrl=null;this.lookupParam=null;this.lookupHidden=null;this.width=300;this.height=200;this.left=null;this.top=null;this.center=true;this.buttonImg=null;this.params=[];this.displayValue=null;this.container=null;this.onReturnFunc=null;this.useIeModel=false;this.dialogTitle=null;this.disabled=false;this.allowInput=true;this.readOnly=false}LookUp.prototype.init=function(){this.container=$id(this.id+"_container");this.lookupHidden=$id(this.id+"_hidden");this.lookupText=$id(this.id+"_input");this.lookupBtn=$id(this.id+"_button");this.lookupBtn.style.height="20px";this.button=this.lookupBtn;this.text=this.lookupText;this.hidden=this.lookupHidden;if(this.lookupWidth!=null){this.text.style.width=this.lookupWidth}var b=this;this.lookupBtn.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button.gif";this.lookupBtn.onmouseover=function(){if(b.getDisabled()||b.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button_over.gif"};this.lookupBtn.onmouseout=function(){if(b.getDisabled()||b.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button.gif"};this.lookupBtn.onmousedown=function(){if(b.getDisabled()||b.getReadOnly()){return}this.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button_down.gif"};this.lookupBtn.onmouseup=function(){if(b.getDisabled()||b.getReadOnly()){return}b.lookupBtn.src=contextPath+"/common/skins/skin0/images/lookup/lookup_button.gif";b.show()};function a(){if(!b.lookupText.readOnly&&(b.lookupText.value!=b.displayValue)){b.displayValue=b.lookupText.value;b.value=b.lookupText.value;b.lookupHidden.value=b.value}}this.setReadOnly(this.readOnly);this.setDisabled(this.disabled);eventManager.add(this.lookupText,"keyup",a)};LookUp.prototype.setReadOnly=function(a){this.readOnly=a;this.lookupText.readOnly=a||!this.allowInput;this.lookupBtn.style.cursor=a?"default":"pointer"};LookUp.prototype.getReadOnly=function(){return this.readOnly};LookUp.prototype.getValue=function(){this.refreshValue();return this.value};LookUp.prototype.setValue=function(a){if(a!==this.value){this.displayValue=a}this.value=a;this.refreshInput()};LookUp.prototype.setDisplayValue=function(a){this.displayValue=a;this.refreshInput()};LookUp.prototype.setFocus=function(){};LookUp.prototype.lostFocus=function(){};LookUp.prototype.show=function(){var lookup=this;if(this.disabled){return}if(lookup.beforeOpenDialog){if(lookup.beforeOpenDialog(lookup)===false){return}}this.refreshValue();var urlStr=this.getParamURL();var argument=[this.value,this.displayValue];function callBack(returnValue){try{if(lookup.onReturnFunc){var func=lookup.onReturnFunc;if((typeof lookup.onReturnFunc)=="string"){func=eval(lookup.onReturnFunc)}if(func(returnValue)!==false){lookup.value=returnValue[0];lookup.displayValue=returnValue[1]}}else{lookup.value=returnValue[0];lookup.displayValue=returnValue[1]}}catch(e){$handle(e);$error("returnValue of dialog is not a array")}lookup.refreshInput()}if(this.useIeModel){var retValue=window.showModalDialog(urlStr,argument,"width:"+this.width+";height:"+this.height+";left:"+this.left+";top:"+this.top+";");callBack(retValue)}else{showModal(urlStr,argument,callBack,this.width,this.height,this.left||"",this.top||"",this.dialogTitle)}};LookUp.prototype.refreshInput=function(){var a=this.displayValue!==null&&this.displayValue!==undefined?this.displayValue:this.value;this.lookupHidden.value=this.value;this.lookupText.value=a};LookUp.prototype.refreshValue=function(){this.value=this.lookupHidden.value;this.displayValue=this.lookupText.value};LookUp.prototype.getParamURL=function(){var a="";for(var b=0;b<this.params.length;b++){var d=this.params[b];a+="&"+d.key+"="+d.value}var c=addContextPath(this.lookupUrl);if(c.indexOf("?")>-1){c+=a}else{c+="?"+a.replace("&","")}return c};LookUp.prototype.addParam=function(a,b){this.params.push({key:a,value:encodeURIComponent(b)})};LookUp.prototype.clearParam=function(){this.params=[]};LookUp.prototype.setDisabled=function(a){this.disabled=a;if(a){this.lookupText.disabled=true;this.lookupHidden.disabled=true;this.lookupBtn.style.cursor="default"}else{this.lookupText.disabled=false;this.lookupHidden.disabled=false;this.lookupBtn.style.cursor="pointer"}};LookUp.prototype.getDisabled=function(){return this.disabled};LookUp.prototype.setPosition=function(d,b,c,a){if(this.container){this.container.style.display="";this.container.style.position="absolute";this.container.style.left=d;this.container.style.top=b;var e=getMaxZindex(document);if(this.container.style.zIndex!=e){this.container.style.zIndex=e}this.lookupText.style.width=c-17;this.lookupText.style.height=a;this.lookupText.style.position="absolute";this.lookupText.style.top="0px";this.lookupText.style.left="0px";this.container.style.width=c;this.container.style.height=a;this.lookupBtn.style.height=a;this.lookupBtn.style.position="absolute";this.lookupBtn.style.left=this.lookupText.style.width}};LookUp.prototype.hideEditor=function(){this.container.style.display="none";this.lookupBtn.style.display="none"};LookUp.prototype.showEditor=function(){this.container.style.display="";this.lookupBtn.style.display=""};LookUp.prototype.validate=function(){return true};LookUp.prototype.isFocus=function(){return false};LookUp.prototype.getDisplayValue=function(a){if(a==this.value){return this.displayValue}return a};function MultiBox(d){this.id=d;this.value=null;this.container=$id(this.id+"_container");this.checkboxes=[];var c=this.container.getElementsByTagName("input");for(var b=0;b<c.length;b++){var a=c[b];if(a.type=="checkbox"){this.checkboxes.push(a)}}this.hiddenInput=null;this.splitChar=",";this.jsonObj=null;PageControl.add(d,this)}MultiBox.prototype.init=function(){this.hiddenInput=$id(this.id+"_hidden");this.initEvent()};MultiBox.prototype.initEvent=function(){var e=this;function b(){e.refreshValue()}function a(){var k=eventManager.getEvent();var g=k.keyCode;if(!(g==37||g==39)){return}var j=e.checkboxes;for(var f=0;f<j.length;f++){var h=j[f];if((isIE?document.activeElement:k.explicitOriginalTarget)==h&&h.type=="checkbox"){if(g==37){if(f==0){j[j.length-1].focus()}else{j[f-1].focus()}}if(g==39){if(f==j.length-1){j[0].focus()}else{j[f+1].focus()}}break}}}for(var c=0;c<this.checkboxes.length;c++){var d=this.checkboxes[c];eventManager.add(d,"click",b)}eventManager.add(this.container,"keyup",a)};MultiBox.prototype.refreshInput=function(){if(this.hiddenInput){this.hiddenInput.value=this.value}str=this.splitChar+this.value+this.splitChar;for(var a=0;a<this.checkboxes.length;a++){var c=this.checkboxes[a];var b=this.splitChar+c.value+this.splitChar;if(str.indexOf(b)>-1){c.checked=true}else{c.checked=false}}};MultiBox.prototype.refreshValue=function(){var c="";for(var a=0;a<this.checkboxes.length;a++){var b=this.checkboxes[a];if(b.checked&&b.type=="checkbox"){c+=b.value+this.splitChar}}if(c.length>1){c=c.substr(0,c.length-1)}this.value=c;if(this.hiddenInput){this.hiddenInput.value=c}};MultiBox.prototype.setValue=function(a){this.value=a;this.refreshInput()};MultiBox.prototype.getValue=function(){this.refreshValue();return this.value};MultiBox.prototype.setFocus=function(){this.checkboxes[0].focus()};MultiBox.prototype.lostFocus=function(){};MultiBox.prototype.showEditor=function(){var b=getMaxZindex();this.container.style.zIndex=b;this.container.style.display="";addClass(this.container.firstChild,"dict_comp");if(this.isDcEdit==true){var a=this.container.firstChild;a.style.width=a.firstChild.offsetWidth;initShadow(a)}this.setFocus()};MultiBox.prototype.hideEditor=function(){this.container.style.display="none"};MultiBox.prototype.setPosition=function(d,c,b,a){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=d+"px";this.container.style.top=c+"px"};MultiBox.prototype.isFocus=function(){return true};MultiBox.prototype.validate=function(){return true};EOS_DICT_DISPLAY_SEPERATOR=null;MultiBox.prototype.getDisplayValue=function(d){if(d==null){d=this.getValue()}var c;if(EOS_DICT_DISPLAY_SEPERATOR){c=EOS_DICT_DISPLAY_SEPERATOR}else{c=this.splitChar}var a=d.split(c);var e="";var f=[];for(var b=0;b<a.length;b++){f.push(this.jsonObj[a[b]]||a[b])}e=f.join(c);return e};function MultiSelect(a){this.id=a;this.container=$id(this.id+"_container");this.container.onmousedown=function(){eventManager.stopPropagation()};this.value=null;this.select=$id(this.id+"_select");this.hiddenInput=null;this.splitChar=",";this.jsonObj=null;PageControl.add(a,this)}MultiSelect.prototype.init=function(){this.hiddenInput=$id(this.id+"_hidden");this.initEvent()};MultiSelect.prototype.initEvent=function(){var a=this;function b(){a.refreshValue()}eventManager.add(this.select,"change",b)};MultiSelect.prototype.refreshInput=function(){str=this.value+this.splitChar;if(this.hiddenInput){this.hiddenInput.value=this.value}for(var a=0;a<this.select.options.length;a++){var b=this.select.options[a];var c=b.value+this.splitChar;if(str.indexOf(c)>-1){b.selected=true}else{b.selected=false}}};MultiSelect.prototype.refreshValue=function(){var b=[];var d=this.select.options;for(var c=0,a=d.length;c<a;c++){var e=d[c];if(e.selected){b.push(e.value)}}this.value=b.join(this.splitChar);if(this.hiddenInput){this.hiddenInput.value=str}};MultiSelect.prototype.setValue=function(a){this.hiddenInput.value=a;this.refreshInput()};MultiSelect.prototype.getValue=function(){this.refreshValue();return this.value};MultiSelect.prototype.setFocus=function(){};MultiSelect.prototype.lostFocus=function(){};MultiSelect.prototype.showEditor=function(){var a=getMaxZindex();this.container.style.zIndex=a;this.container.style.display=""};MultiSelect.prototype.hideEditor=function(){this.container.style.display="none"};MultiSelect.prototype.setPosition=function(d,c,b,a){this.container.style.position="absolute";this.container.zIndex=9999;this.container.style.left=d+"px";this.container.style.top=c+"px";this.container.style.width=b+"px"};MultiSelect.prototype.isFocus=function(){return true};MultiSelect.prototype.validate=function(){return true};EOS_DICT_DISPLAY_SEPERATOR=null;MultiSelect.prototype.getDisplayValue=function(e){if(e==null){e=this.getValue()}if(e===""){return""}var d;if(EOS_DICT_DISPLAY_SEPERATOR){d=EOS_DICT_DISPLAY_SEPERATOR}else{d=this.splitChar}var b=e.split(d);var f=[];for(var c=0,a=b.length;c<a;c++){f.push(this.jsonObj[b[c]]||b[c])}return f.join(d)};function PopMenu(a){this.id=a;PageControl.add(a,this);this.container=null;this.subMenuContainer=null;this.submenu=[];this.canClose=true;this.currMenu=null;this.level=0;this.openLevel=[];this.menuContainer=null;this.doc=document;this.win=window;this.onClickFunc=null;this.args=null;this.isShow=false}PopMenu.prototype.lazyInit=function(){this.win=_get_top_window()||window;_this=this;this.win.EOS.use("eos-popmenu",function(){this.init()},_this)};PopMenu.prototype.init=function(){this.win=_get_top_window()||window;this.doc=this.win.document;var d=getDocumentId(document);this.container=$id(this.id+d+"_container",this.doc);if(!this.container){this.container=$create("<div id='"+this.id+d+"_container' style='width:164px;overflow:hidden;position:absolute;display:none'></div>",this.doc);this.doc.body.appendChild(this.container)}this.container.style.width="164px";this.container.style.overflow="hidden";var g=getMaxZindex(this.win.document);this.container.style.zIndex=g+1;var f=$create("div",this.doc);this.menuContainer=$create("div",this.doc);if(isIE&&!isIE10){this.menuContainer.innerHTML='<iframe src="'+blankURL+'" style="position:absolute;z-index:'+this.zIndex+';width:expression(this.nextSibling.childNodes[0].offsetWidth);height:expression(this.nextSibling.childNodes[0].offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);" frameborder="0" ></iframe>'}this.menuContainer.appendChild(this.container);var c=$create("ul",this.doc);var b=$create("div",this.doc);this.shadowdiv=b;c.className="eos-popmenu-list";this.container.appendChild(b);b.appendChild(c);b.className="eos-popmenu";f.appendChild(this.menuContainer);this.doc.body.appendChild(f);f.style.zIndex=g+1;for(var a=0;a<this.submenu.length;a++){var e=this.submenu[a];c.appendChild(e.container);e.container.style.zIndex=g+1;e.zIndex=g+1;e.root=this;e.level=this.level+1;e.init()}this.initEvent();this.openLevel[0]=this};PopMenu.prototype.appendChild=function(a){this.submenu.push(a);a.parent=this};PopMenu.prototype.initEvent=function(){var b=this;function a(){b.hide(true)}};PopMenu.prototype.addObject=function(a){if(!a){return}var b=this};PopMenu.prototype.show=function(){PageControl.setFocus(this);this.container.style.display="";this.isShow=true;if(this.isShadowInit!=true){if(isFF){initShadow(this.shadowdiv,this.doc);this.shadowdiv.style.width=this.shadowdiv.parentNode.offsetWidth-7}else{initShadowIe(this.shadowdiv,this.doc)}this.isShadowInit=true}};PopMenu.prototype.setPosition=function(a,b){this.container.style.left=a+"px";this.container.style.top=b+"px"};PopMenu.prototype.hide=function(c){if(this.canClose||c){for(var a=0;a<this.submenu.length;a++){var b=this.submenu[a];b.hide(c)}if(this.container&&this.container.style){this.container.style.display="none";this.isShow=false;return true}return false}else{return false}};PopMenu.prototype.openByLevel=function(c){$debug(c);for(var a=0;a<this.openLevel.length;a++){var b=this.openLevel[a];if(!b){continue}if(a<=c){b.show()}else{b.hide(true)}}};function PopMenuItem(a){this.id=a;PageControl.add(a,this);this.parent=null;this.submemu=[];this.win=_get_top_window()||window;this.doc=this.win.document;this.container=$create("li",this.doc);this.subMenuContainer=null;this.url=null;this.name=null;this.seperator=false;this.params=[];this.icon=null;this.canClose=true;this.currMenu=null;this.level=0;this.root=null;this.onClickFunc=null;this.menuKey=null;this.onRefreshFunc=null;this.zIndex=0}PopMenuItem.prototype.init=function(){if(this.seperator){var a="<span></span>";this.container.className="eos-popmenu-line";this.container.innerHTML=a;if(isIE){this.container.style.height="2px"}else{this.container.style.height="1px"}}else{this.initContainer();this.initEvent();this.initSubMenu()}};PopMenuItem.prototype.initSubMenu=function(){if(this.hasChild()){var e=$create("div",this.doc);this.subMenuContainer=$create("div",this.doc);this.subMenuContainer.style.width="164px";this.subMenuContainer.style.overflow="hidden";if(isIE&&!isIE10){e.innerHTML='<iframe src="'+blankURL+'" style="position:absolute;z-index:'+this.zIndex+';width:expression(this.nextSibling.childNodes[0].offsetWidth);height:expression(this.nextSibling.childNodes[0].offsetHeight);top:expression(this.nextSibling.offsetTop);left:expression(this.nextSibling.offsetLeft);" frameborder="0" ></iframe>'}e.appendChild(this.subMenuContainer);this.subMenuContainer.style.display="none";this.subMenuContainer.style.position="absolute";this.subMenuContainer.style.zIndex=parseInt(this.zIndex)+1;var c=$create("ul",this.doc);var b=$create("div",this.doc);c.className="eos-popmenu-list";this.shadowdiv=b;this.subMenuContainer.appendChild(b);b.appendChild(c);for(var a=0;a<this.submemu.length;a++){var d=this.submemu[a];d.root=this.root;d.level=this.level+1;d.container.style.zIndex=parseInt(this.zIndex)+1;d.zIndex=this.zIndex+1;d.init();c.appendChild(d.container)}this.root.menuContainer.appendChild(e);b.className="eos-popmenu"}};PopMenuItem.prototype.initContainer=function(){var b=$create("a",this.doc);b.className="eos-popmenu-item";b.hidefocus=true;b.unselectable="on";b.href="#";this.container.appendChild(b);b.innerHTML=this.getNomalDiv();this.container.className="eos-popmenu-list-item"};PopMenuItem.prototype.getNomalDiv=function(){var c="";c+='<table cellpadding="0" cellspacing="0" style="width: 100%;height:25px;background-color:transparent;border-style:none;border:-width:0px">';c+="    <tr>";c+='    <td  class="overLeft" style="width: 5px;height:25px;"></td>';c+='        <td  class="overCenter"style="width: 20px;height:25px;">';c+='            <div style="width: 20px;height:25px;overflow:hidden;background-color:transparent;border-style:none;border:-width:0px">';this.icon=this.icon?addContextPath(this.icon):PICTURE_BLANK;c+="<img border='0' width='16px' height='20px' src='"+this.icon+"'>";c+="            </div>";c+="        </td>";c+='        <td class="overCenter" style="padding-left:10px;height:25px;background-color:transparent;border-style:none;border:-width:0px">';var b=this.getContent();if(!b||b==null||b=="null"){b=""}c+="           <div>"+b+"</div>";c+="        </td>";c+='        <td class="overCenter" align="right" style="padding-right:10px;height:25px;background-color:transparent;border-style:none;border:-width:0px">';var a=PICTURE_BLANK;if(this.hasChild()){a=POPMENU_ARROW_RIGHT}c+="<img border='0' src='"+a+"'></td>";c+='    <td  class="overRight" style="width: 5px;height:25px;"></td></tr></table>';return c};PopMenuItem.prototype.getContent=function(){if(this.onRefreshFunc){try{return eval(this.onRefreshFunc+"(this);")}catch(e){alert(e);return this.name}}var url=this.getURL();if(url){if(this.target){return"<a href='"+url+"' target='"+this.target+"'>"+this.name+"</a>"}else{return"<a href='"+url+"'>"+this.name+"</a>"}}else{return this.name}};PopMenuItem.prototype.initEvent=function(){var a=this;function b(){a.hide()}function d(){a.parent.canClose=true;var e=a.parent.currMenu;if(e&&e!=a){a.parent.currMenu.hide(true)}var e=a.root.openLevel[a.level];if(e&&e!=a){e.hide(true)}}function c(){var e=a.parent.currMenu;if(e&&e!=a){a.parent.currMenu.hide(true)}var e=a.root.openLevel[a.level];if(e&&e!=a){e.hide(true)}if(a.root.isShow){a.root.openLevel[a.level]=a;a.root.openByLevel(a.level);a.parent.canClose=false;a.parent.currMenu=a}return false}this.container.onmouseover=function(){eventManager.stopEvent();c();return false};this.container.onmouseout=function(){eventManager.stopEvent();d();a.root.openLevel[a.level]=null;return false};this.container.onclick=function(){eventManager.stopEvent();a.root.hide(true);a.onClick();return false}};PopMenuItem.prototype.getURL=function(){if(this.url){var c="";for(var a=0;a<this.params.length;a++){var b=this.params[a];c+="&"+b.key+"="+b.value}if(this.url.indexOf("?")<0){if(c.length>0){c="?"+c}c=c.replace("&","")}return this.url+c}return null};PopMenuItem.prototype.addParam=function(a,b){this.params.push({key:a,value:b})};PopMenuItem.prototype.hasChild=function(){return this.submemu.length!=0};PopMenuItem.prototype.appendChild=function(a){this.submemu.push(a);a.parent=this};PopMenuItem.prototype.showSubMenu=function(){if(this.hasChild()){var f=getPosition(this.container);this.subMenuContainer.style.left=(f.left-3+this.container.offsetWidth)+"px";this.subMenuContainer.style.top=f.top+"px";this.subMenuContainer.style.display="";if(this.subMenuContainer.offsetWidth<this.subMenuContainer.scrollWidth){this.subMenuContainer.style.width=this.subMenuContainer.scrollWidth+"px"}var a=getPosition(this.subMenuContainer);var c=this.doc||document;var b=a.left+this.subMenuContainer.offsetWidth;var e=c.body.clientWidth;if(b>e){var d=f.left-this.subMenuContainer.offsetWidth;if(d<0){d=0}this.subMenuContainer.style.left=d+"px"}if(this.isShadowInit!=true){if(isFF){initShadow(this.shadowdiv,this.doc);$debug(this.shadowdiv.parentNode.offsetWidth);this.shadowdiv.style.width=this.shadowdiv.parentNode.offsetWidth-7}else{initShadowIe(this.shadowdiv,this.doc)}this.isShadowInit=true}}};PopMenuItem.prototype.onClick=function(){var root=this.root;if(this.onClickFunc){try{eval(this.onClickFunc+"(this,root.args)")}catch(e){}}if(root.onClickFunc){try{eval(root.onClickFunc+"(this.menuKey,root.args)")}catch(e){}}};PopMenuItem.prototype.hide=function(c){if(this.canClose||c){if(this.hasChild()){for(var a=0;a<this.submemu.length;a++){var b=this.submemu[a];b.hide(c)}if(this.subMenuContainer&&this.subMenuContainer.style){this.subMenuContainer.style.display="none"}}}};PopMenuItem.prototype.show=function(){this.showSubMenu()};function showPopMenu(e,c){var d=$o(e);if(d){d.args=c;var b=eventManager.getEvent();var a=b.x||b.clientX;var g=b.y||b.clientY;if(isIE){var f=getAbsPos(document.body,d.win);a=a+f.left+d.doc.body.scrollLeft;g=g+f.top+d.doc.body.scrollTop}else{var f=getScreenPos(window,d.win);a=a+f.left;g=g+f.top}if(d.hide(true)){d.show();d.setPosition(a,g)}}}function hideMenu(b){var a=$o(b);if(a){a.hide(true)}}function getDocumentId(d){var a=_get_top_window();if(!a.docs){a.docs=[]}var b=0;for(;b<a.docs.length;b++){try{if(a.docs[b]==d){return b}}catch(c){break}}a.docs.push(d);return a.docs.length-1}PopMenu.prototype.bind=function(b,a){var c=this.id;if(b!=null){b.oncontextmenu=function(){showPopMenu(c,a);return false}}};function initShadowIe(g,f){f=f||document;var e=g.nextSibling;if(e==null||!e.isShadow){var b=g.parentNode;var c=g.offsetWidth;var a=g.offsetHeight;var d=$createElement("div",{doc:f});d.isShadow=true;b.style.width=c;b.style.height=a;d.style.width=c-8;d.style.height=a-8;d.style.position="absolute";d.style.left=0;d.style.top=0;d.style.zIndex=-999;d.style.background="#777";d.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius=4)";b.insertBefore(d,g.nextSibling);g.shadowContainter=d;g.style.width=c-4;g.style.height=a-4}};function RTree(g,d,a,e){var f=new RTreeModel();f.hasRoot=e;var c=new RTreeView(g,f,d,a);f.setNodeExpandAction=_rtreemodel_setNodeExpandAction;f.getNodeExpandAction=_rtreemodel_getNodeExpandAction;f.getExpandRetXpaths=_rtreemodel_getExpandRetXpaths;f.initAttachParam=_rtreemodel_initAttachParam;f.getTreeNodeName=_rtreemodel_getTreeNodeName;f.getTreeNodeIcon=_rtreemodel_getTreeNodeIcon;f.setEntityInfo=_rtreemodel_setEntityInfo;f.getEntityInfo=_rtreemodel_getEntityInfo;f.showNodeMenu=_rtreemodel_showNodeMenu;f.addMenuItem=_rtreemodel_addMenuItem;f.onmenuclick=_rtreemodel_onmenuclick;f.getMovemenu=_rtreemodel_getMovemenu;f.isNodeMovable=_rtreemodel_isNodeMovable;f.moveNode=_rtreemodel_moveNode;f.setMoveAction=_rtreemodel_setMoveAction;f.getMoveAction=_rtreemodel_getMoveAction;f.getMoveParam=_rtreemodel_getMoveParam;f.clearup=_rtreemodel_clearup;f.setExpandInitParamFunc=_rtreemodel_setExpandInitParamFunc;f.setMoveInitParamFunc=_rtreemodel_setMoveInitParamFunc;f.expandRoot=_rtreemodel_expandRoot;f.treeView=c;f.nodeExpandActions=new Object();f.entityInfos=new Object();f.move_node=null;f.moveto_node=null;if(!isIE){var b=$id(g.getAttribute("id")+"_container")}return c}var RTreeModel=function(){};EOS.override(RTreeModel,{dataType:EOS.dataType,getExpandParam:function(b){var g=b.entity.name;var j=this.getEntityInfo(g);var k=j.InitExpandParamFunc;var h=j.submitXpath;var d="";var e;d=fireUserEvent(k,[b]);var f=this.dataType=="json"?"toJson":"toString";if(h==""||h==null){e=b.entity[f]()}else{var a=b.entity.name;b.entity.name=h;e=b.entity[f]();b.entity.name=a}if(this.dataType=="json"){var c={};EOS.apply(c,d);EOS.apply(c,e);return c}else{return"<root><data>"+e+d+"</data></root>"}},renderNode:function(b){var f=b.ds;if(!f){return}var l=f.values;if(!b.isroot){if(l.length==0){b.hasChild=false;b.isleaf=true;b.refreshExpendIcon();b.icon.src=b.openIconSrc;b.childrenContainer.style.display="none";b.loadFinished=true;return}else{b.hasChild=true;b.isleaf=false;b.refreshExpendIcon()}}else{if(l.length!=0){b.hasChild=true;b.isleaf=false}}var a,g,c,n,h,k,d,m,e;for(var j=0;j<l.length;j++){var h=j===0?true:false;var k=j===l.length-1?true:false;g=l[j];c=this.getTreeNodeName(g);n=this.getTreeNodeIcon(g.name);e=this.getEntityInfo(g.name).iconType;d=!!(this.getEntityInfo(g.name)).expandAction;a=new RTreeNode(b,c,n,g,h,k,d,this.hasRoot,e);m=this.getEntityInfo(g.name).preload;b.childrenContainer.appendChild(a);if(d&&m){this.preLoad(a,function(o){if(!o.getLength()){a.setLeaf()}})}a.refresh()}b.childrenContainer.style.display="";b.icon.src=b.openIconSrc;b.loadFinished=true},loadNodeChild:function(b,a){var c=this;this.loadNode(b,function(e,d){c.renderNode(d);if(a){a(d)}})},loadNode:function(a,c){if(a.isloadData){c(a,a.dataset)}var d=this.getNodeExpandAction(a);var b=this.getExpandParam(a);var e=this.getExpandRetXpaths(a);if(!(d&&e)){a.icon.src=a.openIconSrc;a.loadFinished=true;return}var g=new HideSubmit(d);var h=a.entity.name;var j=this.getEntityInfo(h);if(j.queryReturnValue){g.setOutParam(j.queryReturnValue)}if(j.queryParamsInfo){g.setParamsInfo(j.queryParamsInfo)}if(j.queryInoutParams){g.setInoutParam(j.queryInoutParams)}var f=this;g.onSuccess=function(){var q=null;if(this.dataType=="json"){var o=j.childEntityXpaths;var m=g.retJson;var l;for(var n=0,k=o.length;n<k;n++){l=m[o[n]];if(l){var p=Json2Dataset(l,o[n]);if(q){q.appendDataset(p)}else{q=p}}}q=q||new Dataset()}else{var r=g.getXMLDom();var q=Dataset.create(r,"root/data/"+e[0]);for(var n=1;n<e.length;n++){q.appendDataset(Dataset.create(r,"root/data/"+e[n]))}}a.ds=q;c(q,a)};g.setDataType(this.dataType);g.submitXML(b)},preLoad:function(b,a){this.loadNode(b,function(c){a(c,b)})},clearup:function(){for(var a in this){this[a]=undefined}}});function _rtreemodel_expandRoot(){var a=new RTreeRootNode(new Entity("root"),this);a.level=0;this.treeView.rootNode=a;this.treeView.appendChild(a);this.loadNodeChild(a)}function _rtreemodel_setNodeExpandAction(b,a,d){var c=this.getEntityInfo(b);c.expandAction=a;c.childEntityXpaths=d}function _rtreemodel_setExpandInitParamFunc(b,a){var c=this.getEntityInfo(b);c.InitExpandParamFunc=a}function _rtreemodel_setMoveInitParamFunc(b,a){var c=this.getEntityInfo(b);c.InitMoveParamFunc=a}function _rtreemodel_getNodeExpandAction(b){var a=b.entity.name;var c=this.getEntityInfo(a);return c.expandAction}function _rtreemodel_getExpandRetXpaths(b){var a=b.entity.name;var c=this.getEntityInfo(a);return c.childEntityXpaths}function _rtreemodel_getExpandParam(f){var e=f.entity.name;var h=this.getEntityInfo(e);var d=h.InitExpandParamFunc;var b=h.submitXpath;var c="";var g;c=fireUserEvent(d,[f]);if(b==""||b==null){g=f.entity.toString()}else{var a=f.entity.name;f.entity.name=b;g=f.entity.toString();f.entity.name=a}return"<root><data>"+g+c+"</data></root>"}function _rtreemodel_initAttachParam(a){if(a&&isUserEventDefined(a)){return fireUserEvent(a,[])}else{return""}}function _rtreemodel_getTreeNodeName(a){var b=a.name;var e=this.getEntityInfo(b);var d=e.expression;var c=a.getProperty(d);if(c==null){return d}else{return c}}function _rtreemodel_getTreeNodeIcon(a){var b=this.getEntityInfo(a);return b.iconSrc}function _rtreemodel_getEntityInfo(entityName){entityName=entityName.toLowerCase();var entityInfos=this.entityInfos;var _entityInfo;eval("_entityInfo = entityInfos."+entityName);if(!_entityInfo){_entityInfo=new _rtree_EntityInfo();eval("entityInfos."+entityName+"=_entityInfo;")}return _entityInfo}function _rtreemodel_setEntityInfo(j,a,q,o,n,e,b,g,l,p,k,h,c,f,d){j=j.toLowerCase();var m=this.getEntityInfo(j);m.expression=a;m.iconSrc=q;m.onrefresh=n;m.onclick=o;m.ondblclick=e;m.InitExpandParamFunc=g;m.childEntityXpaths=l;m.expandAction=p;m.iconType=b;m.submitXpath=k;m.preload=h;m.queryReturnValue=c;m.queryParamsInfo=f;m.queryInoutParams=d}function _rtreemodel_setMoveAction(moveEntity,toEntity,bizAction,InitParamFunc,moveReturnValue,moveParamsInfo,moveInoutParams){var moveActions=this.getEntityInfo(moveEntity).moveActions;var index;eval("index = moveActions."+toEntity+";");if(!index){index=moveActions.length;eval("moveActions."+toEntity+" = index;")}var moveObj=new Object();moveObj.action=bizAction;moveObj.InitParamFunc=InitParamFunc;moveObj.moveReturnValue=moveReturnValue;moveObj.moveParamsInfo=moveParamsInfo;moveObj.moveInoutParams=moveInoutParams;moveActions[index]=moveObj}function _rtreemodel_isNodeMovable(b){var c=b.entity.name;var d=this.getEntityInfo(c);var a=d.moveActions;if(a.length>0){return true}else{return false}}function _rtreemodel_moveNode(){if(isCanMoveTo(document.moveModel,document.movetoModel)==false){return}var b=this.move_node;var k=document.movetoModel.moveto_node;this.move_node=null;this.moveto_node=null;this.move_menu.hide();var m=b.getParent();var n=this.getMoveAction(b,k);if(n){var f=b.getTree().beforeMove;if(f){if(f(b,k)==false){return}}var d=this.getMoveParam(b,k);var g=new HideSubmit(n);var h=b.entity.name;var j=this.getEntityInfo(h);if(j.queryReturnValue){g.setOutParam(j.queryReturnValue)}if(j.queryParamsInfo){g.setParamsInfo(j.queryParamsInfo)}if(j.queryInoutParams){g.setInoutParam(j.queryInoutParams)}g.submitXML(d);var l=b.getTree();var c=l.afterMove;if(c){if(l.afterMove(g)==false){return}}var e;var a;e=!b.getParent().isChildOf(k);a=!k.isChildOf(b.getParent());if(e){b.getParent().reloadChild()}if(a){k.reloadChild()}}}function _rtreemodel_getMoveAction(move_node,moveto_node){var toTreeId=findRTree(moveto_node).id;var entityName=move_node.entity.name;var toEntityName=moveto_node.entity.name;var entityInfo=this.getEntityInfo(entityName);var moveActions=entityInfo.moveActions;var index;eval("index = moveActions."+toTreeId+"_"+toEntityName+";");if(typeof(index)!="undefined"){return moveActions[index].action}else{return null}}function _rtreemodel_getMoveParam(move_node,moveto_node){var toTreeId=findRTree(moveto_node).id;var entityName=move_node.entity.name;var toEntityName=moveto_node.entity.name;var entityInfo=this.getEntityInfo(entityName);var InitParamFunc="";var moveActions=entityInfo.moveActions;var index;eval("index = moveActions."+toTreeId+"_"+toEntityName+";");if(typeof(index)!="undefined"){InitParamFunc=moveActions[index].InitParamFunc}var from_node=move_node.getParent();var FuncParam="";FuncParam=fireUserEvent(InitParamFunc,[move_node,moveto_node]);var fromNodeName=from_node.entity.name;var movetoNodeName=moveto_node.entity.name;from_node.entity.name="from";moveto_node.entity.name="to";var returnValue="<root><data>"+FuncParam+this.initParam+from_node.entity+moveto_node.entity+move_node.entity+"</data></root>";from_node.entity.name=fromNodeName;moveto_node.entity.name=movetoNodeName;return returnValue}function _rtreemodel_clearup(){var a=this;a.setNodeExpandAction=null;a.getNodeExpandAction=null;a.getExpandRetXpaths=null;a.getExpandParam=null;a.loadNodeChild=null;a.initAttachParam=null;a.getTreeNodeName=null;a.getTreeNodeIcon=null;a.setEntityInfo=null;a.getEntityInfo=null;a.showNodeMenu=null;a.addMenuItem=null;a.onmenuclick=null;a.getMovemenu=null;a.isNodeMovable=null;a.moveNode=null;a.setMoveAction=null;a.getMoveAction=null;a.getMoveParam=null;a.clearup=null;a.treeView=null;a.attachParam=null;a.nodeExpandActions=null;a.entityInfos=null;a.initParam=null;a.menu=null;a.move_node=null;a.moveto_node=null;a.move_menu=null}function _rtree_EntityInfo(){this.expandAction=null;this.moveActions=new Array();this.childEntityXpaths=[];this.expression="";this.iconSrc="";this.onrefresh="";this.onclick="";this.ondblclick="";this.menuItems=new Array();this.InitMoveParamFunc=null;this.InitExpaneParamFunc=null;this.submitXpath="";return this}function _rtreemodel_addMenuItem(c,b,a){var d=this.getEntityInfo(c);d.menuItems.push(new EOSTreeMenuItem(b,a))}function _rtreemodel_showNodeMenu(f){var a=f.getTree();if(a.beforeShowMenu&&a.beforeShowMenu(f)===false){return}var e=f.entity.name;var g=this.getEntityInfo(e);var d=g.menuItems;if(d.length>0){for(var c=0;c<d.length;c++){if(c!=0){var b=_get_top_window();var h=b.document.createElement("div");h.className="rtree-popmenu-item-line";this.menu.insertItem(h)}this.menu.insertItem(d[c])}a.afterShowMenu&&a.afterShowMenu(f,this.menu);this.menu.show()}}function _rtreemodel_onmenuclick(a){fireUserEvent(a,[this.treeView.cur_node])}function _rtreemodel_getMovemenu(b){if(isIE){if(b.icon){this.move_menu.nodeView.innerHTML=b.icon.outerHTML+b.cell.outerHTML}else{this.move_menu.nodeView.innerHTML=b.cell.outerHTML}var a=this.move_menu.nodeView.getElementsByTagName("span");addClass(a[0],"RC_TREE_CELL");removeClass(a[0],"RC_TREE_ACTIVENODE")}else{if(b.icon){this.move_menu.nodeView.innerHTML="<img style='vertical-align:bottom'src='"+b.icon.src+"'>"+b.cell.innerHTML}else{this.move_menu.nodeView.innerHTML=b.cell.innerHTML}addClass(this.move_menu.nodeView,"RC_TREE_CELL")}this.move_menu.style.display="";this.move_menu.container.style.width=1;this.move_menu.style.width=1;initShadow(this.move_menu.container);if(!isIE){this.move_menu.container.nextSibling.style.zIndex="999";this.move_menu.container.nextSibling.style.width=this.move_menu.offsetWidth+5}this.move_menu.style.display="none";return this.move_menu}function RTreeView(g,c,e,a){var d=g;var b=$id(g.getAttribute("id")+"_container");if(!isIE&&a=="100%"){var f=b;while(true){if(f==null){break}if(f.tagName=="TABLE"&&f.getAttribute("class")=="eos-panel-table"){if(f.getAttribute("height")!=null){b.style.height=a}break}f=f.offsetParent}}else{a=a||b.parentNode.style.height;b.style.height=a}b.style.width=e;d.style.overflow="auto";d.style.width=e;d.style.height=a;d.className="RC_TREE";d.setAttribute("richclientType","RTREE");d.findTreeNode=_rtreeview_findTreeNode;d.expandLevel=_rree_expand_level;d.getRootNode=function(){return this.rootNode};d.getSelectNode=_rree_getSelectNode;d.moveNode=_rtree_move;d.clearup=_rtreeview_clearup;d.model=c;d.cur_node=null;d.onselectstart=function(){return false};d.onselect=function(){return false};d.onmouseup=_rtreeview_onmouseup;d.onmousemove=_rtreeview_onmousemove;d.onmouseout=_rtreeview_onmouseout;d.onkeydown=_rtreeview_onkeydown;d.setMenuStyle=function(h,j){this.model.menu.style[h]=j};d.autoResizeS1=_rree_auto_resize_step1;d.autoResizeS2=_rree_auto_resize_step2;EOS.apply(d,{isInCurrPanel:function(){if(_eos_curr_open_panel!=null){var h=$id(this.getAttribute("id")+"_container").offsetParent;while(true){if(h==null){return false}if(h==_eos_curr_open_panel.table){return true}h=h.offsetParent}}else{return false}},init:function(){var h=this.model;h.menu=new EOSTreeMenu(h);EOSTreeMenu.register(h.menu);h.move_menu=new RTreeMoveMenu();h.expandRoot()}});return d}EOS.override(RTreeView,{});function _rtreeview_findTreeNode(b,e,d){function c(h,j,n,l){var k=h.entity.name;if(k==j){var o=h.entity.getProperty(n);if(o&&(o==l)){return h}}var f=h.getChildren();var m;for(var g=0;g<f.length;g++){m=c(f[g],j,n,l);if(m){return m}}return null}var a=this.rootNode;return c(a,b,e,d)}function _rree_getSelectNode(){return this.cur_node}function _rtree_move(b,j){var l=b.getTree();var k=l.model.getMoveAction(b,j);if(k){var d=l.model.getMoveParam(b,j);var f=new HideSubmit(k);var g=b.entity.name;var h=l.model.getEntityInfo(g);if(h.queryReturnValue){f.setOutParam(h.queryReturnValue)}if(h.queryParamsInfo){f.setParamsInfo(h.queryParamsInfo)}if(this.queryInoutParams){f.setInoutParam(h.queryInoutParams)}f.submitXML(d);var c=l.afterMove;if(c){if(l.afterMove(f)==false){return}}var e;var a;e=!b.getParent().isChildOf(j);a=!j.isChildOf(b.getParent());if(e){b.getParent().reloadChild()}if(a){j.reloadChild()}}}function _rtreeview_clearup(){this.rootNode.clearup();this.model.clearup()}function _rtreeview_onmouseout(){if(!__isStartDrag()){return}if(this.cur_node){this.cur_node.cell.className="RC_TREE_CELL";document.movetoModel=null}}function _rtreeview_onmouseup(){}var doc_onmousemove=null;var doc_onmouseup=null;var doc_onmouseout=null;function _rtreeview_onmousemove(){var a=document.moveModel;if(!__isStartDrag()){return}var b=a.move_menu}function _rtreeview_onkeydown(){function e(g){if(g){sibling=g.nextSibling;if(sibling){return sibling}else{return e(g.getParent())}}else{return null}}function d(j){if(!j){return null}var g=j.getChildren();var h=g.length;if(j.isExpanded()&&(h>0)){return d(g[h-1])}else{return j}}var c=eventManager.getEvent();eventManager.stopPropagation();var b=this;var f=b.cur_node;if(!f){return}switch(c.keyCode){case 40:if(f.getChildren()[0]&&f.isExpanded()){f.getChildren()[0].selected()}else{var a=e(f);if(a){a.selected()}}b.cur_node.scrollIntoView();break;case 38:if(f.previousSibling){var a=d(f.previousSibling);if(a){a.selected()}}else{if(f.getParent()){f.getParent().selected()}}b.cur_node.scrollIntoView();break;case 37:if(f.isExpanded()){f.collapseNode()}else{if(f.getParent()){f.getParent().selected()}}b.cur_node.scrollIntoView();break;case 39:if(!f.isExpanded()){f.expandNode()}else{if(f.getChildren()[0]){f.getChildren()[0].selected()}}b.cur_node.scrollIntoView();break}return false}function RTreeNode(g,a,k,f,j,h,c,d,e){var b=document.createElement("DIV");b.noWrap=true;b.openIconSrc=STREE_DEFAULTOPEN_ICON;b.closeIconSrc=STREE_DEFAULTCLOSE_ICON;b.plusIconSrc="";b.minusIconSrc="";b.isFirstNode=j;b.isLastNode=h;b.hasChild=c;b.imgLevel=g.imgLevel;b.isleaf=!c;b.hasRoot=d;_rtreeNode_processNodeStatus(b,f,j,h,d,k,e,a);b.childLoaded=false;b.entity=f;b.isroot=false;b.addChildNode=_rtreeNode_addChildNodes;b.expandNode=_rtreeNode_expandNode;b.collapseNode=_rtreeNode_collapseNode;b.clearChildren=_rtreeNode_clearChildren;b.selected=_rtreeNode_selected;b.select=_rtreeNode_selected;b.refresh=_rtreeNode_refresh;b.refreshExpendIcon=_rtreeNoderefreshExpendIcon;b.isChildOf=_rtreeNode_isChildOf;b.isExpanded=_rtreeNode_isExpanded;b.getParent=_rtreeNode_getParent;b.getChildren=_rtreeNode_getChildren;b.getTree=_rtreeNode_getTree;b.reloadChild=_rtreeNode_reloadChild;b.clearup=_rtreeNode_clearup;b.getProperty=_rtreeNode_getProperty;b.setIcon=_rtreeNode_setIcon;b.setText=_rtreeNode_setText;b.getText=_rtreeNode_getText;b.setLeaf=_rtreeNode_setLeaf;b.isLeaf=_rtreeNode_isLeaf;b.isRootNode=_rtreeNode_isRoot;b.getEntity=_rtreeNode_getEntity;b.hasChildNode=_rtreeNode_hasChildNode;b.onclick=_rtreenode_onclick;b.ondblclick=_rtreenode_ondblclick;b.oncontextmenu=_rtreenode_oncontextmenu;b.onmousedown=_rtreenode_onmousedown;b.onmouseover=_rtreenode_onmouseover;return b}function _rtreeNode_hasChildNode(){return this.hasChild}function _rtreeNode_getEntity(){return this.entity}function _rtreeNode_isRoot(){return this.isroot}function _rtreeNode_isLeaf(){return this.isleaf}function _rtreeNode_getProperty(a){return this.entity.getProperty(a)}function _rtreeNode_setText(a){this.cell.innerHTML=a}function _rtreeNode_getText(){return this.cell.innerHTML}function _rtreeNode_setIcon(a,b){this.openIconSrc=_rtree_addContextPath(a);if(b){this.closeIconSrc=_rtree_addContextPath(b)}else{this.closeIconSrc=this.openIconSrc}if(this.closeIconSrc=="null"){this.icon.style.display="none"}this.icon.src=this.closeIconSrc}function _rtreeNode_setLeaf(){this.isleaf=true;this.hasChild=false;this.childLoaded=true;this.refreshExpendIcon()}function RTreeRootNode(d,e){var c=e.hasRoot;var a=e.getTreeNodeName(d);var l=e.getTreeNodeIcon(d.name);var b=document.createElement("DIV");b.noWrap=true;var g=document.createElement("DIV");var f;f=document.createElement("IMG");if(l=="null"){f.style.display="none"}if(l==""){l=STREE_DEFAULTOPEN_ICON}else{l=_rtree_addContextPath(l)}b.openIconSrc=l;f.src=l;f.style.verticalAlign="middle";f.ondrag=function(){eventManager.stopPropagation();return false};g.appendChild(f);var k=document.createElement("span");k.innerHTML=a;k.className="RC_TREE_CELL";k.style.verticalAlign="middle";g.appendChild(k);var j=document.createElement("IMG");j.style.verticalAlign="middle";j.src=STREE_BLANK_ICON;g.appendChild(j);var h=document.createElement("DIV");b.appendChild(g);b.appendChild(h);if(!c){g.style.display="none"}b.setAttribute("richclientType","RTREENODE");b.expandIcon=new Object();b.icon=f;b.cell=k;b.childLoaded=false;b.entity=d;b.isroot=true;b.isleaf=false;b.level=false;b.childrenContainer=h;b.imgLevel="";b.addChildNode=_rtreeNode_addChildNodes;b.expandNode=_rtreeNode_expandNode;b.collapseNode=_rtreeNode_collapseNode;b.clearChildren=_rtreeNode_clearChildren;b.selected=_rtreeNode_selected;b.select=_rtreeNode_selected;b.refresh=_rtreeNode_refresh;b.isChildOf=_rtreeNode_isChildOf;b.isExpanded=_rtreeNode_isExpanded;b.getParent=_rtreeNode_getParent;b.getChildren=_rtreeNode_getChildren;b.getTree=_rtreeNode_getTree;b.reloadChild=_rtreeNode_reloadChild;b.clearup=_rtreeNode_clearup;b.isRootNode=_rtreeNode_isRoot;b.getEntity=_rtreeNode_getEntity;b.hasChildNode=_rtreeNode_hasChildNode;b.setText=_rtreeNode_setText;b.getText=_rtreeNode_getText;b.onclick=_rtreenode_onclick;b.ondblclick=_rtreenode_ondblclick;b.oncontextmenu=_rtreenode_oncontextmenu;b.onmousedown=_rtreenode_onmousedown;b.onmouseover=_rtreenode_onmouseover;return b}function _rtree_addContextPath(a){if(a==null){return""}if(a.indexOf("/")==0){return contextPath+a}else{return a}}function _rtreeNode_processNodeStatus(d,j,q,l,g,o,h,b){var a=d.imgLevel;var f=o;var e=h;if(f!=""&&f!="null"){var m=f.split(",");if(e=="xpath"){if(m.length!=2){if(j.getProperty(m[0])!=null){d.openIconSrc=_rtree_addContextPath(j.getProperty(m[0]))}d.closeIconSrc=d.openIconSrc}else{if(j.getProperty(m[0])!=null){d.openIconSrc=_rtree_addContextPath(j.getProperty(m[0]))}if(j.getProperty(m[1])!=null){d.closeIconSrc=_rtree_addContextPath(j.getProperty(m[1]))}}}else{if(m.length!=2){d.openIconSrc=_rtree_addContextPath(m[0]);d.closeIconSrc=d.openIconSrc}else{d.openIconSrc=_rtree_addContextPath(m[0]);d.closeIconSrc=_rtree_addContextPath(m[1])}}}if(a==""&&!g&&q){if(l){d.plusIconSrc=STREE_ROOTPLUS_ICON;d.minusIconSrc=STREE_ROOTMINUS_ICON}else{if(d.hasChild){d.plusIconSrc=STREE_FPLUS_ICON;d.minusIconSrc=STREE_FMINUS_ICON}else{d.plusIconSrc=STREE_FLEAF_ICON;d.minusIconSrc=""}}}else{if(l){if(d.hasChild){d.plusIconSrc=STREE_LPLUS_ICON;d.minusIconSrc=STREE_LMINUS_ICON}else{d.plusIconSrc=STREE_LLEAF_ICON;d.minusIconSrc=""}}else{if(d.hasChild){d.plusIconSrc=STREE_PLUS_ICON;d.minusIconSrc=STREE_MINUS_ICON}else{d.plusIconSrc=STREE_LEAF_ICON;d.minusIconSrc=""}}}var n=document.createElement("DIV");for(var k=0;k<a.length;k++){var c=document.createElement("IMG");c.style.verticalAlign="middle";if(a.charAt(k)=="1"){c.src=STREE_LINE_ICON}else{c.src=STREE_BLANK_ICON}n.appendChild(c)}if(l){d.imgLevel=a+"0"}else{d.imgLevel=a+"1"}var c=document.createElement("IMG");c.src=d.plusIconSrc;c.style.verticalAlign="middle";n.appendChild(c);var o;o=document.createElement("IMG");if(f=="null"){o.style.display="none"}else{o.style.verticalAlign="middle";o.src=d.closeIconSrc}n.appendChild(o);var r=document.createElement("span");r.innerHTML=b;r.className="RC_TREE_CELL";r.style.verticalAlign="middle";n.appendChild(r);var p=document.createElement("DIV");p.style.display="none";d.appendChild(n);d.appendChild(p);d.setAttribute("richclientType","RTREENODE");c.style.cursor="hand";d.expandIcon=c;d.icon=o;d.cell=r;d.childLoaded=false;d.childrenContainer=p}function _rtreeNode_selected(){var a=findRTree(this);if(a.cur_node){a.cur_node.cell.className="RC_TREE_CELL"}this.cell.className="RC_TREE_ACTIVENODE";a.cur_node=this}function _rtreeNoderefreshExpendIcon(){var d=this.imgLevel;var b=this.hasRoot;var c=this.isFirstNode;var a=this.isLastNode;if(this.getParent().isroot&&!b&&c){if(a){this.plusIconSrc=STREE_ROOTPLUS_ICON;this.minusIconSrc=STREE_ROOTMINUS_ICON}else{if(this.hasChild){this.plusIconSrc=STREE_PLUS_ICON;this.minusIconSrc=STREE_MINUS_ICON}else{this.plusIconSrc=STREE_FLEAF_ICON;this.minusIconSrc=STREE_FLEAF_ICON}}}else{if(a){if(this.hasChild){this.plusIconSrc=STREE_LPLUS_ICON;this.minusIconSrc=STREE_LMINUS_ICON}else{this.plusIconSrc=STREE_LLEAF_ICON;this.minusIconSrc=STREE_LLEAF_ICON}}else{if(this.hasChild){this.plusIconSrc=STREE_PLUS_ICON;this.minusIconSrc=STREE_MINUS_ICON}else{this.plusIconSrc=STREE_LEAF_ICON;this.minusIconSrc=STREE_LEAF_ICON}}}this.expandIcon.src=this.minusIconSrc}function _rtreeNode_addChildNodes(a){this.childrenContainer.appendChild(a)}function _rtreeNode_expandNode(c){if(this.isleaf){return}var a=this.getTree().beforeExpand;if(a){if(a(this)==false){return}}var d=this;var g=findRTree(d);var b=g.model;this.expandIcon.src=this.minusIconSrc;if(!d.childLoaded){this.icon.src=RTREE_DROP_LOADING;var f=this;setTimeout(function(){b.loadNodeChild(d,c)},1);d.childLoaded=true}else{if(!d.isleaf){d.childrenContainer.style.display="";this.icon.src=this.openIconSrc}}var e=this.getTree().afterExpand;if(e){e(this)}}function _rtreeNode_collapseNode(){this.expandIcon.src=this.plusIconSrc;this.icon.src=this.closeIconSrc;this.childrenContainer.style.display="none"}function _rtreeNode_clearChildren(){var c=this.childrenContainer.childNodes;for(var b=c.length-1;b>=0;b--){if(!isIE){var a=c[b].parentNode;a.removeChild(c[b])}else{c[b].removeNode(true)}}this.expandIcon.src=RTree.COLLAPS_ICON;this.childrenContainer.style.display="none";this.isleaf=false;this.childLoaded=false;this.isloadData=false}function _rtreeNode_refresh(c){var b=findRTree(this);var d=b.model;if(c){this.entity=c}if(this.isroot){this.level=0}else{this.level=this.getParent().level+1}this.cell.innerHTML=d.getTreeNodeName(this.entity);var e=d.getEntityInfo(this.entity.name);var a=e.onrefresh;if(!a){return}fireUserEvent(a,[this,this.cell])}function _rtreeNode_getParent(){if(this.isroot){return null}else{return this.parentNode.parentNode}}function _rtreeNode_getChildren(){return this.childrenContainer.childNodes}function _rtreeNode_getTree(){return findRTree(this)}function _rtreeNode_isChildOf(a){var b=this;while(b=b.getParent()){if(b==a){return true}}return false}function _rtreeNode_isExpanded(){if(this.childrenContainer.style.display=="none"){return false}else{return true}}function _rtreeNode_reloadChild(a){if(this.childLoaded||this.isRootNode()){this.clearChildren();this.expandNode(a)}else{this.expandNode(a)}}function _rtreeNode_clearup(){var c=this;var b=c.getChildren();for(var a=b.length-1;a>=0;a--){b[a].clearup(true)}c.expandIcon=null;c.icon=null;c.cell=null;c.entity=null;c.childrenContainer=null;c.addChildNode=null;c.expandNode=null;c.collapseNode=null;c.clearChildren=null;c.selected=null;c.refresh=null;c.isChildOf=null;c.isExpanded=null;c.getParent=null;c.getChildren=null;c.getTree=null;c.reloadChild=null;c.clearup=null;c.onclick=null;c.ondblclick=null;c.oncontextmenu=null;c.onmousedown=null;c.onmouseover=null;c.onmouseup=null;c.removeNode(true)}function _rtreenode_onclick(){var b=findRTree(this);var c=b.model;c.menu.hide();function a(){if(d.isleaf){return}if(d.childrenContainer.style.display=="none"){d.expandNode()}else{d.collapseNode()}}var d=this;var f=eventManager.getElement();if(f==this.cell||f==this.expandIcon||f==this.icon){this.selected()}if(f==this.cell){var e=c.getEntityInfo(this.entity.name).onclick;if(e){fireUserEvent(e,[this])}}if(f==this.expandIcon){a()}}function _rtreenode_ondblclick(){eventManager.stopPropagation();var a=findRTree(this);var b=a.model;var c=this;var e=eventManager.getElement();if(e==this.cell){var d=b.getEntityInfo(this.entity.name).ondblclick;if(d){fireUserEvent(d,[this])}}}function _rtreenode_oncontextmenu(){eventManager.stopPropagation();var a=findRTree(this);var b=a.model;var d=b.menu;var c=this;c.selected();if(eventManager.getElement()==this.cell){b.showNodeMenu(c)}return false}function _rtreenode_onmousedown(){var e=eventManager.getEvent();if(!isIE){if(e.button!=0){return}}else{if(e.button!=1){return}}if(!isIE){eventManager.stopPropagation()}var a=eventManager.getElement();if(a!=this.cell){return}var b=findRTree(this);var c=b.model;if(c.isNodeMovable(this)){c.move_node=this;document.moveModel=c;doc_onmousemove=document.onmousemove;doc_onmouseup=document.onmouseup;doc_onmouseout=document.onmouseout;document.onmousemove=function(){d.show();var f=eventManager.getEvent();if(!isIE){d.style.top=eventManager.getPointY();d.style.left=eventManager.getPointX()+12}else{d.style.posTop=f.y+document.body.scrollTop;d.style.posLeft=f.x+document.body.scrollLeft+12}if(isCanMoveTo(document.moveModel,document.movetoModel)!=false){d.statusIcon.src=RTREE_DROP_YES}else{d.statusIcon.src=RTREE_DROP_NO}};document.onmouseup=function(){var f=document.moveModel;if(isCanMoveTo(document.moveModel,document.movetoModel)==false){var g;if(f.move_node.icon.style.display=="none"){g=getPosition(f.move_node.cell)}else{g=getPosition(f.move_node.icon)}if(d.style.display!="none"){d.statusIcon.style.display="none";d.reset(g.top,g.left)}}else{document.onmousemove=doc_onmousemove;document.onmouseup=doc_onmouseup;document.onmouseout=doc_onmouseout;d.hide();f.moveNode();document.moveModel=null;document.movetoModel=null;return}document.onmousemove=doc_onmousemove;document.onmouseup=doc_onmouseup;document.onmouseout=doc_onmouseout;document.moveModel=null;document.movetoModel=null};document.onmouseout=function(){if(!isIE){if(eventManager.getElement().tagName!="HTML"){return}}try{if(!(e.clientX<=0||e.clientX>=document.body.clientWidth||e.clientY<=0||e.clientY>=document.body.clientHeight)){return}var g=getPosition(c.move_node.icon);if(d.style.display!="none"){d.statusIcon.style.display="none";d.reset(g.top,g.left)}document.onmousemove=doc_onmousemove;document.onmouseup=doc_onmouseup;document.onmouseout=doc_onmouseout;document.moveModel=null;document.movetoModel=null}catch(f){}};var d=c.getMovemenu(c.move_node);d.statusIcon.style.display=""}}function _rtreenode_onmouseover(){if(eventManager.getElement()!=this.cell){return}var a=findRTree(this);var b=a.model;if(__isStartDrag()){eventManager.stopPropagation();b.moveto_node=this;document.movetoModel=b;this.selected()}}function _rtreenode_onmouseup(){}function findRTree(a){var b=a;var c;while(b=b.parentNode){c=b.getAttribute("richclientType");if(c=="RTREE"){return b}}return null}function EOSTreeMenu(a){var b=_get_top_window();var d=b.document.createElement("div");var c=b.document.createElement("div");d.appendChild(c);d.container=c;c.className="eos-popmenu";d.style.width="120px";d.style.cursor=" hand";d.style.position="absolute";d.style.display="none";b.document.body.appendChild(d);d.clearItems=_treemenu_clearItems;d.insertItem=_treemenu_insertItem;d.addMenuItem=_treemenu_addMenuItem;d.addMenuLine=function(){var e=document.createElement("div");e.className="rtree-popmenu-item-line";this.container.appendChild(e)};d.removeMenuItem=_treemenu_removeMenuItem;d.hide=function(){this.clearItems();this.style.display="none"};d.show=function(){PageControl.setFocus(this);this.style.display="";initShadow(this.container,b.document);if(!isIE){this.container.nextSibling.style.width=this.container.nextSibling.offsetWidth+5}this.container.nextSibling.style.zIndex="-1";this.style.zIndex="0";if(!isIE){setOpacity(this,0)}this.style.zIndex=999;var f=eventManager.getEvent();if(isIE){this.style.posTop=f.screenY-b.screenTop+b.document.body.scrollTop;this.style.posLeft=f.screenX-b.screenLeft+b.document.body.scrollLeft}else{var e=f.x||f.clientX;var h=f.y||f.clientY;var g=getScreenPos(window,b);e=e+g.left+b.document.body.scrollLeft;h=h+g.top+b.document.body.scrollTop;this.style.top=h;this.style.left=e}this.tabIndex=1;if(!isIE){fx_fadeIn(this,null,500)}};d.model=a;d.oncontextmenu=function(){return false};d.onselectstart=function(){return false};d.onblur=function(){EOSTreeMenu.hideAll()};return d}function _treemenu_addMenuItem(a,b,d){var c=new EOSTreeMenuItem(a,b);this.insertItem(c)}function _treemenu_removeMenuItem(a){var c=this.container.children||this.container.childNodes;for(var b=0;b<c.length;b++){if(c[b].innerHTML==a){if(b<c.length-1){if(c[b+1].className=="rtree-popmenu-item-line"){this.container.removeChild(c[b+1])}}this.container.removeChild(c[b]);return}}}EOSTreeMenu.register=function(a){if(!this.menus){this.menus=new Array()}this.menus.push(a)};EOSTreeMenu.hideAll=function(){if(!this.menus){return}for(var a=0;a<this.menus.length;a++){this.menus[a].hide()}};function EOSTreeMenuItem(b,a){var c=_get_top_window();var d=c.document.createElement("div");d.className="rtree-popmenu-item";if(!isIE){d.style.marginBottom="-6px"}d.innerHTML=b;d.onclickFunction=a;d.onmousedown=_treemenuitem_onclick;d.onmouseover=_treemenuitem_onmouseover;d.onmouseout=_treemenuitem_onmouseout;return d}function _treemenu_clearItems(){var a=this.container.children||this.container.childNodes;if(a){while(a.length>0){this.container.removeChild(a[0])}}}function _treemenu_insertItem(a){this.container.appendChild(a)}function _treemenuitem_onclick(){var a=this.parentNode.parentNode;removeClass(this,"rtree-popmenu-item-mouseover");a.hide();a.model.onmenuclick(this.onclickFunction);this.style.backgroundColor="";this.style.color="black"}function _treemenuitem_onmouseover(){addClass(this,"rtree-popmenu-item-mouseover");this.style.color="white"}function _treemenuitem_onmouseout(){removeClass(this,"rtree-popmenu-item-mouseover");this.style.color="black"}function RTreeMoveMenu(){var c=document.createElement("div");var d=document.createElement("div");var a=document.createElement("nobr");d.appendChild(a);d.className="RC_TREE_DRAGNODE";c.onselectstart=function(){eventManager.stopPropagation();return false};c.style.position="absolute";c.style.display="none";document.body.appendChild(c);var b=document.createElement("img");b.src=RTREE_DROP_NO;b.style.verticalAlign="middle";var e=document.createElement("span");a.appendChild(b);a.appendChild(e);c.appendChild(d);c.nodeView=e;c.statusIcon=b;c.container=d;c.show=_rtreemovemenu_show;c.hide=_rtreemovemenu_hide;c.reset=_rtreemovemenu_reset;return c}function _rtreemovemenu_show(){this.style.display=""}function _rtreemovemenu_reset(c,b){this.hide();return;if(!isIE){this.hide();return}var a=this;if(this.style.posTop==c&&this.style.posLeft==b){this.hide();return}if(this.style.posTop>c){if(this.style.posTop-c<=3){this.style.posTop=this.style.posTop-1}else{this.style.posTop=this.style.posTop-(this.style.posTop-c)*0.3}}if(this.style.posTop<c){if(c-this.style.posTop<=3){this.style.posTop=this.style.posTop+1}else{this.style.posTop=this.style.posTop+(c-this.style.posTop)*0.3}}if(this.style.posLeft>b){if(this.style.posLeft-b<=3){this.style.posLeft=this.style.posLeft-1}else{this.style.posLeft=this.style.posLeft-(this.style.posLeft-b)*0.3}}if(this.style.posLeft<b){if(b-this.style.posLeft<=3){this.style.posLeft=this.style.posLeft+1}else{this.style.posLeft=this.style.posLeft+(b-this.style.posLeft)*0.3}}setTimeout(function(){return _rtreemovemenu_reset.apply(a,[c,b])},10)}function _rtreemovemenu_hide(){this.style.display="none"}function fireUserEvent(function_name,param){var result;var paramstr="";for(i=0;i<param.length;i++){if(i==0){paramstr="param["+i+"]"}else{paramstr=paramstr+",param["+i+"]"}}if(isUserEventDefined(function_name)){eval("result="+function_name+"("+paramstr+");")}if(!result){result=""}return result}function isUserEventDefined(function_name){if(function_name==""||function_name==undefined){return false}var result;eval("result=(typeof("+function_name+')!="undefined");');if(!result){alert(STREE_MOT_FOUND+function_name+"!")}return result}function __isStartDrag(){if(document.moveModel!=null){return true}else{return false}}function isCanMoveTo(a,b){if(!a){return false}if(!b){return false}var d=a.move_node;var c=b.moveto_node;if(c==null){return false}if(d==null){return false}if(d==c){return false}var g=d.getParent();if(c==g){return false}if(c.isChildOf(d)){return false}var e=a.getMoveAction(d,c);var f=d.getTree().isCanMove;if(!e){return false}if(f){if(f(d,c)==false){return false}else{return true}}}function _rree_expand_level(c,b){if(b==null){b=this.getRootNode()}if(!b.isroot){b.expandNode()}var a=this;setTimeout(function(){return isLoadFinish.apply(a,[c,b])},10)}function isLoadFinish(e,d){var a=this;if(d.loadFinished!=true){setTimeout(function(){return isLoadFinish.apply(a,[e,d])},10);return}e=e-1;var c=d.getChildren();if(e==0){return}else{for(var b=0;b<c.length;b++){if(c[b].isleaf){continue}_rree_expand_level(e,c[b])}}}function _rree_auto_resize_step1(){$id(this.id+"_container").style.display="none"}function _rree_auto_resize_step2(){var a=$id(this.getAttribute("id")+"_container");var b=a.parentNode;while(b!=null){if(b.getAttribute&&b.getAttribute("layout")!=null){a.style.height=b.offsetHeight;a.style.display="";b=null}else{b=b.parentNode}}a.style.display=""};function Relation(b,a,c,d){this.entityName=b;this.entityField=a;this.parentEntity=c;this.parnetFeild=d}function EntityInfo(g,c,d,i,f,b,h,a,e){this.icon=g;this.iconType=c;this.showField=d;this.onclick=i;this.refresh=f;this.oncheck=b;this.submitXpath=h;this.url=a;this.target=e}function CheckedInfo(c,b,a,d){this.entityName=c;this.entityField=b;this.checkedEntity=a;this.checkedField=d}function CheckList(a){this.entityType=a;this.list=new Array()}CheckList.prototype.push=function(a){this.list.push(a)};CheckList.prototype.getLength=function(){return this.list.length};CheckList.prototype.getNodeType=function(){return this.entityType};CheckList.prototype.toString=function(){var b="";for(var a=0;a<this.list.length;a++){b=b+this.list[a]}return"<list entityType='"+this.entityType+"'>"+b+"</list>"};function STree(f,c,b,e,d,a){if(d!="null"){f.style.width=d}if(a!="null"){f.style.height=a}var g=f.id.substr(0,f.id.indexOf("_container"));PageControl.add(g,this);this.hasCheckbox=c;this.checkType=b;this.treeContainer=f;this.hasRoot=e;this.datasetList=new Object();this.datasetList.root=new Object();this.entityInfoList=new Object();this.relationList=new Array();this.checkedInfoList=new Array()}STree.prototype.addRelation=function(b,a,d,e){var c=new Relation(b,a,d,e);this.relationList.push(c)};STree.prototype.addCheckedInfo=function(c,b,a,e){var d=new CheckedInfo(c,b,a,e);this.checkedInfoList.push(d)};STree.prototype.addDataset=function(b,a){var d=createXmlDom();d.loadXML(a.innerHTML);var c=new Dataset(b);c.init(d.selectSingleNode("/root/data").childNodes);this.datasetList[b]=c};STree.prototype.addEntityInfo=function(h,g,c,d,k,f,b,i,a,e){var j=new EntityInfo(g,c,d,k,f,b,i,a,e);this.entityInfoList[h]=j};STree.prototype.getDataset=function(a){return this.datasetList[a]};STree.prototype.getEntityInfo=function(a){return this.entityInfoList[a]};STree.prototype.processRelation=function(){var c=this.relationList;for(var a=0;a<c.length;a++){var b=c[a];if(b.parentEntity=="root"){_stree_linkToRoot(b,this.getDataset(b.entityName),this.getDataset(b.parentEntity))}else{_stree_linkToParnet(b,this.getDataset(b.entityName),this.getDataset(b.parentEntity))}}};STree.prototype.processCheckBox=function(){var n=this.checkedInfoList;for(var e=0;e<n.length;e++){var l=n[e];if(l.entityName==l.checkedEntity){var d=this.getDataset(l.entityName);var a=d.values;var m=l.checkedField;var p=l.entityField;var r=d.getLength();for(var c=0;c<r;c++){var q=a[c].getProperty(p);if(q==m){a[c].checked="1"}}}else{var d=this.getDataset(l.entityName);var a=d.values;var r=d.getLength();var o=this.getDataset(l.checkedEntity);var g=o.values;var f=o.getLength();var p=l.entityField;var h=l.checkedField;for(var c=0;c<r;c++){var q=a[c].getProperty(p);for(var b=0;b<f;b++){var m=g[b].getProperty(h);if(m==q){a[c].checked="1"}}}}}this.processParnetCheckBox()};STree.prototype.processParnetCheckBox=function(){if(this.checkType=="simple"){return}_stree_processParnetCheckBox(this.getDataset("root"))};function _stree_processParnetCheckBox(a){var e="3";var d=a.childList;if(d!=null){for(var b=0;b<d.length;b++){var c=_stree_processParnetCheckBox(d[b]);if(e=="3"){e=c}else{if(e!="2"){if(e!=c){e=2}}}}a.checked=e;return e}else{if(a.checked=="1"){return 1}else{return 0}}}function _stree_linkToRoot(a,d,l){if(l.childList==null){l.childList=new Array()}var f=l.childList;var h=d.getLength();var b=d.values;var e=a.entityName;var j=a.parnetFeild;var k=a.entityField;if(j==="ADD_ALL"){for(var g=0;g<h;g++){var c=b[g];c.type=e;f.push(c)}}else{if(j===""){j="null"}for(var g=0;g<h;g++){var c=b[g];if(c.getProperty(k)+""==j){c.type=e;f.push(c)}}}}function _stree_linkToParnet(a,d,k){if(k.childList==null){k.childList=new Array()}var f=k.childList;var h=d.getLength();var b=d.values;var e=a.entityName;var j=a.parnetFeild;if(j==="ADD_ALL"){for(var g=0;g<h;g++){var c=b[g];c.type=e;f.push(c)}}else{__linkToParent(a,d,k)}}function __linkToParent(e,h,l){var o=h.getLength();var u=l.getLength();var n=e.entityName;var t=e.parnetFeild;var c=t.split(",");var m=e.entityField.split(",");var s=c.length;var d=l.values;var a=h.values;for(var r=0;r<o;r++){for(var q=0;q<u;q++){var b=false;for(var p=0;p<s;p++){var g=d[q].getProperty(c[p]);var f=a[r].getProperty(m[p]);if(g!=f){b=false;break}if(p==(s-1)){b=true}}if(b){if(d[q].childList==null){d[q].childList=new Array()}a[r].type=n;d[q].childList.push(a[r])}}}}function _streeNode_collapseNode(){this.expandIcon.src=this.plusIconSrc;this.icon.src=this.closeIconSrc;this.childrenContainer.style.display="none"}function _streeNode_expandNode(){this.expandIcon.src=this.minusIconSrc;this.icon.src=this.openIconSrc;if(!this.isChildLoaded){this.addChildNode()}else{this.childrenContainer.style.display=""}}function _streeNode_addChildNodes(){var c=this.entity.childList;if(c==null){return}for(var b=0;b<c.length;b++){var a=false;var e=false;if(b==0){a=true}if(b==c.length-1){e=true}var d=new STreeNode(this,c[b],a,e);d.refresh();this.childrenContainer.appendChild(d)}this.childrenContainer.style.display="";this.isChildLoaded=true}function STreeRootNode(i){var a=document.createElement("DIV");a.noWrap=true;a.level="";a.tree=i;a.hasCheckbox=i.hasCheckbox;a.checkType=i.checkType;a.entity=i.datasetList.root;a.openIconSrc=STREE_DEFAULTOPEN_ICON;a.closeIconSrc=STREE_DEFAULTCLOSE_ICON;a.plusIconSrc=STREE_ROOTPLUS_ICON;a.minusIconSrc=STREE_FMINUS_ICON;a.entityInfo=i.getEntityInfo("root");a.hasChild=(a.entity.childList!=null);a.isChildLoaded=true;a.isRoot=true;var g=document.createElement("div");var b=a.entityInfo.icon;if(b!=""){a.openIconSrc=_stree_addContextPath(b)}var d;d=document.createElement("IMG");d.style.verticalAlign="middle";if(a.openIconSrc=="null"){d.style.display="none"}d.src=a.openIconSrc;g.appendChild(d);var c=null;if(a.hasCheckbox){c=document.createElement("IMG");c.style.verticalAlign="middle";if(a.entity.checked==null||a.entity.checked=="0"){c.src=STREE_CHECKBOX_FALSE_ICON}else{if(a.entity.checked=="1"){c.src=STREE_CHECKBOX_TRUE_ICON}else{c.src=STREE_CHECKBOX_TRUE_ICON1}}g.appendChild(c)}var h;if(a.entityInfo.url!=""){h=document.createElement("A");h.href=_stree_addContextPath(a.entityInfo.url);h.innerHTML=a.entityInfo.showField;if(a.entityInfo.target!=""){h.target=a.entityInfo.target}}else{h=document.createElement("SPAN");h.innerHTML=a.entityInfo.showField}h.className="RC_TREE_CELL";g.appendChild(h);var f=document.createElement("IMG");f.style.verticalAlign="middle";f.src=STREE_BLANK_ICON;g.appendChild(f);var e=document.createElement("DIV");a.appendChild(g);a.appendChild(e);a.setAttribute("richclientType","RTREENODE");a.icon=d;a.cell=h;a.checkbox=c;a.childLoaded=true;if(!i.hasRoot){g.style.display="none"}a.childrenContainer=e;a.addChildNode=_streeNode_addChildNodes;a.expandNode=_streeNode_expandNode;a.collapseNode=_streeNode_collapseNode;a.select=_streeNode_selected;a.refresh=_streeNode_refresh;a.setIcon=_streeNode_setIcon;a.setText=_streeNode_setNodeText;a.getText=_streeNode_getNodeText;a.getProperty=_streeNode_getProperty;a.checkbox_click=_streeNode_checkbox_onchick;a.getParent=_streeNode_getParent;a.getChildren=_streeNode_getChildren;a.isChecked=_streeNode_isChecked;a.getEntity=_streeNode_getEntity;a.isRootNode=_streeNode_isRoot;a.hasChildNode=_streeNode_hasChild;a.getTree=_streeNode_getTree;a.onmouseover=_streeNode_onmouseover;a.onmouseout=_streeNode_onmouseout;a.onclick=_streeNode_onclick;return a}function STreeNode(b,d,f,c){var a=b.tree;var e=document.createElement("DIV");e.noWrap=true;e.level=b.level;e.tree=a;e.hasCheckbox=a.hasCheckbox;e.checkType=a.checkType;e.entity=d;e.openIconSrc=STREE_DEFAULTOPEN_ICON;e.closeIconSrc=STREE_DEFAULTCLOSE_ICON;e.plusIconSrc="";e.minusIconSrc="";e.entityInfo=a.getEntityInfo(e.entity.type);e.hasChild=(d.childList!=null);e.isRoot=false;_streeNode_processNodeStatus(e,d,f,c);e.addChildNode=_streeNode_addChildNodes;e.expandNode=_streeNode_expandNode;e.collapseNode=_streeNode_collapseNode;e.select=_streeNode_selected;e.refresh=_streeNode_refresh;e.setIcon=_streeNode_setIcon;e.setText=_streeNode_setNodeText;e.getText=_streeNode_getNodeText;e.getProperty=_streeNode_getProperty;e.checkbox_click=_streeNode_checkbox_onchick;e.getParent=_streeNode_getParent;e.getChildren=_streeNode_getChildren;e.isChecked=_streeNode_isChecked;e.getEntity=_streeNode_getEntity;e.isRootNode=_streeNode_isRoot;e.hasChildNode=_streeNode_hasChild;e.getTree=_streeNode_getTree;e.onmouseover=_streeNode_onmouseover;e.onmouseout=_streeNode_onmouseout;e.onclick=_streeNode_onclick;return e}function _streeNode_getTree(){return this.tree}function _streeNode_hasChild(){return this.hasChild}function _streeNode_isRoot(){return this.isRoot}function _streeNode_getEntity(){return this.entity}function _streeNode_getProperty(a){return this.entity.getProperty(a)}function _streeNode_processNodeStatus(c,f,o,j){var a=c.level;var d=c.entityInfo.icon;var e=c.entityInfo.iconType;if(d!=""){var k=d.split(",");if(e=="xpath"){if(k.length!=2){c.openIconSrc=_stree_addContextPath(f.getProperty(k[0]));c.closeIconSrc=c.openIconSrc}else{c.openIconSrc=_stree_addContextPath(f.getProperty(k[0]));c.closeIconSrc=_stree_addContextPath(f.getProperty(k[1]))}}else{if(k.length!=2){c.openIconSrc=_stree_addContextPath(k[0]);c.closeIconSrc=c.openIconSrc}else{c.openIconSrc=_stree_addContextPath(k[0]);c.closeIconSrc=_stree_addContextPath(k[1])}}}if(a==""&&!c.tree.hasRoot&&o){if(j){c.plusIconSrc=STREE_ROOTPLUS_ICON;c.minusIconSrc=STREE_ROOTMINUS_ICON}else{if(c.hasChild){c.plusIconSrc=STREE_FPLUS_ICON;c.minusIconSrc=STREE_FMINUS_ICON}else{c.plusIconSrc=STREE_FLEAF_ICON;c.minusIconSrc=""}}}else{if(j){if(c.hasChild){c.plusIconSrc=STREE_LPLUS_ICON;c.minusIconSrc=STREE_LMINUS_ICON}else{c.plusIconSrc=STREE_LLEAF_ICON;c.minusIconSrc=""}}else{if(c.hasChild){c.plusIconSrc=STREE_PLUS_ICON;c.minusIconSrc=STREE_MINUS_ICON}else{c.plusIconSrc=STREE_LEAF_ICON;c.minusIconSrc=""}}}var q=document.createElement("div");for(var g=0;g<a.length;g++){var b=document.createElement("IMG");b.style.verticalAlign="middle";if(a.charAt(g)=="1"){b.src=STREE_LINE_ICON}else{b.src=STREE_BLANK_ICON}q.appendChild(b)}if(j){c.level=a+"0"}else{c.level=a+"1"}var b=document.createElement("IMG");b.src=c.plusIconSrc;b.style.verticalAlign="middle";q.appendChild(b);var l;l=document.createElement("IMG");l.style.verticalAlign="middle";if(c.closeIconSrc=="null"){l.style.display="none"}l.src=c.closeIconSrc;q.appendChild(l);var h=null;if(c.hasCheckbox){h=document.createElement("IMG");h.style.verticalAlign="middle";if(c.entity.checked==null||c.entity.checked=="0"){h.src=STREE_CHECKBOX_FALSE_ICON}else{if(c.entity.checked=="1"){h.src=STREE_CHECKBOX_TRUE_ICON}else{h.src=STREE_CHECKBOX_TRUE_ICON1}}q.appendChild(h)}var p;if(c.entityInfo.url!=""){p=document.createElement("A");var n=compileTemplate(c.entityInfo.url);p.href=_stree_addContextPath(runExpression(n,f));if(c.entityInfo.target!=""){p.target=c.entityInfo.target}}else{p=document.createElement("span")}p.innerHTML=c.entity.getProperty(c.entityInfo.showField);p.className="RC_TREE_CELL";p.style.verticalAlign="middle";q.appendChild(p);var m=document.createElement("DIV");m.style.display="none";c.appendChild(q);c.appendChild(m);c.setAttribute("richclientType","RTREENODE");b.style.cursor="hand";c.expandIcon=b;c.icon=l;c.cell=p;c.checkbox=h;c.childLoaded=false;c.childrenContainer=m}function _stree_addContextPath(a){if(a==null){return""}if(a.indexOf("/")==0){return contextPath+a}else{return a}}function _streeNode_refresh(){var functionName=this.entityInfo.refresh;if(functionName!=""){eval(functionName+"(this)")}}function _streeNode_onmouseover(){addClass(this.cell,"RC_TREE_MOUSEOVER");eventManager.stopPropagation()}function _streeNode_onmouseout(){removeClass(this.cell,"RC_TREE_MOUSEOVER");eventManager.stopPropagation()}function _streeNode_onclick(){var src=eventManager.getElement();if(src==this.cell||src==this.expandIcon||src==this.icon||src==this.checkbox){this.select()}if(src==this.cell){var functionName=this.entityInfo.onclick;if(functionName!=""){eval(functionName+"(this)")}}if(src==this.expandIcon){if(this.childrenContainer.style.display=="none"){if(this.hasChild){this.expandNode()}}else{this.collapseNode()}}if(src==this.checkbox){this.checkbox_click()}}function _streeNode_checkbox_onchick(){if(this.checkType=="simple"){if(this.entity.checked=="1"){this.entity.checked=0;this.checkbox.src=STREE_CHECKBOX_FALSE_ICON}else{this.entity.checked=1;this.checkbox.src=STREE_CHECKBOX_TRUE_ICON}}else{if(this.entity.checked=="1"){_stree_uncheckAllChild(this)}else{_stree_checkAllChild(this)}_stree_process_parentNode(this)}var functionName=this.entityInfo.oncheck;if(functionName!=""){eval(functionName+"(this)")}}function _stree_checkAllChild(b){b.entity.checked=1;b.checkbox.src=STREE_CHECKBOX_TRUE_ICON;if(b.hasChild){if(b.isChildLoaded){var c=b.getChildren();for(var a=0;a<c.length;a++){_stree_checkAllChild(c[a])}}else{var c=b.entity.childList;for(var a=0;a<c.length;a++){_stree_unload_checkAllChild(c[a])}}}return}function _stree_unload_checkAllChild(a){a.checked=1;if(a.childList){var c=a.childList;for(var b=0;b<c.length;b++){_stree_unload_checkAllChild(c[b])}}return}function _stree_uncheckAllChild(b){b.entity.checked=0;b.checkbox.src=STREE_CHECKBOX_FALSE_ICON;if(b.hasChild){if(b.isChildLoaded){var c=b.getChildren();for(var a=0;a<c.length;a++){_stree_uncheckAllChild(c[a])}}else{var c=b.entity.childList;for(var a=0;a<c.length;a++){_stree_unload_uncheckAllChild(c[a])}}}return}function _stree_unload_uncheckAllChild(a){a.checked=0;if(a.childList){var c=a.childList;for(var b=0;b<c.length;b++){_stree_unload_uncheckAllChild(c[b])}}return}function _stree_process_parentNode(d){var a=d.getParent();if(a==null){return}var c=d.entity.checked;if(c=="2"){a.entity.checked="2";a.checkbox.src=STREE_CHECKBOX_TRUE_ICON1;_stree_process_parentNode(a);return}var e=a.getChildren();for(var b=0;b<e.length;b++){if(e[b].entity.checked==null){e[b].entity.checked="0"}if(e[b].entity.checked!=c){a.entity.checked="2";a.checkbox.src=STREE_CHECKBOX_TRUE_ICON1;_stree_process_parentNode(a);return}}if(c=="1"){a.entity.checked=1;a.checkbox.src=STREE_CHECKBOX_TRUE_ICON}else{a.entity.checked=0;a.checkbox.src=STREE_CHECKBOX_FALSE_ICON}_stree_process_parentNode(a)}function _streeNode_getChildren(){return this.childrenContainer.childNodes}function _streeNode_getParent(){if(this.isRoot){return null}else{return this.parentNode.parentNode}}function _streeNode_selected(){var a=this.tree;if(a.cur_node){a.cur_node.cell.className="RC_TREE_CELL"}this.cell.className="RC_TREE_ACTIVENODE";a.cur_node=this}STree.prototype.getCheckedList=function(e){if(e!=null){var h=this.getDataset(e);if(h==null){alert(e+STREE_ENTITY_NOT_EXIST);return}var b=new CheckList(e);var a=h.values;var g=h.getLength();for(var c=0;c<g;c++){var d=a[c].checked;if(d=="1"||d=="2"){b.push(a[c])}}return b}else{var f=new Array();for(e in this.datasetList){if(e=="root"){continue}var h=this.getDataset(e);if(h==null){alert(e+STREE_ENTITY_NOT_EXIST);return}var b=new CheckList(e);var a=h.values;var g=h.getLength();for(var c=0;c<g;c++){var d=a[c].checked;if(d=="1"||d=="2"){b.push(a[c])}}f.push(b)}return f}};STree.prototype.getUncheckedList=function(e){if(e!=null){var h=this.getDataset(e);if(h==null){alert(e+STREE_ENTITY_NOT_EXIST);return}var b=new CheckList(e);var a=h.values;var g=h.getLength();for(var c=0;c<g;c++){var d=a[c].checked;if(d=="0"||d==null){b.push(a[c])}}return b}else{var f=new Array();for(e in this.datasetList){if(e=="root"){continue}var h=this.getDataset(e);if(h==null){alert(e+STREE_ENTITY_NOT_EXIST);return}var b=new CheckList(e);var a=h.values;var g=h.getLength();for(var c=0;c<g;c++){var d=a[c].checked;if(d=="0"||d==null){b.push(a[c])}}f.push(b)}return f}};STree.prototype.init=function(){this.processRelation();this.processCheckBox();var a=new STreeRootNode(this);this.rootNode=a;a.refresh();this.treeContainer.appendChild(a);var b=document.createElement("div");this.treeContainer.appendChild(b);this.hidden=b;a.addChildNode();if(isFF){if(registerTopContainer(this.treeContainer.parentNode)){EOSResizeObjects.push(this)}}};STree.prototype.getRootNode=function(){return this.rootNode};STree.prototype.getSelectedNode=function(){return this.cur_node};function _streeNode_setIcon(a,b){this.openIconSrc=_stree_addContextPath(a);if(b){this.closeIconSrc=_stree_addContextPath(b)}else{this.closeIconSrc=this.openIconSrc}if(this.closeIconSrc=="null"){this.icon.style.display="none"}this.icon.src=this.closeIconSrc}function _streeNode_isChecked(){var a=this.entity.checked;if(a=="1"||a=="2"){return true}else{return false}}function _streeNode_setNodeText(a){this.cell.innerHTML=a}function _streeNode_getNodeText(){return this.cell.innerHTML}STree.prototype.createHiddenData=function(){var e=new StringBuffer();for(entityType in this.datasetList){if(entityType=="root"){continue}var f=1;var b=this.getDataset(entityType);if(b==null){alert(entityType+STREE_ENTITY_NOT_EXIST);return}var a=b.values;var j=b.getLength();for(var d=0;d<j;d++){var g=a[d].checked;if(g=="1"||g=="2"){var h=a[d].type;var c=this.getEntityInfo(h).submitXpath;if(c!=""){h=c}e.append(_stree_create_hiddenStr(f,a[d],h));f=f+1}}}this.hidden.innerHTML=e};function _stree_create_hiddenStr(d,c,b){var a=new StringBuffer();var f=c.getKeys();for(var e=0;e<f.length;e++){var g=c.getProperty(f[e]);a.append("<input type='hidden' name='").append(b).append("[").append(d).append("]/").append(f[e]).append("' value='").append(g).append("'/>")}return a}STree.prototype.autoResizeS1=function(){this.treeContainer.parentNode.style.display="none"};STree.prototype.autoResizeS2=function(){var a=this.treeContainer.parentNode;var b=a.parentNode;while(b!=null){if(b.getAttribute&&b.getAttribute("layout")!=null){a.style.height=b.offsetHeight;b=null}else{b=b.parentNode}}a.style.display=""};STree.prototype.isInCurrPanel=function(){if(_eos_curr_open_panel!=null){var a=this.treeContainer.offsetParent;while(true){if(a==null){return false}if(a==_eos_curr_open_panel.table){return true}a=a.offsetParent}}else{return false}};function SwitchCheckbox(a){this.id=a;this.checkbox=null;this.hiddenInput=null;this.trueValue="1";this.falseValue="0";this.defaultValue="0";this.container=null;PageControl.add(a,this)}SwitchCheckbox.prototype.init=function(){this.checkbox=$id(this.id+"_checkbox");this.hiddenInput=$id(this.id);this.container=$id(this.id+"_container");if(this.checkbox){var b=this;function a(){if(b.checkbox.checked){b.onSelect()}else{b.onUnSelect()}b.refreshValue()}eventManager.add(this.checkbox,"click",a)}};SwitchCheckbox.prototype.refreshInput=function(){if(this.hiddenInput.value==this.trueValue){this.checkbox.checked=true}else{this.checkbox.checked=false}};SwitchCheckbox.prototype.refreshValue=function(){if(this.checkbox.checked){this.hiddenInput.value=this.trueValue}else{this.hiddenInput.value=this.falseValue}};SwitchCheckbox.prototype.onSelect=function(){};SwitchCheckbox.prototype.onUnSelect=function(){};SwitchCheckbox.prototype.setValue=function(a){if(this.trueValue==a){this.hiddenInput.value=this.trueValue}else{this.hiddenInput.value=this.falseValue}this.refreshInput()};SwitchCheckbox.prototype.getValue=function(){this.refreshValue();return this.hiddenInput.value};SwitchCheckbox.prototype.setFocus=function(){this.checkbox.focus()};SwitchCheckbox.prototype.lostFocus=function(){};var TABPANE_TYPE_DIV="DIV";var TABPANE_TYPE_IFRAME="IFRAME";var TABPANE_STATUS_NOMAL=1;var TABPANE_STATUS_OVER=2;var TABPANE_STATUS_ACTIVE=3;var TABPANE_STATUS_DISABLED=4;var TABPANE_STATUS_CLOSED=5;var TABPANE_STATUS_HIDDEN=5;var TAB_STYLE_NOMAL="nomal";var TAB_STYLE_OVER="hover";var TAB_STYLE_ACTIVE="active";var TAB_STYLE_DISABLED="disabled";var TAB_STYLE_LEFT="left";var TAB_STYLE_MID="mid";var TAB_STYLE_RIGHT="right";var TAB_STYLE_TABLE="container";function TabPane(a){this.id=a;PageControl.add(a,this);this.subTabs=new Array();this.currTab=null;this.defaultTab=0;this.isTitleOut=false;this.titleContainer=null;this.bodyContainer=null;this.bgColor="#f1f1f1";this.borderColor="#C0C0C0";this.container=null;this.width="100%";this.height="100%";this.titleWidth=120;this.__titleTR=null;this.noCacheIframe=$create("<iframe name='"+this.id+"'/>");this.noCacheIframe.name=this.id;this.noCacheIframe.style.border=0;this.noCacheIframe.frameBorder=0;this.noCacheIframe.style.width="100%";this.noCacheIframe.style.height="100%";this.pilot=null;this.pilotIndex=0;this.firstButton=null;this.nextButton=null;this.privousButton=null;this.lastButton=null;this.maxTabs=0;this.inited=false;this.pilotInited=false;this._titleTD=null;this.titleAlign="top";this.styleSuffix=""}TabPane.prototype.append=function(a){this.subTabs.push(a);a.group=this};TabPane.prototype.getLength=function(){return this.subTabs.length};TabPane.prototype.getTabs=function(){return this.subTabs};TabPane.prototype.getActiveTab=function(){return this.currTab};TabPane.prototype.getActiveTabIndex=function(){return this.getCurrIndex()};TabPane.prototype.remove=function(b){for(var c=0;c<this.subTabs.length;c++){if(this.subTabs[c]==b){this.subTabs.splice(c,1);if(this.currTab==b){this.currTab=null;var a=c-1;a=a<0?0:a;this.selectTab(a)}return true}}return false};TabPane.prototype.buildTitles=function(){var c=this.getWidth();var a=0;for(var b=0;b<this.subTabs.length;b++){this.appendTitle(this.subTabs[b]);a+=this.subTabs[b].getWidth();if(c-a<60){this.subTabs[b].hideTitle();this.isTitleOut=true}else{this.subTabs[b].showTitle()}}if(this.isTitleOut){this.initPilot()}this.inited=true};TabPane.prototype.getWidth=function(){var c=0;if(String(this.width).indexOf("%")>0){c=parseInt(this.container.offsetWidth)}else{c=parseInt(this.width)}if(c==0){var b=this.container.parentNode;while(b){var a=parseInt(b.offsetWidth);if(a!=0){return a}b=b.parentNode}return document.body.offsetWidth}else{return c}};TabPane.prototype.getIndex=function(a){for(var b=0;b<this.subTabs.length;b++){if(this.subTabs[b]==a){return b}}return -1};TabPane.prototype.getCurrIndex=function(){return this.getIndex(this.currTab)};TabPane.prototype.getShowTabIndex=function(){for(var a=0;a<this.subTabs.length;a++){if(!this.subTabs[a].isHidden){return a}}return -1};TabPane.prototype.showTitleEnd=function(){var a=this.subTabs[this.subTabs.length-1];if(a){return !a.isHidden}return true};TabPane.prototype.refreshTitles=function(){this.isTitleOut=false;var d=this.getWidth();var a=0;var b=this.getShowTabIndex();for(var c=0;c<this.subTabs.length;c++){if(c<b){this.subTabs[c].hideTitle()}else{a+=this.subTabs[c].getWidth();if(d-a<60){this.subTabs[c].hideTitle();this.isTitleOut=true}else{this.subTabs[c].showTitle()}}}if(this.isTitleOut){if(!this.pilotInited){this.initPilot()}this.showPilot(this.pilotIndex);this.pilot.style.display=""}else{if(this.pilot){this.pilot.style.display="none"}}};TabPane.showNextTab=function(c){var b=$id(c);if(!b.showTitleEnd()){var a=b.getShowTabIndex()+1;b.showPilot(a)}};TabPane.showPrivousTab=function(c){var b=$id(c);var a=b.getShowTabIndex()-1;b.showPilot(a)};TabPane.prototype.initPilot=function(){this.pilot=$id(this.id+"_nav_pilot");var a='<table  border="0" cellspacing="0" cellpadding="0" style="width:40px;height:20px;overflow:hidden"><tr><td>';a+="<div onclick=\"TabPane.showPrivousTab('"+this.id+'\')" onmouseover="this.className=\'button-privous-hover\'" onmouseout="this.className=\'button-privous\'" class="button-privous">&nbsp;</div>';a+="</td><td>";a+="<div onclick=\"TabPane.showNextTab('"+this.id+'\')" class="button-next" onmouseover="this.className=\'button-next-hover\'" onmouseout="this.className=\'button-next\'">&nbsp;</div>';a+="</td></tr></table>";this.pilot.innerHTML=a;this.pilot.style.display="";this.pilotInited=true};TabPane.prototype.showPilot=function(b){var d=this.getWidth();var a=0;for(var c=0;c<this.subTabs.length;c++){if(c<b){this.subTabs[c].hideTitle();this.isTitleOut=true}else{a+=this.subTabs[c].getWidth();if(d-a<60){this.subTabs[c].hideTitle();this.isTitleOut=true}else{this.subTabs[c].showTitle()}}}this.pilotIndex=b};TabPane.prototype.appendTitle=function(b){var c=$create("td");var a='<table class="'+TAB_STYLE_TABLE+'" border="0" cellspacing="0" cellpadding="0"><tr>';a+='<td><div class="'+TAB_STYLE_LEFT+'"></div></td>';a+='<td nowarp class="'+TAB_STYLE_MID+'">';a+='<div style="white-space:nowrap;page-break-before: always;page-break-after: always;">';a+=b.getTitle();a+="</div></td>";if(b.showCloseButton){a+='<td nowarp class="'+TAB_STYLE_MID+'">';a+='<a class="close" href="#" onclick="$o(\''+this.id+"').getTab('"+b.id+"').close();\">";if(isIE){a+="<div></div></a>"}else{a+='<div class="close"></div></a>'}a+="</td>"}if(b.allowReload){a+='<td nowarp class="'+TAB_STYLE_MID+'">';a+='<a class="reload" href="#" onclick="$o(\''+this.id+"').getTab('"+b.id+"').reload();\">";if(isIE){a+="<div></div></a>"}else{a+='<div class="reload"></div></a>'}a+="</td>"}a+='<td><div class="'+TAB_STYLE_RIGHT+'"></div></div>';a+="</td></tr></table>";c.className=TAB_STYLE_NOMAL+this.styleSuffix;c.innerHTML=a;b.__titleTD=c;b.setTitleTD();b.initStatus();this.__titleTR.insertBefore(c,this._titleTD);b.titleWidth=c.offsetWidth};TabPane.prototype.init=function(){this.container=$id(this.id+"_container");this.titleContainer=$id(this.id+"_title_container");this.bodyContainer=$id(this.id+"_body");this.__titleTR=$id(this.id+"_nav_tr");this._titleTD=$create("td");this.__titleTR.style.width="100%";this.__pilotContainer=$id(this.id+"_nav_pilot_container");if(this.titleAlign=="top"){this.styleSuffix="";this._titleTD.className="right-top";this._titleTD.style.overflow="hidden"}else{this.styleSuffix="-down";this.bodyContainer.className="tab-body-down";this._titleTD.className="right-buttom"}this.__titleTR.insertBefore(this._titleTD,this.__pilotContainer);this.buildTitles();this._titleTD.innerHTML="&nbsp;";this._titleTD.style.width="100%";this.selectTab(this.defaultTab)};TabPane.prototype.closeTab=function(b){var a;if(typeof(b)=="object"){a=b}else{a=this.getTab(b)}if(a instanceof TabPage){a.close()}};TabPane.prototype.selectTab=function(b){var a;if(typeof(b)=="object"){a=b}else{a=this.getTab(b)}if(a instanceof TabPage){this.activeTab(a);if(this.isTitleOut){this.showPilot(this.pilotIndex)}}};TabPane.prototype.getTab=function(b){if(typeof(b)=="object"){if(b instanceof TabPage){return b}}else{for(var a=0;a<this.subTabs.length;a++){if(this.subTabs[a].id==b){return this.subTabs[a]}}if(!isNaN(b)){if(this.subTabs[b]){return this.subTabs[b]}}}return null};TabPane.prototype.activeTab=function(a){if(!a.allowSelect){return false}if(this.currTab){if(this.currTab==a){return false}if(this.currTab.__onUnselect()){if(a.show()){this.currTab.hide();this.currTab=a;return true}}}else{a.show();this.currTab=a;return true}return false};TabPane.prototype.createBlankTab=function(d,h,g,a,e,b){d=d||this.id+Math.random();var i=this.getTab(d);if(i){alert("The TabPage of id:"+d+",title:"+i.getTitle()+" is exists!");return null}var f="";f+="<table border='0' cellspacing='0' cellpadding='0' width='100%' height='100%'>";f+="	<tr>";f+="		<td id='"+d+"_container' valign='top'  style='display:none;width:100%;height:100%'>";f+="		</td>";f+="	</tr>";f+="</table>";var k=$create(f);k.style.width="100%";k.style.height="100%";var c=firstElement(this.bodyContainer);c.appendChild(k);var j=new TabPage(d);j.type=g;j.src=a;j.title=h;j.cache=b;j.showCloseButton=e;j.init();this.append(j);if(this.inited){this.appendTitle(j)}this.refreshTitles();return j};TabPane.prototype.createIframeTab=function(c,b,a,d){return this.createBlankTab(d,c,"IFRAME",b,false,a)};TabPane.prototype.createDivTab=function(c,b,d){var a=this.createBlankTab(d,c,"DIV",null,false,null);a.container.innerHTML=b;return a};function TabPage(a){this.id=a;PageControl.add(a,this);this.title=a;this.type=TABPANE_TYPE_DIV;this.src=null;this.container=null;this.iframe=null;this.onSelectFunc=null;this.onUnSelectFunc=null;this.onRefreshFunc=null;this.__titleTD=null;this.showCloseButton=true;this.status=TABPANE_STATUS_NOMAL;this.group=null;this.cache=false;this.allowSelect=true;this.params=[];this.containerTable=null;this.titleWidth=80;this.isHidden=false;this.isLoad=false;this.allowReload=false}TabPage.prototype.__onSelect=function(){if(this.onSelectFunc){try{return eval(this.onSelectFunc+"(this)")}catch(e){$handle(e);return false}}return true};TabPage.prototype.__onUnselect=function(){if(this.onUnSelectFunc){try{var ret=eval(this.onUnSelectFunc+"(this)");if(ret===false){return false}else{this.container.style.display="none";return true}}catch(e){$handle(e);return false}}return true};TabPage.prototype.reload=function(){if(this.type==TABPANE_TYPE_IFRAME){if(this.isLoad){var a=this.getUrl();if(a.indexOf("?")>=0){a+="&_date="+new Date()}else{a+="?_date="+new Date()}this.iframe.src=a}else{this.iframe.src=this.getUrl();this.isLoad=true}}};TabPage.prototype.disabled=function(){if(this.status==TABPANE_STATUS_NOMAL){this.allowSelect=false;this.status=TABPANE_STATUS_DISABLED;this.__titleTD.className=TAB_STYLE_DISABLED+this.group.styleSuffix}};TabPage.prototype.enabled=function(){if(this.status==TABPANE_STATUS_DISABLED){this.allowSelect=true;this.status=TABPANE_STATUS_NOMAL;this.__titleTD.className=TAB_STYLE_NOMAL+this.group.styleSuffix}};TabPage.prototype.initStatus=function(){if(this.allowSelect){this.enabled()}else{this.disabled()}};TabPage.prototype.init=function(){this.container=$id(this.id+"_container");this.containerTable=getParentByTagName(this.container,"table");if(!isIE){this.containerTable.style.display="none"}if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){this.iframe=$create("<iframe name='"+this.id+"'/>");this.iframe.style.border=0;this.iframe.frameBorder=0;this.iframe.style.width="100%";this.iframe.style.height="100%";this.container.appendChild(this.iframe);this.isLoad=false}}};TabPage.prototype.load=function(a){this.src=a;this.group.selectTab(this);if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){this.iframe.src=this.getUrl()}else{this.group.noCacheIframe.src=this.getUrl()}}};TabPage.prototype.getTitle=function(){if(this.onRefreshFunc){try{return eval(this.onRefreshFunc+"(this.title,this)")}catch(e){}}return this.title};TabPage.prototype.onClose=function(){};TabPage.prototype.close=function(){try{this.onClose()}catch(a){$handle(a);return false}if(this.group.getLength()>1){this.group.remove(this);this.__titleTD.parentNode.removeChild(this.__titleTD);this.container.id="";this.container.style.display="none";if(!isIE){this.containerTable.style.display="none"}this.group.refreshTitles()}};TabPage.prototype.active=function(){var a=this.getTabPane();a.activeTab(this)};TabPage.prototype.hide=function(){this.container.style.display="none";this.containerTable.style.display="none";if(this.status!=TABPANE_STATUS_DISABLED){this.status=TABPANE_STATUS_NOMAL;this.__titleTD.className=TAB_STYLE_NOMAL+this.group.styleSuffix}else{this.__titleTD.className=TAB_STYLE_DISABLED+this.group.styleSuffix}this.setTitleTD()};TabPage.prototype.show=function(){var a=this.__onSelect();if(a===false){return false}this.container.style.display="";this.containerTable.style.display="";if(this.type==TABPANE_TYPE_IFRAME){if(!this.cache){this.container.appendChild(this.group.noCacheIframe);this.group.noCacheIframe.src=this.getUrl()}else{if(!this.isLoad){this.reload();this.isLoad=true}}}this.status=TABPANE_STATUS_ACTIVE;this.__titleTD.className=TAB_STYLE_ACTIVE+this.group.styleSuffix;this.setTitleTD();return true};TabPage.prototype.setTitleTD=function(){var b=this.group;var c=this.__titleTD;var a=this;c.onclick=function(){var e=this.childNodes[0].rows[0];var f=e.cells[0].getElementsByTagName("div")[0];f.style.backgroundImage="";f=e.cells[e.cells.length-1].getElementsByTagName("div")[0];for(var d=1;d<e.cells.length-1;d++){e.cells[d].style.backgroundImage=""}f.style.backgroundImage="";b.selectTab(a)};c.onmouseover=function(){if(a.status==TABPANE_STATUS_NOMAL){var f=this.childNodes[0].rows[0];var g=f.cells[0].getElementsByTagName("div")[0];var e=getCurrentStyle(g,"backgroundImage");g.style.backgroundImage=e.replace("tabs_nomal_left","tabs_hover_left");g=f.cells[f.cells.length-1].getElementsByTagName("div")[0];for(var d=1;d<f.cells.length-1;d++){f.cells[d].style.backgroundImage=e.replace("tabs_nomal_left","tabs_hover_center")}g.style.backgroundImage=e.replace("tabs_nomal_left","tabs_hover_right")}eventManager.stopPropagation()};c.onmouseout=function(){if(a.status==TABPANE_STATUS_NOMAL){var e=this.childNodes[0].rows[0];var f=e.cells[0].getElementsByTagName("div")[0];f.style.backgroundImage="";f=e.cells[e.cells.length-1].getElementsByTagName("div")[0];for(var d=1;d<e.cells.length-1;d++){e.cells[d].style.backgroundImage=""}f.style.backgroundImage=""}eventManager.stopPropagation()}};TabPage.prototype.addParam=function(a,b){this.params.push({key:a,value:b})};TabPage.prototype.getUrl=function(){if(this.src){var d="";for(var b=0;b<this.params.length;b++){var c=this.params[b];d+="&"+c.key+"="+encodeURI(c.value)}var a=this.src;if(a.indexOf("/")==0){if(a.indexOf(contextPath)!=0){a=contextPath+a}}if(a.indexOf("?")<0){if(d.length>0){d="?"+d}d=d.replace("&","")}return a+d}return null};TabPage.prototype.hideTitle=function(){this.isHidden=true;this.__titleTD.style.display="none"};TabPage.prototype.showTitle=function(){this.isHidden=false;this.__titleTD.style.display=""};TabPage.prototype.getWindow=function(){var a=window;if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){a=this.iframe.contentWindow}else{a=this.group.noCacheIframe.contentWindow}}return a};TabPage.prototype.getDocument=function(){var a=document;if(this.type==TABPANE_TYPE_IFRAME){if(this.cache){a=this.iframe.document||this.iframe.contentDocument}else{a=this.group.noCacheIframe.document||this.group.noCacheIframe.contentDocument}}return a};TabPage.prototype.getTabPane=function(){return this.group};TabPage.prototype.getWidth=function(){if(this.titleWidth==0){if(this.title){return(getTextWidth(this.title)+12)}else{return 80}}return this.titleWidth};function getTextWidth(c){var b=document.createElement("span");b.innerHTML=c;document.body.appendChild(b);var a=b.offsetWidth;document.body.removeChild(b);return a};function ComboSelect(a){this.dataType=EOS.dataType;this.xtype="combo";this.id=a;this.Obj=a;this.inputObject=null;this.eventObject=null;this.hiddenObject=null;this.canClose=true;this.container=null;this.focusStatus=false;this.mouseOffset=null;this.showStatus=false;this.win=window;this.textField=null;this.valueField=null;this.filterField=null;this.submitXpath=null;this.xpath=null;this.dataXML=null;this.showMoreDay=true;this.date=null;this.timer=null;this.timeSelect=null;this.width=null;this.optionsWidth=null;this.optionsHeight="180px";this.allowInput=false;this.filterField=null;this.startWith=true;this.isFirst=true;this.__subComponent=[];this.defaultText="";this.validateFunc=function(){return true};this.validate=this.validateFunc;this.isFirstLoad=true;this.initParamFunc=null;this.nullText=null;this.filterType="startwith";this.showValue=false;this._showAll=true;this.queryReturnValue=null;this.queryParamsInfo=null;this.queryInoutParams=null;PageControl.add(this.id,this)}ComboSelect.prototype.onPageLoad=function(){PageControl.registerRelation(this.linkId,this.id);var b=this;function a(){b.init();b.loadData();b.refresh()}if(EOS.loader.isReady){a()}else{eventManager.add(window,"load",a)}};ComboSelect.prototype.reset=function(){this.value=this.resetValue;this.setValue(this.value)};ComboSelect.currentComboSelect=null;ComboSelect.editorContainer=null;ComboSelect.doc=document;ComboSelect.prototype.showEditor=function(a){this.container.style.display="";try{this.inputObject.focus()}catch(b){}};ComboSelect.prototype.hideEditor=function(a){this.hide();if(this.container){this.container.style.display="none"}};ComboSelect.prototype.getSelectEntity=function(){return this.selectEntity};ComboSelect.prototype.setValue=function(d,c){var b=this.getEntityByValue(d);if(!b){if(this.allowInput){this.hiddenObject.value=d;this.inputObject.value=d;return true}else{return false}}var a=b.__index;return this.selectOptionByIndex(a,c)};ComboSelect.prototype.selectOptionByIndex=function(a,b){var c=this.optionsTable.tBodies[0].rows;if(!isNaN(a)&&c&&c.length>0){this.selectOption(c[a],b);return true}return false};ComboSelect.prototype.getValue=function(){if(!this.allowInput){return this.hiddenObject.value}var a=this.getEntityByText();return a?a.getProperty(this.valueField):this.inputObject.value};ComboSelect.prototype.getDisplayValue=function(a){var b=this.getEntityByValue(a);return b?b.getProperty(this.textField):a};ComboSelect.prototype.getText=function(){return this.inputObject.value};ComboSelect.prototype.getEntityByValue=function(a,e){var f=this.dataset?this.dataset.getLength():0;if(this.hiddenObject!=undefined){a=""+(a||this.hiddenObject.value||"")}(e===true)&&(a=a.toLowerCase());for(var d=0;d<f;d++){var c=this.dataset.get(d);c.__index=d;var b=c?c.getProperty(this.valueField):null;if(b!==undefined&&b!==null){(e===true)&&(b=(""+b).toLowerCase());if(a===b){return c}}}return null};ComboSelect.prototype.getEntityByText=function(a,e){var f=this.dataset?this.dataset.getLength():0;if(this.inputObject!=undefined){a=""+(a||this.inputObject.value||"")}(e===true)&&(a=a.toLowerCase());for(var d=0;d<f;d++){var c=this.dataset.get(d);var b=c?c.getProperty(this.textField):null;if(b!==undefined&&b!==null){(e===true)&&(b=(""+b).toLowerCase());if(a===b){c.__index=d;return c}}}return null};ComboSelect.prototype.setWidth=function(a){this.width=a+"";this.initSize()};ComboSelect.prototype.getWidth=function(){return this.width};ComboSelect.prototype.initSize=function(){if(this.width){this.width=this.width+"";this.container.style.width=this.width;if(this.container.offsetWidth!=0){if(this.width.indexOf("%")!=-1){if(isFF){this.inputObject.style.width=this.width}else{if(isIE){this.container.style.width="";this.inputObject.style.width=this.width}}}else{if(this.width.indexOf("px")!=-1){this.inputObject.style.width=this.width.replace("px","")-17}else{this.inputObject.style.width=this.width-17}}}}};ComboSelect.prototype.setPosition=function(f,b,c,a){try{this.hide();if(this.container){this.width=c||this.width;this.height=a||this.height;this.container.style.position="absolute";this.container.style.width=c;var g=getMaxZindex(document);if(this.container.style.zIndex!=g){this.container.style.zIndex=g}this.container.style.display=isFF?"-moz-inline-box":"inline";this.container.style.top=b;this.container.style.left=f;this.eventObject.style.height=a;this.container.style.height=a;this.inputObject.style.height=a;this.inputObject.style.width=c-17}}catch(d){}};ComboSelect.prototype.init=function(){var combo=this;if(this.inited===true||this.beforeInit()===false){return}if(this.isIeMode==true){this.inited=true;this.select=$id(this.id+"_select");this.select.readOnly=this.readOnly;this.select.disabled=this.disabled;this.select.style.width=this.width;this.select.onchange=function(){var entity=this.options[this.selectedIndex].entity;this.selectEntity=entity;combo._onChange();combo.setSubComponent(entity)};return}this.filterField=this.filterField||this.textField;this.container=$id(this.id+"_container");this.inputObject=$id(this.id+"_input");this.hiddenObject=$id(this.id+"_hidden");this.readonly=(this.readonly===true||this.readonly===false)?this.readonly:this.readOnly;this.inputObject.readOnly=!!this.readonly;this.hiddenObject.readOnly=!!this.readonly;this.inputObject.disabled=!!this.disabled;this.hiddenObject.disabled=!!this.disabled;this.eventObject=$id(this.id+"_button");this.button=this.eventObject;this.button.style.verticalAlign="bottom";this.text=this.inputObject;this.hidden=this.hiddenObject;this.resetValue=this.value;var form=getFormByObj(this.inputObject);if(form!=null){initEosControlReset(form,this)}var comboSelect=this;this.eventObject.src=COMBOSELECT_BTN;this.eventObject.onmouseover=function(){if(comboSelect.getDisabled()||comboSelect.getReadOnly()){return}this.src=COMBOSELECT_BTN_OVER};this.eventObject.onmouseout=function(){if(comboSelect.getDisabled()||comboSelect.getReadOnly()){return}this.src=COMBOSELECT_BTN};this.eventObject.onmousedown=function(){if(comboSelect.getDisabled()||comboSelect.getReadOnly()){return}this.src=COMBOSELECT_BTN_DOWN};this.initSize();this.inputObject.value=this.defaultText;this.validate=(typeof this.validateFunc)=="string"?eval(this.validateFunc):this.validateFunc;this.startWith=(this.filterType.toLowerCase()!="like");this.initEvent();this.inited=true;this.afterInit()};ComboSelect.prototype.isFocus=function(){return this.focusStatus};ComboSelect.prototype.cancleFilter=function(a){var c=this.optionsTable.tBodies[0].rows;for(var b=0;b<c.length;b++){c[b].style.display=""}return c.length};ComboSelect.prototype.filter=function(){var a=this.inputObject.value;var b=0;if(a!==undefined&&a!==null){b=this.doFilter(a)}else{b=this.cancleFilter(a)}return b};ComboSelect.prototype.getFilterNum=function(){var c=0;var b=this.optionsTable.tBodies[0].rows;for(var a=0;a<b.length;a++){if(b[a].style.display!="none"){c++}}return c};ComboSelect.prototype.doFilter=function(k,a){var l=this.optionsTable.tBodies[0].rows;k=k||this.inputObject.value||"";k=k.toLowerCase();var e=0;var h=null;var c=false;for(var d=0;d<l.length;d++){var b=this.dataset.get(d);var g=b?b.getProperty(this.filterField):null;l[d].style.display=a===false?"":"none";if(this.selectOptionRow==l[d]){c=true}if(g!==undefined&&g!==null){g=(""+g).toLowerCase();var j=g.indexOf(k);if(this.startWith&&j==0||!this.startWith&&j>=0){l[d].style.display="";if(!h){h=l[d];this.activeOption(h)}e++}}}if(c){}return e};ComboSelect.prototype._syncInputValue=function(){if(this.hiddenObject.value!==this.inputObject.value){this.hiddenObject.value=this.inputObject.value;this.selectEntity=new Entity();this.selectEntity.setProperty(this.valueField,this.hiddenObject.value);this.selectEntity.setProperty(this.textField,this.hiddenObject.value);return true}return false};ComboSelect.prototype._onChange=function(){if(this.onChangeFunc){if(typeof(this.onChangeFunc)=="string"){this.onChangeFunc=eval(this.onChangeFunc)}this.onChangeFunc(this.selectEntity,this)}};ComboSelect.prototype.onInputBlur=function(){var g=this;if(checkInput(this.inputObject)==false){return}var d=true;if(this.validate){d=this.validate()}if(d){if(!g.showStatus){var c=g.getFilterNum();var f=g.hiddenObject.value;var b=g.getEntityByRow(g.activeOptionRow);var a,e;if(b){a=b.getProperty(g.valueField);e=b.getProperty(g.textField)}if(f!=a&&e==g.inputObject.value){g.selectOption()}else{if(g.allowInput){}else{if(!g.allowInput){g.selectOption(g.selectOptionRow,(f!=a))}}}}}};ComboSelect.prototype.initEvent=function(){var c=this;var f=","+[EOSKey.TAB,EOSKey.ENTER,EOSKey.SHIFT,EOSKey.CTRL,EOSKey.PAUSE,EOSKey.CAPSLOCK,EOSKey.PAGEUP,EOSKey.PAGEDOWN,EOSKey.END,EOSKey.HOME,EOSKey.LEFT,EOSKey.UP,EOSKey.RIGHT,EOSKey.DOWN,EOSKey.INSERT,EOSKey.WIN,EOSKey.WIN_R,EOSKey.MENU,EOSKey.F1,EOSKey.F2,EOSKey.F3,EOSKey.F4,EOSKey.F5,EOSKey.F6,EOSKey.F7,EOSKey.F8,EOSKey.F9,EOSKey.F10,EOSKey.F11,EOSKey.F12,EOSKey.NUMLOCK,EOSKey.SCROLLLOCK].join(",")+",";function a(g){if(c.getDisabled()||c.getReadOnly()){return}if(this.optionsTable&&this.optionsTable.tBodies&&this.optionsTable.tBodies[0]){return}g=g||window.event;$error("key:"+g.keyCode);eventManager.stopEvent(g);if(g.keyCode==EOSKey.ENTER){eventManager.stopEvent();if(!c.showStatus){c.show(true)}else{var h=c.getFilterNum();if(h>0||!c.allowInput){c.selectOption(c.actionOptionRow)}c.hide()}}else{if(g.keyCode==EOSKey.ESC){if(c.showStatus){c.hide()}else{PageControl.setFocus(c);c.show(true)}eventManager.stopEvent(g)}else{if(g.keyCode==EOSKey.UP){if(!c.showStatus){c.show(true)}else{c.activePrevOption()}eventManager.stopEvent(g)}else{if(g.keyCode==EOSKey.DOWN){if(!c.showStatus){c.show(true)}else{c.activeNextOption()}eventManager.stopEvent(g)}else{if(f.indexOf(","+g.keyCode+",")<0&&(!c.beforeFilter||c.beforeFilter(c,g.keyCode)!==false)){c.show();eventManager.stopEvent(g);if(c.afterFilter){c.afterFilter(c)}if(c.afterFilter){c.afterFilter(c)}var h=c.filter();if(c.allowInput){if(c._syncInputValue()){c._onChange()}}}}}}}eventManager.stopEvent()}function d(g){if(c.getDisabled()||c.getReadOnly()){return}if(g.keyCode!=EOSKey.ESC){return}g=g||window.event;if(g.keyCode==EOSKey.ENTER){eventManager.stopEvent();var h=c.getFilterNum();if(h<1&&c.allowInput){if(c._syncInputValue()){c._onChange()}}}else{if(g.keyCode==EOSKey.TAB){c.onInputBlur()}else{if(f.indexOf(","+g.keyCode+",")<0&&(!c.beforeFilter||c.beforeFilter(c,g.keyCode)!==false)){var h=c.filter();eventManager.stopEvent(g);if(c.afterFilter){c.afterFilter(c)}c.show()}}}}function e(h){if(c.getDisabled()||c.getReadOnly()){return}h=h||window.event;var g=eventManager.getWheel(h);if(g<0){c.activeNextOption();c.selectOption()}else{if(g>0){c.activePrevOption();c.selectOption()}}eventManager.stopEvent()}function b(){eventManager.stopEvent();if(c.getDisabled()||c.getReadOnly()){return}c.eventObject.src=COMBOSELECT_BTN_OVER;if(c.showStatus){c.hide()}else{c.show(true)}}if(!this.inputObject.readOnly){eventManager.add(this.inputObject,"blur",function(g){c.onInputBlur(g)})}this.container.onmousedown=function(){var g=eventManager.getElement();if(g==c.inputObject){if(c.showStatus){eventManager.stopEvent()}try{c.inputObject.focus()}catch(h){}}else{if(g==c.eventObject){if(c.showStatus){eventManager.stopEvent()}}}};eventManager.add(this.inputObject,"keyup",a);eventManager.add(this.eventObject,"click",function(){eventManager.stopEvent()});eventManager.add(this.eventObject,"mouseup",b);eventManager.add(this.inputObject,"focus",function(){c.inputObject.select()})};ComboSelect.prototype.show=function(d){PageControl.addtoStack(this);if(this.optionsDiv&&this.optionsDiv.style&&!this.disabled){if(this.optionsWidth&&this.optionsWidth.indexOf("%")>0){this.optionsDiv.style.width=this.container.clientWidth*parseInt(this.optionsWidth)/100}else{this.optionsDiv.style.width=this.optionsWidth||isFF?this.container.offsetWidth-8:this.container.offsetWidth}if(d===true){if(this.optionsTable&&this.optionsTable.tBodies&&this.optionsTable.tBodies[0]){this.cancleFilter()}}this.optionsDiv.style.display="block";var h=getMaxZindex(document);if(this.optionsDiv.style.zIndex!=h){this.optionsDiv.style.zIndex=h}var a=this.inputObject.clientHeight;var j=this.optionsDiv.clientHeight;var b=getScreenPosition(this.inputObject,this.win);b={top:b[1]+a,left:b[0]};var i={top:b.top,left:b.left};this.optionsDiv.style.display="none";if(isIE){if(document.body.offsetHeight<(b.top+j)){if(b.top-j-a>0){i.top-=j;i.top-=a}}}else{if(document.body.scrollHeight<(b.top+j)){if(b.top-j-a>0){i.top-=j;i.top-=a}}}setElementXY(this.optionsDiv,[i.left,i.top]);this.optionsDiv.style.display="block";try{this.inputObject.focus()}catch(g){}this.showStatus=true;if(isIE){var f=this.optionsDiv.firstChild;f.style.width=f.nextSibling.offsetWidth;f.style.height=f.nextSibling.offsetHeight;f.style.top=f.nextSibling.offsetTop;f.style.left=f.nextSibling.offsetLeft}var c=this.optionsDiv.firstChild.nextSibling;initShadow(c);if(isFF){c.nextSibling.style.width=this.optionsDiv.offsetWidth+7}}};ComboSelect.prototype.hide=function(){if(this.optionsDiv&&this.optionsDiv.style){this.optionsDiv.style.display="none"}this.showStatus=false};ComboSelect.prototype.onLoadData=function(){};ComboSelect.prototype.addParam=function(a,b){this.paramList=this.paramList||[];this.paramList.push({key:a,value:b})};ComboSelect.prototype.loadData=function(){if(this.beforeLoadData()===false){return}if(!this.linkId&&!this.queryAction&&this.xpath){var xmlZone=document.getElementById(this.id+"_xml");this.dataXML=xmlZone?xmlZone.innerHTML:null}else{if(this.linkId&&this.linkId.indexOf("xml:")==0){var xmlZone=document.getElementById(this.linkId.substring(4));this.dataXML=xmlZone?xmlZone.innerHTML:null}else{if(this.linkId&&this.isFirstLoad){this.isFirstLoad=false;var linkCombo=$id(this.linkId);if(linkCombo&&linkCombo.xtype=="combo"){var parentValue=linkCombo.getSelectEntity();if(parentValue){this.freshFromEntity(parentValue)}}return}}}var xmlDom;var _dataXML=this.dataXML;this.dataset=new Dataset();if(this.nullText!==null){if(!this.isIeMode){var emptyEntity=new Entity();emptyEntity.setProperty(this.valueField,"");emptyEntity.setProperty(this.textField,this.nullText);this.setValue("");this.dataset.addEntity(emptyEntity)}else{}}if(_dataXML){this.dataset.appendDataset(Dataset.create(_dataXML,this.xpath));return}if(this.onLoadData()!==false){if(!this.queryAction){return}var ajax=new HideSubmit(this.queryAction);var param="";var paramFn="";if(this.initParamFunc){try{paramFn=eval(this.initParamFunc+"(ajax)")}catch(e){try{paramFn=eval(this.initParamFunc+"()")}catch(e1){$handle(e1)}}}if(this.dataType=="json"){param={};EOS.apply(param,this.queryParam);EOS.apply(param,this.pageParam);EOS.apply(param,paramFn)}else{param="";param+=this.queryParam||"";param+=this.pageParam||"";param+=paramFn||""}if(this.filterID){var form=$id(this.filterID);if(form){for(var i=0;i<form.elements.length;i++){var elem=form.elements[i];if(elem.name){ajax.addParam(elem.name,elem.value)}}}}if(this.paramList){for(var i=0;i<this.paramList.length;i++){var elem=this.paramList[i];if(elem){ajax.addParam(elem.key,elem.value)}}}if(this.queryReturnValue){ajax.setOutParam(this.queryReturnValue)}if(this.queryParamsInfo){ajax.setParamsInfo(this.queryParamsInfo)}if(this.queryInoutParams){ajax.setInoutParam(this.queryInoutParams)}var _this=this;ajax.onSuccess=function(){var pagecond=0;if(_this.dataType=="json"&&ajax.retJson){var xp=_this.xpath;var arr=ajax.retJson;if(xp){xp=xp.split("/");for(var i=0,len=xp.length;i<len;i++){arr=arr[xp[i]]}}_this.dataset=Json2Dataset(arr);if(ajax.retJson.page){pagecond=ajax.retJson.page.length}}else{xmlDom=ajax.retDom;_this.dataset=Dataset.create(xmlDom,_this.xpath,null);pagecond=xmlDom.selectSingleNode("/root/data/page")}if((_this.nullText!==null&&_this.nullText!==undefined)&&!_this.isIeMode){var emptyEntity=new Entity();emptyEntity.setProperty(_this.valueField,"");emptyEntity.setProperty(_this.textField,_this.nullText);_this.setValue("");_this.dataset.insertEntity(emptyEntity,true,0)}else{}if(_this.afterLoadData){_this.afterLoadData()}};ajax.loadData(param)}};ComboSelect.prototype.getEntityByRow=function(b){if(!b){return null}var c=b.getAttribute("__entity_rowno")/1;var a=this.dataset.get(c);return a};ComboSelect.prototype.disable=function(){this.disabled=true;this.inputObject.disabled=true;this.hiddenObject.disabled=true;this.hide()};ComboSelect.prototype.enable=function(){this.disabled=false;this.inputObject.disabled=false;this.hiddenObject.disabled=false};ComboSelect.prototype.setDisabled=function(a){if(a){this.disable()}else{this.enable()}if(a){this.eventObject.style.cursor="default"}else{this.eventObject.style.cursor="pointer"}};ComboSelect.prototype.getDisabled=function(a){return this.disabled};ComboSelect.prototype.setReadonly=function(a){this.inputObject.readOnly=a||true};ComboSelect.prototype.setReadOnly=function(a){this.readonly=a;this.inputObject.readOnly=a;if(a){this.eventObject.style.cursor="default"}else{this.eventObject.style.cursor="pointer"}};ComboSelect.prototype.getReadOnly=function(a){return this.readonly};ComboSelect.prototype.firstOptionRow=function(d,a){var c=this.optionsTable.tBodies[0].rows;d=d||0;a=a||c.length;d=d<0?0:d;a=a<0?0:a;a=a>c.length?c.length:a;d=d>a?a:d;for(var b=d;b<a;b++){if(c[b].style.display!="none"){return c[b]}}return null};ComboSelect.prototype.lastOptionRow=function(d,a){var c=this.optionsTable.tBodies[0].rows;d=d||0;a=a===0?0:(a||c.length);d=d<0?0:d;a=a>c.length-1?c.length-1:a;a=a<0?0:a;d=d>a?a:d;if(c.length>0){for(var b=a;b>=d;b--){if(c[b].style.display!="none"){return c[b]}}}return null};ComboSelect.prototype.activePrevOption=function(b){b=b||this.activeOptionRow;var c=0;if(b){c=b.rowIndex-1}var a=this.lastOptionRow(0,c);if(a&&a!=b){this.activeOption(a)}};ComboSelect.prototype.activeNextOption=function(c){c=c||this.activeOptionRow;var a=0;if(c){a=c.rowIndex+1}var b=this.firstOptionRow(a);if(b&&b!=c){this.activeOption(b)}};ComboSelect.prototype.activeOption=function(a){if(this.activeOptionRow){removeClass(this.activeOptionRow,"eos-selectoption")}addClass(a,"eos-selectoption");this.autoScroll(a);this.activeOptionRow=a};ComboSelect.prototype.selectOption=function(row,refreshSub){this._showAll=true;var _change=this.selectOptionRow!=row;row=row||this.activeOptionRow;if(!row){return}var entity=this.getEntityByRow(row);if(entity){if(this.activeOptionRow){removeClass(this.activeOptionRow,"eos-selectoption")}if(row.offsetTop<this.optionsDivCore.scrollTop+2){this.optionsDivCore.scrollTop=row.offsetTop}if(row.offsetTop>this.optionsDivCore.scrollTop+this.optionsDivCore.clientHeight-4){this.optionsDivCore.scrollTop=row.offsetTop-this.optionsDivCore.clientHeight+row.offsetHeight}this.selectEntity=entity;this.inputObject.value=this.selectEntity.getProperty(this.textField);this.hiddenObject.value=this.selectEntity.getProperty(this.valueField);if(this.activeOptionRow){removeClass(this.activeOptionRow,"eos-selectoption")}this.selectOptionRow=row;this.activeOptionRow=row;addClass(this.activeOptionRow,"eos-selectoption");if(this.onChangeFunc&&!this.isFirst){if(typeof(this.onChangeFunc)=="string"){this.onChangeFunc=eval(this.onChangeFunc)}this.isFirst=false;_change&&this.onChangeFunc(this.selectEntity,this)}this.isFirst=false}if(refreshSub!==false){this.setSubComponent(entity)}};ComboSelect.prototype.registerSubComponent=function(b){var a=PageControl.getOne(b);a.parentCmp=this;this.__subComponent.push(a)};ComboSelect.prototype.setSubComponent=function(b){var d;if(b){d=b.name;b.name=this.submitXpath||d}for(var c=0;c<this.__subComponent.length;c++){var a=this.__subComponent[c];if(a&&a.freshFromEntity){a.freshFromEntity(b)}}if(b){b.name=d}};ComboSelect.prototype.freshFromEntity=function(a){if(this.queryAction){if(a){if(this.dataType=="json"){this.queryParam=a.toJson()}else{this.queryParam=a.toString()}}else{this.queryParam=null}this.loadData()}else{if(this.linkField){if(a){this.dataset=a.getProperty(this.linkField);if(!this.dataset){this.dataset=new Dataset(this.linkField);a.setProperty(this.linkField,this.dataset)}}else{this.dataset=new Dataset(this.linkField)}}}this.refresh()};ComboSelect.prototype.refresh=function(h){this.init();if(this.isIeMode==true){var s=this.dataset?this.dataset.getLength():0;while(this.select.options.length!=0){this.select.options.remove(this.select.options[0])}if(this.nullText!==null){var m=new Option();m.text=this.nullText;m.value="";this.select.options.add(m)}for(var i=0;i<s;i++){var j=this.dataset.get(i);var k=j.getProperty(this.valueField);var c=j.getProperty(this.textField);var m=new Option();m.text=c;m.value=k;if(k==this.value){m.selected=true}m.entity=j;this.select.options.add(m)}var m=this.select.options[this.selectedIndex||0];if(m!=null){j=m.entity}if(j!=null){}this.setSubComponent(j);return}if(this.beforeRefresh()===false){return}var e=this;this.dataset=h||this.dataset;var s=this.dataset?this.dataset.getLength():0;if(this.noOrgOptionsHeight==true){this.optionsHeight=((s>10?10:s)*21+2)}if(this.optionsDiv){removeElement(this.optionsDiv)}this.optionsDiv=$createElement("div");this.optionsDiv.className="eos-combo-optiondiv";this.inputObject.value="";this.hiddenObject.value="";function b(){var o=eventManager.getElement();if(o!=e.eventObject&&!e.inputObject.getAttribute("_isFocus")&&!e.eventObject.getAttribute("_isFocus")){if(!e.allowInput){e.inputObject.value=e.selectEntity.getProperty(e.textField);e.hiddenObject.value=e.selectEntity.getProperty(e.valueField)}e.hide()}}if(!this.optionsHeight){this.noOrgOptionsHeight=true;this.optionsHeight=((s>10?10:s)*21+2)}this.optionsDiv.style.height=this.optionsHeight;document.body.appendChild(this.optionsDiv);this.optionsDiv.onmousedown=function(){eventManager.stopEvent()};function l(u){u=u||window.event;var o=u.srcElement||u.target;eventManager.stopPropagation();if(o.tagName.toLowerCase()!="tr"){while((o=o.parentNode)){if(o.tagName&&o.tagName.toLowerCase()=="tr"&&o.getAttribute("__entity_rowno")){break}}}var t=getParentByTagName(o,"table");return t&&t.className=="eos-combo-optiontable"?o:null}function n(o){if(e.selectOptionRow){removeClass(e.selectOptionRow,"eos-selectoption")}e.optionsDiv.setAttribute("_isOver",true);var t=l(o);addClass(t,"eos-selectoption");if(e.activeOptionRow==t){return}if(e.activeOptionRow){removeClass(e.activeOptionRow,"eos-selectoption")}e.activeOptionRow=t}function d(o){e.optionsDiv.setAttribute("_isOver",false)}function q(o){var t=l(o);if(t){e.selectOption(t)}e.hide();try{e.inputObject.focus()}catch(u){}}eventManager.add(this.optionsDiv,"mouseover",n);eventManager.add(this.optionsDiv,"mouseout",function(){setTimeout(d,300)});eventManager.add(this.optionsDiv,"click",q);function r(){eventManager.stopPropagation()}eventManager.add(this.optionsDiv,"mousedown",r);var p=['<div class="eos-combo-optiondiv-core"><table  class="eos-combo-optiontable" border="0" cellspacing="0" cellpadding="0" width="100%" ><tbody>'];for(var i=0;i<s;i++){var j=this.dataset.get(i);var k=j.getProperty(this.valueField);var c=j.getProperty(this.textField);p.push('<tr __entity_rowno="'+i+'" >');p.push("<td><div><nobr>");p.push(c==""?" ":c);p.push("</nobr></div></td>");if(this.showValue){p.push("<td><div>");p.push(k);p.push("</div></td>")}p.push("</tr>")}p.push("</tbody></table ></div>");var a=window.isIE?"<iframe src='"+blankURL+'\' SCROLLING="no" style="overflow:hidden;position:absolute;z-index:-1;" frameborder="0" ></iframe>':'<span style="display:none;"></span>';this.optionsDiv.innerHTML=a+p.join("\n");this.optionsDiv.childNodes[1].style.height=this.optionsDiv.style.height;this.optionsDiv.childNodes[1].style.width=this.optionsDiv.style.width;this.optionsDivCore=this.optionsDiv.childNodes[1];this.optionsTable=this.optionsDivCore.firstChild;var f=false;if(this.value){this.setValue(this.value,false)}else{if(this.optionsTable&&this.optionsTable.tBodies&&this.optionsTable.tBodies[0]){var g=this.optionsTable.tBodies[0].rows;if(g&&g.length>0){this.selectOption(g[0]);f=true}}}if(!f){this.setSubComponent(this.getEntityByValue(this.value))}this.afterRefresh()};ComboSelect.prototype.autoScroll=function(e){var c=e.offsetTop;var a=c+e.offsetHeight;var d=this.optionsDivCore.scrollTop;var b=d+this.optionsDivCore.clientHeight;if(c<d){this.optionsDivCore.scrollTop=c}else{if(a>b){this.optionsDivCore.scrollTop=d+a-b}}};ComboSelect.prototype.boundTree=function(b,d,a){if($id(b)==null){alert("Can not find tree:"+treeID);return}var c;if($id(b).model!=null){c=$id(b+"_container")}else{c=$id(b+"_container").parentNode}d=d||"";a=a||"";this.afterRefresh=function(){this.hidden.value=d;this.text.value=a;this.optionsDiv.childNodes[1].appendChild(c);c.onclick=function(){eventManager.stopPropagation()}}};ComboSelect.prototype.beforeInit=function(){};ComboSelect.prototype.afterInit=function(){};ComboSelect.prototype.beforeLoadData=function(){};ComboSelect.prototype.afterLoadData=function(){};ComboSelect.prototype.beforeRefresh=function(){};ComboSelect.prototype.afterRefresh=function(){};var DATACELL_STYLE_ROW1="EOS_table_row";var DATACELL_STYLE_ROW2="ROW_STYLE2_NOCSS";var DATE_FORMAT="yyyy-MM-dd";var TIME_FORMAT="HH:mm:ss";var DATETIME_FORMAT="yyyy-MM-dd HH:mm:ss";var PICTURE_BLANK=PICTURE_BLANK||"";function Datacell(a){this.dataType=EOS.dataType;this.id=a;PageControl.add(a,this);this.activeRow=null;this.activeCell=null;this.table=null;this.container=null;this.pilot=null;this.thead=null;this.tbody=null;this.isCount=false;this.queryAction=null;this.xpath=null;this.submitAction=null;this.dataset=null;this.sortParam=null;this.queryParam=null;this.pageParam=null;this.editor=null;this.fields=new Array();this.keys=new Object();this.bodyDiv=null;this.scrollEvent=true;this.fixedLeft=0;this.editorDiv=null;this.editorContainer=null;this.styleEntity=null;this.__subComponent=new Array();this.linkField=null;this.linkId=null;this.filterId=null;this.paramFormId=null;this.rowStyles=[DATACELL_STYLE_ROW1,DATACELL_STYLE_ROW2];this.styleRow=null;this.status=Datacell.STATUS_BLANK;this.isModefied=false;this.cellHeight=20;this.heightExceptBody=23+25;this.headHeight=23;this.toolBarHeight=25;this.scrollDiv=null;this.showIndex=true;this.indexCol=null;this.sortArrow=null;this.__pagePilot=[];this.allowAdd=true;this.allowDel=true;this.readonly=false;this.initParamFunc=null;this.SortByServer=false;this.submitXpath=null;this.minColumnWidth=30;this.toolbarLocation=null;this.toolsList="nav,pagesize,edit,custom,info";this.pageSizeList="none";this.defaultColumnWidth=100;this.topToolbarDiv=$createElement("div",{className:"eos-grid-toolbar"});this.topToolbarDiv.style.display="none";this.bottomToolbarDiv=$createElement("div",{className:"eos-grid-toolbar"});this.topToolbarDiv.style.display="none";this.isFirstLoad=true;this.pageSize=10;this.datacellContainer=null;this.quickEdit=true;this.sortAt="client";this.rowSelectStyleClass="eos-row-selected";this.rowEvenStyleClass="eos-row-even";this.rowStyleClass="eos-row";this.headTextAlign="left";this.width=500;this.height=300;this.queryReturnValue=null;this.queryParamsInfo=null;this.queryInoutParams=null;this.submitReturnValue=null;this.submitParamsInfo=null;this.submitInoutParams=null;this.entityType=null;this.entityName=null}Datacell.prototype.syncRefresh=true;Datacell.prototype.refreshCell=function(b,e){var a=this;var c=b.getAttribute("fieldId");e=e||a.keys[c];if(c==Datacell.__INDEX_NAME||a.beforeRefreshCell(b,e)===false){return}var f=b.firstChild;var d=e.viewType;f.innerHTML=a.createCellValue(b,e)};Datacell.prototype.activeMe=function(){Datacell.activeGrid=this};Datacell.prototype.onPageLoad=function(){PageControl.registerRelation(this.linkId,this.id);var c=this;var b=function a(){c.init();c.loadData();c.refresh();if(!isIE){c.autoResizeS1();c.autoResizeS2()}};if(EOS.loader.isReady){b()}else{EOS.onReady(b)}};Datacell.prototype.createCellValue=function(cell,field){if(!cell){return}var row=cell.parentNode;var entity=this.getEntity(row);var key=cell.getAttribute("fieldId");if(key==Datacell.__INDEX_NAME){return}var field=this.keys[key];var cellText=entity.getProperty(field.fieldName);if(field.onRefreshFunc){if(typeof(field.onRefreshFunc)=="string"){field.onRefreshFunc=eval(field.onRefreshFunc)}cellText=field.onRefreshFunc(cellText,entity,cell.parentNode.rowIndex,cell.cellIndex,this)}else{if(field.expression){cellText=runExpression(field.template,entity)}else{if(field.editor){cellText=htmlConversion(field.editor.getDisplayValue(cellText))}else{cellText=htmlConversion(cellText===undefined||cellText===null?field.nullText:cellText)}}}cellText=cellText===undefined||cellText===null?htmlConversion(field.nullText):cellText;return cellText};Datacell.prototype.clear=function(){if(this.tbody&&this.table){var a=this.tbody.cloneNode(false);this.table.replaceChild(a,this.tbody);this.tbody=a}if(this.dataset){this.dataset.clear()}this.dataset=null;this.styleRow=null};Datacell.prototype.clearup=function(){for(var b in this){try{this[b]=null}catch(a){$handle(a)}}};Datacell.prototype.getField=function(a){if(a===null||a===undefined){return a}if(typeof a=="number"){return this.fields[a]}if(typeof a=="string"){return this.getFieldByName(a)}if(String(a.tagName).toLowerCase()=="td"){var b=a.getAttribute("fieldId");if(b==Datacell.__INDEX_NAME){return null}var c=this.keys[b];return c}return a};Datacell.prototype.getFieldByName=function(b){for(var a=0;a<this.fields.length;a++){if(this.fields[a].fieldName==b){return this.fields[a]}}return null};Datacell.prototype.getFieldsByName=function(c){var b=[];for(var a=0;a<this.fields.length;a++){if(this.fields[a].fieldName==c){b.push(this.fields[a])}}return b};Datacell.prototype.getFieldCount=function(){return this.fields.length};Datacell.prototype.setTitle=function(c,a){c=this.getField(c);if(c){c.labelSpan.innerHTML=a;var b=c.frozeHeadCell;if(b&&b.firstChild&&b.firstChild.firstChild){b.firstChild.firstChild.innerHTML=a}}};Datacell.prototype.setAllowModify=function(b,a){b=this.getField(b);if(b){b.allowModify=a}};Datacell.prototype.copyRow=function(a){return this.cloneEntity(null,a)};Datacell.prototype.cloneEntity=function(a,b){a=a||this.getEntity(b||this.activeRow);if(a){a=a.clone();a.status=Entity.STATUS_NEW}return a};Datacell.prototype.getCellValue=function(a){var e=a.parentNode;var b=e?this.getEntity(e):null;if(b){var d=this.getField(a);var c=d.fieldName;return b.getProperty(c)}return null};Datacell.prototype.setCellValue=function(a,d){if(!a){return false}var f=a.parentNode;var b=f?this.getEntity(f):null;if(b){var e=this.getField(a);var c=e.fieldName;b.setProperty(c,d);this.refreshCell(a);this.refreshRow(f);b.status=Entity.STATUS_MODIFIED;this.isModefied=true;return true}return false};Datacell.prototype.getCell=function(d,a){var b=parseInt(d);if(!isNaN(b)){var c=this.tbody.rows[b];if(c){return this.getCellByRow(c,a)}}return null};Datacell.prototype.getCellByRow=function(d,a){if(isNaN(a)){var c=a;for(var b=0;b<d.cells.length;b++){if(d.cells[b].getAttribute("fieldId")==c){return d.cells[b]}}}else{return d.cells[a]}};Datacell.prototype.getCellAtRow=function(a,b){var c=this.getRowByCell(a);return this.getCellByRow(c,b)};Datacell.prototype.getCellByCurrRow=function(a){if(this.activeRow){return this.getCellByRow(this.activeRow,a)}else{return null}};Datacell.prototype.getRow=function(a){if(typeof a=="number"){return this.getRowAt(a)}if(a.tagName&&a.tagName.toLowerCase()=="td"){return a.parentNode}return a};Datacell.prototype.getRowAt=function(a){try{return this.table.tBodies[0].rows[a]}catch(b){return null}};Datacell.prototype.getRowByCell=function(a){if(a){if(a.parentNode&&a.parentNode.tagName&&a.parentNode.tagName.toLowerCase()=="tr"){return a.parentNode}}return null};Datacell.prototype.getEntityByCell=function(a){var b=this.getRowByCell(a);if(b){return this.getEntity(b)}return null};Datacell.prototype.getCurrRow=function(){return this.activeRow};Datacell.prototype.getValueForEdit=function(a,b){return a.getProperty(b)};Datacell.prototype.init=function(){if(this.inited===true||this.beforeInit()===false){return}if(this.entityType&&!(this.entityType.indexOf("sdo:")==0||this.entityType.indexOf("java:")==0)){this.entityType="sdo:"+this.entityType}this.PAGE_INFO=this.PAGE_INFO||PAGE_INFO;this.PAGE_RECORDINFO=this.PAGE_RECORDINFO||PAGE_RECORDINFO;this.PAGE_INFO_NOCOUNT=this.PAGE_INFO_NOCOUNT||PAGE_INFO_NOCOUNT;this.PAGE_RECORDINFO_NOCOUNT=this.PAGE_RECORDINFO_NOCOUNT||PAGE_RECORDINFO_NOCOUNT;this.activeMe();this.datacellContainer=$id(this.id+"_container");if(this.freezeNumber>0){this.showIndex=true}this.tableMarginLeft=this.showIndex?12:0;this.containerTable=$id(this.id+"_container_table");if(isIE){this.containerTable.className="eos-b-ie "+this.containerTable.className}if((""+this.width).indexOf("%")<1&&(""+this.width).indexOf("p")<1){this.width=parseInt(this.width)+"px"}if((""+this.height).indexOf("%")<1&&(""+this.height).indexOf("p")<1){this.height=parseInt(this.height)+"px"}if(this.freezeNumber&&this.freezeNumber>this.fields.length){this.freezeNumber=this.fields.length}this.paramFormId=this.paramFormId||this.filterId;this.cTop=0;if(!this.toolbarLocation||this.toolbarLocation=="null"){this.containerTD=this.containerTable.tBodies[0].rows[0].cells[0];this.containerTable.tBodies[0].rows[1].style.height="0px";this.containerTable.tBodies[0].rows[1].style.display="none"}else{if(this.toolbarLocation=="top"){this.containerTD=this.containerTable.tBodies[0].rows[1].cells[0];this.toolbarParent=this.containerTable.tBodies[0].rows[0].cells[0];this.toolbarParent.appendChild(this.topToolbarDiv);this.toolbarParent.style.height="25px";this.topToolbarDiv.style.display="block";this.topToolbarDiv.style.borderBottomWidth="1px";this.cTop=this.topToolbarDiv.offsetHeight}else{this.containerTD=this.containerTable.tBodies[0].rows[0].cells[0];this.toolbarParent=this.containerTable.tBodies[0].rows[1].cells[0];this.toolbarParent.appendChild(this.bottomToolbarDiv);this.toolbarParent.style.height="25px";this.bottomToolbarDiv.style.display="block";this.bottomToolbarDiv.style.borderTopWidth="1px"}}this.container=$createElement("div");this.container.className="eos-grid";this.containerTD.appendChild(this.container);this.container.innerHTML="";this.container.style.display="";this.viewport=$createElement("div");this.viewport.className="eos-viewport";this.container.style.width="100%";this.containerTable.style.width=this.width;this.containerTable.style.height=this.height;this.bodyDiv=$createElement("div");this.bodyDiv.className="eos-body-div";this.bodyDivHeight=this.containerTD.offsetHeight-this.headHeight;this.bodyDivHeight=parseInt(this.bodyDivHeight);if(this.bodyDivHeight<0){this.bodyDivHeight=parseInt(this.height)-(this.headHeight+this.toolBarHeight)}if(this.bodyDivHeight>0){this.bodyDiv.style.height=this.bodyDivHeight+"px"}this.headDiv=$createElement("div");this.headDiv.className="eos-head-div";this.headWrap=$createElement("div");this.headDiv.appendChild(this.headWrap);this.container.appendChild(this.viewport);this.cTop=0;if(this.toolbarLocation=="top"){this.topToolbarDiv.style.display="block";this.topToolbarDiv.style.borderBottomWidth="1px";this.cTop=this.topToolbarDiv.offsetHeight}else{this.bottomToolbarDiv.style.display="block";this.bottomToolbarDiv.style.borderTopWidth="1px"}this.viewport.appendChild(this.headDiv);this.viewport.appendChild(this.bodyDiv);this.viewport.style.width=this.width||"100%";this.headDiv.style.width="100%";this.bodyDiv.style.width="100%";this.container.style.display="";this.splitLine=$createElement("div",{className:"eos-split-line"});this.splitLine.style.top=this.cTop+"px";this.container.appendChild(this.splitLine);this.gridMask=$createElement("div",{className:"eos-grid-mask"});this.gridMask.style.width=this.container.style.width;this.gridMask.style.height=this.container.style.height;this.container.appendChild(this.gridMask);this.initPageParam();this.initCSS();this.initHead();this.initFreezeZone();this.initEvent();for(var a=0;a<this.__pagePilot.length;a++){var b=this.__pagePilot[a];b.build()}this.inited=true;this.afterInit()};Datacell.prototype.selectEventRow=function(){var a=eventManager.getElement();var b=getParentByTagName(a,"tr");this.selectRow(b);return b};Datacell.prototype.showCellEditor=function(j,f){if(this.activeEditor&&this.activeCell){this.editorContainer=$id(this.id+"_"+this.activeField.fieldId+"_field_editor_container")||$id(this.activeField.fieldId+"_field_editor_container");var c=this.getEntity(this.activeCell);var j=this.getValueForEdit(c,this.activeField.fieldName);if(this.dict){j=getDictKey(this.dict,j)}try{if(this.editorContainer.parentNode!=document.body){if(!(this.activeField.editor.constructor==window.RichTextEditor&&isIE)){document.body.appendChild(this.editorContainer)}if(this.activeField.editor.constructor==window.RichTextEditor){var a=this.editorContainer.getElementsByTagName("iframe")[0];if(a){this.activeField.editor.editableContainer=a.contentDocument?a.contentDocument.body:a.document.documentElement.body}}}if(isIE){try{if(this.activeField.editor.constructor==window.RichTextEditor){this.editorContainer.style.width="";this.editorContainer.style.height="";this.activeField.editor.container.style.width="900px"}}catch(g){}}this.activeEditor.hideEditor();var i=getPosition(this.activeCell);if(this.activeEditor.setPosition){this.editorContainer.style.display="";this.editorContainer.onmousedown=function(){eventManager.stopEvent()};if(this.activeEditor.tagName=="SELECT"){this.activeEditor.onmousedown=null;this.editorContainer.onmousedown=null}var k=this.activeEditor.tagName;if(isIE&&k&&k.toLowerCase()=="select"){this.activeEditor.style.display=""}this.activeEditor.setPosition(i.left,i.top,this.activeCell.offsetWidth,this.activeCell.offsetHeight);if(isIE&&k&&k.toLowerCase()=="select"){this.activeEditor.style.display="none"}var d={};d.editor=this.activeEditor;d.datacell=this;d.hide=function(m,e,l){if(this.datacell){if(this.editor==(l.target||l.srcElement)){return}this.datacell.hideCellEditor();Datacell.activeGrid=null}};PageControl.addtoStack(d);var b=this;setTimeout(function(){b.activeEditor.showEditor(b);b.editing=true},1)}if(this.activeEditor.xtype=="combo"){this.activeEditor.setValue(j===undefined||j===null?"":j,true);if(this.activeEditor.setDisplayValue){var h=trim(this.activeCell.innerText);this.activeEditor.setDisplayValue(h)}}else{this.activeEditor.setValue(j===undefined||j===null?"":j);if(this.activeEditor.setDisplayValue){var h=trim(this.activeCell.innerText);this.activeEditor.setDisplayValue(h)}}}catch(g){}}};Datacell.prototype.hideCellEditor=function(){if(this.activeCell&&this.activeEditor){if(this.editing){var j=this.activeCell.parentNode;var f=this.activeEditor.getValue();var a=this.activeValue;var b=f;if(a!=b){var g=this.activeCell.getAttribute("fieldId");if(g==Datacell.__INDEX_NAME){return true}if(!this.activeEditor.validate()){this.editing=false;this.unlocked();this.endEdit();return false}if(this.onUpdateRow(this.activeCell.parentNode)){var i=this.onUpdateCell(this.activeCell,this.activeEntity,this.activeField.fieldName,f);(i!==false)&&this.updateEntity(this.activeEntity,this.activeField.fieldName,f);this.refreshAfterEdit();this.isModefied=true;if(this.linkId&&this.linkField){var c=PageControl.getOne(this.linkId);if(c){if(c.activeRow){c.getEntity(c.activeRow).status=Entity.STATUS_MODIFIED}c.refreshAfterEdit();c.isModefied=true}}this.activeValue=f}}this.afterEdit(b,a,this)}else{}this.editing=false;try{this.activeEditor.hideEditor();var h=this.activeEditor}catch(d){}return true}return true};Datacell.prototype.refreshAfterEdit=function(){if(this.syncRefresh){this.refreshRow(this.activeCell?this.activeCell.parentNode:this.activeRow)}else{this.refreshCell(this.activeCell,this.activeField)}};Datacell.prototype.startEdit=function(){if(!this.activeEditor||!this.activeField||!this.activeEntity||!this.activeField.allowModify&&this.activeEntity.status!=Entity.STATUS_NEW){return}this.activeMe();var a=this.getActiveCell();if(this.beforeEdit(a,a.cellIndex,a.parentNode.rowIndex)==false){return}this.editing=true;this.showCellEditor(this.activeValue,this.activeEntity)};Datacell.prototype.endEdit=function(){this.hideCellEditor();this.editing=false;this.beforeShowEditor=false};Datacell.prototype._onKeyDown=function(c){c=c||window.event;var a=this.activeCell;var e=null;var f=c.keyCode;if(f==EOSKey.ESC){eventManager.stopEvent();this.editing=false;this.endEdit()}else{if(f==EOSKey.ENTER){var b=eventManager.getElement();if(b!=null&&b.tagName.toLowerCase()=="textarea"){return}eventManager.stopEvent();if(this.editing){this.endEdit()}else{this.selectRow(a.parentNode);this.startEdit()}}else{if(this.editing&&f==EOSKey.TAB){eventManager.stopEvent();this.endEdit();e=nextElement(a);if(!e){e=nextElement(a.parentNode);if(e){e=e.cells[0]}}this.setActiveCell(c,e);var d=this;window.setTimeout(function(){d.startEdit()},10)}else{if(a&&!this.editing){switch(f){case EOSKey.LEFT:eventManager.stopEvent();e=prevElement(a);if(!e){e=prevElement(a.parentNode);if(e){e=e.cells[e.cells.length-1]}}break;case EOSKey.TAB:case EOSKey.RIGHT:eventManager.stopEvent();this.selectRow(a.parentNode);e=nextElement(a);if(!e){e=nextElement(a.parentNode);if(e){e=e.cells[0]}}break;case EOSKey.DOWN:eventManager.stopEvent();e=nextElement(a.parentNode);if(e){e=e.cells[a.cellIndex]}break;case EOSKey.UP:eventManager.stopEvent();e=prevElement(a.parentNode);if(e){e=e.cells[a.cellIndex]}break}if(e){eventManager.stopEvent();this.setActiveCell(c,e)}}}}}};Datacell.prototype.autoScroll=function(){var h=this.activeCell.offsetLeft+this.tableMarginLeft;var f=h+this.activeCell.offsetWidth+this.tableMarginLeft;var e=this.activeCell.offsetTop;var d=e+this.activeCell.offsetHeight;var i=this.bodyDiv.scrollLeft;var a=this.bodyDiv.scrollTop;var b=i+this.bodyDiv.clientWidth+this.tableMarginLeft;var g=a+this.bodyDiv.clientHeight;var c=this.freezeHeadDiv.offsetWidth;if(h<i){this.bodyDiv.scrollLeft=h-this.tableMarginLeft}else{if(f>b){this.bodyDiv.scrollLeft=i+f-b}}if(e<a){this.bodyDiv.scrollTop=e}else{if(d>g){this.bodyDiv.scrollTop=a+d-g}}};Datacell.prototype.setActiveCell=function(c,b){if(arguments.length==1){if(c!=null&&c.tagName.toLowerCase()=="td"){b=c;c=null}}this.activeMe();c=c||window.event;var a=c?(c.srcElement||c.target):null;b=b||getEventTargetByTagName(c,"td");if(b){var d=b.innerHTML.toLowerCase();if(b!=this.activeCell){this.activeField=this.getField(b);this.activeEditor=this.activeField?this.activeField.editor:null;removeClass(this.activeCell,"eos-cell-actived");if(d.indexOf("<select")<0){addClass(b,"eos-cell-actived")}this.activeCell=b}this.activeEditRow=this.activeCell.parentNode;this.activeEntity=this.getEntity(this.activeEditRow);this.activeEntityBackup=this.activeEntity.clone();if(this.activeEntity&&this.activeField){this.activeValue=this.activeEntity.getProperty(this.activeField.fieldName)}if(d.indexOf("<select")<0){this.autoScroll()}}return b};Datacell.prototype.initEvent=function(){var f=this;function c(k){f.activeMe();f.freezeBodyDiv.style.height=f.bodyDiv.clientHeight+"px";f.syncScroll();if(f.beforeShowEditor!==true){if(f.activeEditor){try{f.activeEditor.hideEditor()}catch(l){}}}f.hideCellEditor()}eventManager.add(this.bodyDiv,"scroll",c);function i(l){f.activeMe();f.endEdit();var e=getEventTargetByTagName(l,"td");var n=e?e.parentNode:null;if(e&&e!==f.containerTD){f.selectRow(n);f.setActiveCell(l,e);f.processCheckBox(l,e);var m=e.cellIndex;var k=n.rowIndex;f.onClickCell(e,m,k,f.activeEntity,f.fields[m],f);f.onClickRow(n,k,f.activeEntity,f);f.beforeShowEditor=true;f.startEdit()}}eventManager.add(this.bodyDiv,"click",i);function h(e){f.activeMe();f.endEdit()}eventManager.add(this.headDiv,"click",h);function j(){f.activeMe()}try{eventManager.add(this.viewport,"mouseup",j);eventManager.add(this.headDiv,"mouseup",j);eventManager.add(this.bodyDiv,"mouseup",j);eventManager.add(this.datacellContainer,"mouseup",j);eventManager.add(this.containerTable,"mouseup",j);eventManager.add(this.container,"mouseup",j);eventManager.add(this.topToolbarDiv,"mouseup",j);eventManager.add(this.bottomToolbarDiv,"mouseup",j);eventManager.add(this.toolbarParent,"mouseup",j)}catch(d){}function g(m){f.activeMe();m=m||window.event;var e=m.srcElement||m.target;eventManager.stopPropagation();if(e&&e.tagName.toLowerCase()!="td"){while((e=e.parentNode)){if(e.tagName&&e.tagName.toLowerCase()=="td"){break}}}if(!e.parentNode){return}var n=e.parentNode.rowIndex;var l=e.cellIndex-1;if(l<0){f.selectRow(f.table.tBodies[0].rows[n],true);return}var k=f.table.tBodies[0].rows[n].cells[l];if(f.activeCell==k){f.activeFreezeCell=e;return}f.activeFreezeCell=e}eventManager.add(this.freezeBodyDiv,"click",g);function b(){Datacell.onWindowResize(f)}if(isIE){if((""+f.width).indexOf("%")>0||(""+f.height).indexOf("%")>0){eventManager.add(window,"resize",b)}}if(isFF){if((""+f.width).indexOf("%")>0||(""+f.height).indexOf("%")>0){if(registerTopContainer(this.datacellContainer)){EOSResizeObjects.push(this)}}}function a(){f.clearup()}eventManager.add(window,"unload",a);if(!Datacell.initGlobalEvent.hasInit){Datacell.initGlobalEvent();Datacell.initGlobalEvent.hasInit=true}};Datacell.prototype.processCheckBox=function(d,c){var a=this;var f=d.srcElement||d.target;if("INPUT"==f.tagName.toUpperCase()){if(f.getAttribute("swidthCheckbox")=="true"&&f.getAttribute("type")=="checkbox"){var b=a.getCellValue(c);var e=a.fields[c.cellIndex];b=b==e.checkedValue?e.unCheckedValue:e.checkedValue;a.setCellValue(c,b)}}};Datacell.prototype.startColumnResize=function(a,c){if(c.allowResize===false){return}a=a||window.event;this.viewportXY=getElementXY(this.viewport);this.isColumnResizing=true;var b=eventManager.getPointX();c.oldRightX=b-this.viewportXY[0];this.splitLine.style.left=c.oldRightX+"px";this.splitLine.style.height=this.viewport.offsetHeight+"px";this.splitLine.style.display="block";this.headDiv.style.cursor="col-resize";this.gridMask.style.cursor="col-resize";this.gridMask.style.display="block";this.gridMask.style.height="100%";this.resizeColumn=c};Datacell.prototype.syncScroll=function(){this.scrollDiv.style.width=this.headTable.offsetWidth;var a=navigator.userAgent.toLowerCase().indexOf("msie 8")!=-1;if(isIE7||a){if(this.bodyDiv.scrollLeft+this.bodyDiv.clientWidth+1>this.bodyDiv.scrollWidth){this.headDiv.scrollLeft=this.bodyDiv.scrollLeft==0?0:this.bodyDiv.scrollLeft+15}else{this.headDiv.scrollLeft=this.bodyDiv.scrollLeft}}else{this.headDiv.scrollLeft=this.bodyDiv.scrollLeft}this.freezeBodyDiv.scrollTop=this.bodyDiv.scrollTop;return};Datacell.prototype.setColumnWidth=function(b,a){b=this.getField(b);a=a<this.minColumnWidth?this.minColumnWidth:a;b.width=a;b.rules.style.width=b.width+"px"};Datacell.prototype.setFieldEditor=function(d,e){d=this.getField(d);var b=null;e=e||d.editId;if(e){b=Datacell.$editor($id(e))}if(!b){var c=$id(this.id+"_"+d.fieldId+"_field_editor_container")||$id(d.fieldId+"_field_editor_container");var a=firstElement(c);if(c&&a){e=a.id;if(e&&e.indexOf("_container")>0){e=e.substring(0,e.length-10);b=Datacell.$editor($o(e)||$id(e))}else{b=Datacell.$editor(a)}}}d.editId=e;d.editor=b;if(b){b.fieldName=d.fieldName;b.hideEditor()}};Datacell.prototype.initCSS=function(){this.viewportXY=getElementXY(this.viewport);var c=[];var b=this;for(var a=0;a<this.fields.length;a++){var d=this.fields[a];d.width=parseInt(d.width||this.defaultColumnWidth);d.styleClass="eos-dc-col-"+this.id+"-"+a;d.rules=createStyle(d.styleClass,document);d.align=d.align||null;d.alignStyle=d.align?"text-align:"+d.align+";":"";c[a]="."+d.styleClass+" { width:"+d.width+"px;  "+d.alignStyle+" }";d.rules.style.width=d.width+"px";if(d.align){d.rules.style.textAlign=d.align}d.allowModify=d.allowModify===undefined||d.allowModify===null?!b.readonly:!!d.allowModify;this.setFieldEditor(d)}if(1==2&&!this.addedCSS){CSSUtil.createStyleSheet(c.join("\n"),this.id+"_style");this.SCROLLBAR_WIDTH=16;this.addedCSS=true}};Datacell.prototype.initAllRows=function(b){if(!b&&this.allTR&&this.allTR.length>0){return this.allTR}this.allTR=[];var c=this.table.tBodies[0].rows;for(var a=0;a<c.length;a++){this.allTR[a]=c[a]}return this.allTR};Datacell.prototype.refreshRowStyle=function(){this.initAllRows(true);var d=this.freezeHeadTable?this.freezeBodyTable.tBodies[0].rows:[];for(var c=0;c<this.allTR.length;c++){var b=this.allTR[c];b.className=b.className.replace(this.rowEvenStyleClass,"");if(c%2==0){b.className=b.className+" "+this.rowEvenStyleClass}else{b.className=b.className.replace(this.rowEvenStyleClass,"")}var a=d[c]||{};a.className=b.className}};Datacell.prototype.getCurrentRowCount=function(){var a=this.table.tBodies[0].rows;return a?a.length:0};Datacell.prototype.getPageRowCount=function(){var a=0;if(this.dataset){a=this.getCurrentRowCount();a=a-(this.dataset.getInsertEntities()?this.dataset.getInsertEntities().length:0);a=a+(this.dataset.getRemovedEntities()?this.dataset.getRemovedEntities().length:0)}return a};Datacell.prototype.getTotalRowCount=function(){if(this.__pagePilot&&this.__pagePilot[0]){return this.__pagePilot[0].count||0}return -1};Datacell.prototype.getAllRows=function(a){this.initAllRows(a);return this.allTR};Datacell.prototype.freezeColumn=function(a){var h=this.freezeHeadTable.tBodies[0].rows;for(var e=0;e<a;e++){var g=this.fields[e];g.frozeHeadCell=this.headTable.tBodies[0].rows[0].cells[e].cloneNode(true);g.frozeSortIcon=g.frozeHeadCell.getElementsByTagName("span")[1];g.frozeSplitter=g.frozeSortIcon.nextSibling;if(h.length>0){h[0].appendChild(g.frozeHeadCell)}}this.initAllRows();h=this.freezeBodyTable.tBodies[0].rows;var f=this.allTR.length;for(var c=h.length;c<f-h.length;c++){var j=this.styleFreezeRow.cloneNode(true);j.className=this.allTR[c].className;j.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].appendChild(j)}for(var d=0;d<f;d++){for(var e=0;e<a;e++){var b=this.allTR[d].cells[e].cloneNode(true);h[d].appendChild(b)}}};Datacell.prototype.quickSort=function(a,d,e,l,b){var i=this;var c=a;var m=d+1;var j=m;var f=i.allTR;var h=f[a];var k=e(this,h,l);var g;if(b){while(true){while(++c<d&&e(this,f[c],l)>=k){}while(--m>a&&e(this,f[m],l)<=k){}if(c>=m){break}g=f[c];f[c]=f[m];f[m]=g}}else{while(true){while(++c<d&&e(this,f[c],l)<=k){}while(--m>a&&e(this,f[m],l)>=k){}if(c>=m){break}g=f[c];f[c]=f[m];f[m]=g}}f[a]=f[m];f[m]=h;m-=1;if(a<m){i.quickSort(a,m,e,l,b)}m+=2;if(m<d){i.quickSort(m,d,e,l,b)}return f};Datacell.prototype.doSort=function(l){if(!l.sortAt||l.sortAt=="null"||l.sortAt=="none"||l.sortAt=="undefined"){return}this.initAllRows();if(this.allTR.length<1){return}if(this.lastSortField){removeClass(this.lastSortField.sortIcon,"eos-hd-asc");removeClass(this.lastSortField.frozeSortIcon,"eos-hd-asc");removeClass(this.lastSortField.sortIcon,"eos-hd-desc");removeClass(this.lastSortField.frozeSortIcon,"eos-hd-desc")}if(l.sorted=="asc"){l.sorted="desc";addClass(l.sortIcon,"eos-hd-desc");addClass(l.frozeSortIcon,"eos-hd-desc")}else{if(l.sorted=="desc"){l.sorted=""}else{l.sorted="asc";addClass(l.sortIcon,"eos-hd-asc");addClass(l.frozeSortIcon,"eos-hd-asc")}}this.lastSortField=l;if(l.sortAt){l.sortAt=(""+l.sortAt).toLowerCase();if(l.sortAt=="server"||l.sortAt.indexOf("s")==0){if(l.sorted){var a={_orderby:{_property:l.fieldName}};if(l.sorted){a._orderby._sort=l.sorted}this.sortParam=a}else{this.sortParam={}}try{this.endEdit()}catch(j){}var h=0;if(!this.isCount){h=-1}var n=this.setPageParam(0,this.pageSize,h,this.isCount);this.gotoPage(n);return}}if(l.sorted){this.quickSort(0,this.allTR.length-1,Datacell.getSortValue,l.fieldName,l.sorted=="desc")}else{this.quickSort(0,this.allTR.length-1,Datacell.getSortDefaultValue,l.fieldName,l.sorted=="desc")}var o=this.freezeBodyTable.tBodies[0].rows;var f=this.showIndex?1:0;var b=document.createDocumentFragment();for(var g=0;g<this.allTR.length;g++){var k=this.allTR[g];k.className=k.className.replace(this.rowEvenStyleClass,"");if(g%2==0){k.className=k.className+" "+this.rowEvenStyleClass}else{k.className=k.className.replace(this.rowEvenStyleClass,"")}for(var d=0;d<this.freezeNumber;d++){var m=o[g].cells[d+f];var c=k.cells[d].cloneNode(true);o[g].className=k.className;o[g].replaceChild(c,m)}b.appendChild(k)}this.table.tBodies[0].appendChild(b)};Datacell.prototype.initHeadEvent=function(){if(this.hasInitHeadEvent){return}var a=this;var b=a.fields.length;for(var d=0;d<b;d++){var c=a.fields[d];(function(e){eventManager.add(e.splitter,"mousedown",function(f){a.startColumnResize(f,e)});eventManager.add(e.frozeSplitter,"mousedown",function(f){a.startColumnResize(f,e)});eventManager.add(e.headCell,"mouseover",function(f){addClass(e.headCell,"eos-hd-row-over")});eventManager.add(e.frozeHeadCell,"mouseover",function(f){addClass(e.frozeHeadCell,"eos-hd-row-over")});eventManager.add(e.headCell,"mouseout",function(f){removeClass(e.headCell,"eos-hd-row-over")});eventManager.add(e.frozeHeadCell,"mouseout",function(f){removeClass(e.frozeHeadCell,"eos-hd-row-over")});eventManager.add(e.headCell,"click",function(f){a.onClickHead(e.headCell,d,e,a);a.doSort(e)});eventManager.add(e.frozeHeadCell,"click",function(f){a.doSort(e)})})(c)}this.hasInitHeadEvent=true};Datacell.prototype.initHead=function(){this.headTable=$createElement("table",{className:"eos-head-table",cellSpacing:"0",cellPadding:"0",border:"0"});this.headWrap.appendChild(this.headTable);this.headTbody=$createElement("tbody");this.headTable.appendChild(this.headTbody);var b=this.fields.length;var j=[];for(var e=0;e<b;e++){this.keys[this.fields[e].fieldId]=this.fields[e];j.push(this.fields[e].fieldId)}var m=$createElement("tr");m.className="eos-hd-row";this.headTbody.appendChild(m);this.styleRow=$createElement("tr",{className:this.rowStyleClass});this.styleFreezeRow=$createElement("tr",{className:this.rowStyleClass});var d=this.getSubmitXpath();var k=false;if(!this.styleEntity){this.styleEntity=this.styleEntity||new Entity(d);this.styleEntity.id=0;this.styleEntity.__type=this.entityType;k=true}for(var h=0;h<b;h++){var l=$createElement("td");var g=this.fields[h];if(k){this.initStyleField(g)}if(window.isGecko){}l.className=g.styleClass;l.style.textAlign=this.headTextAlign;l.innerHTML=['<div class="eos-hd-inner ',(window.isGecko?"eos-hd-inner-ff ":""),g.styleClass,'" unselectable="on" style="text-align:left;" >',"<span>",g.label,"</span>",'<div class="eos-hd-tool" ><span class="eos-hd-icon"></span><span class="eos-hd-split">&#160;</span></div>',"</div>"].join("");m.appendChild(l);g.headCell=l;g.labelSpan=l.firstChild.firstChild;g.sortIcon=l.getElementsByTagName("span")[1];g.splitter=g.sortIcon.nextSibling;g.splitter.colID=h;g.splitter.style.cursor="col-resize";g.defaultValue=g.defaultValue||"";g.sortAt=g.sortAt||"client";g.nullText=g.nullText||"";g.template=g.expression?compileTemplate(g.expression):null;var a=$createElement("td",{innerHTML:'<div class="eos-inner '+g.styleClass+'"  ></div>',className:g.styleClass});a.setAttribute("name",g.fieldId);this.styleRow.appendChild(a)}var f=false;if(!this.dataset){this.dataset=new Dataset(this.entityName)}var c=0;return};Datacell.prototype.initStyleField=function(b){if(b.editType=="entity"){var a=new Entity(b.fieldName);this.styleEntity.setProperty(b.fieldName,a)}else{if(b.editType=="dataset"){var a=new Dataset(b.fieldName);this.styleEntity.setProperty(b.fieldName,a)}else{if(b.defaultValue!==null&&b.defaultValue!==undefined){this.styleEntity.setProperty(b.fieldName,b.defaultValue)}else{this.styleEntity.setProperty(b.fieldName,"")}}}};Datacell.prototype.initFreezeZone=function(){this.freezeHeadDiv=$createElement("div",{className:"eos-freeze-div"});this.freezeBodyDiv=$createElement("div",{className:"eos-freeze-div"});this.viewport.appendChild(this.freezeHeadDiv);this.viewport.appendChild(this.freezeBodyDiv);this.cTop=0;this.freezeHeadDiv.style.top=this.cTop+"px";this.freezeBodyDiv.style.top=this.cTop+this.headHeight+"px";this.freezeHeadTable=$createElement("table",{id:this.headTable.id+"_freeze",className:"eos-head-table",cellSpacing:"0",cellPadding:"0",border:"0"});this.freezeHeadDiv.appendChild(this.freezeHeadTable)};Datacell.prototype.initBody=function(){var tableStartHTML='<table class="eos-table" cellSpacing="0"  cellPadding="0" border="0" ><tbody>';var trHTML=['<tr class="'+this.rowStyleClass," "+this.rowEvenStyleClass,'" __entity_rowno="','" >\n',"</tr>\n"];var colNum=this.fields.length;var rn=0;var tableHTML=[];var rowHTML;var freezeTableHTML=[tableStartHTML];var indexColumnWidth=this.tableMarginLeft-(isBorderBox?0:2);var indexColumnDivWidth=this.tableMarginLeft;var tdStyleClass=isIE?'style="width:'+this.tableMarginLeft+'px;"':"";var divStyleClass=isIE?"":'style="width:'+(this.tableMarginLeft-(isBorderBox?0:4))+'px;"';var indexColumnCell=['<td class="eos-index-col" '+tdStyleClass+' ><div class="eos-inner" style="width:'+(indexColumnDivWidth-4)+'px" >',"</div></td>"];this.styleIndexColumn=$createElement("td",{className:"eos-index-col"});if(isIE){this.styleIndexColumn.style.width=this.tableMarginLeft+"px"}this.styleIndexColumn.innerHTML='<div class="eos-inner" '+divStyleClass+" >&#160;</div>";if(this.freezeBodyTable){removeElement(this.freezeBodyTable);removeElement(this.freezeHeadTable.tBodies[0])}this.freezeHeadTable.appendChild($createElement("tbody"));if(this.showIndex){var headRow=$createElement("tr",{className:"eos-hd-row"});this.freezeHeadTable.tBodies[0].appendChild(headRow);var colN=$createElement("td",{innerHTML:'<div class="eos-hd-inner'+(window.isGecko?" eos-hd-inner-ff ":"")+'" style="width:'+(indexColumnDivWidth-5)+'px" >&#160;</div>',className:"eos-index-col"});if(isIE){colN.style.width=indexColumnWidth+"px"}headRow.appendChild(colN);this.freezeHeadDiv.style.display="block";this.freezeHeadDiv.style.left="0px"}var datasetLength=!this.dataset?0:this.dataset.getLength();var rowNum=this.pageSize||datasetLength;rowNum=(rowNum<0||datasetLength<rowNum)?datasetLength:rowNum;var colName=[];for(var i=0;i<colNum;i++){colName.push(this.fields[i].fieldId)}tableHTML.push(tableStartHTML);for(rn=0;rn<rowNum;){var entity=this.dataset.get(rn);rowHTML=[[trHTML[0],(rn%2==0?trHTML[1]:""),trHTML[2],rn,trHTML[3]].join("")];if(this.showIndex){freezeTableHTML.push(rowHTML[0]);freezeTableHTML.push(indexColumnCell[0]);freezeTableHTML.push("&#160;"+indexColumnCell[1]);freezeTableHTML.push("</tr>\n")}for(var cn=0;cn<colNum;cn++){var field=this.fields[cn];var cellText=entity.getProperty(field.fieldName);if(field.onRefreshFunc){if(typeof(field.onRefreshFunc)=="string"){field.onRefreshFunc=eval(field.onRefreshFunc)}cellText=field.onRefreshFunc(cellText,entity,rn,cn,this)}else{if(field.expression){cellText=runExpression(field.template,entity)}else{if(field.editor){cellText=htmlConversion(field.editor.getDisplayValue(cellText))}else{cellText=htmlConversion(cellText===undefined||cellText===null?field.nullText:cellText)}}}cellText=cellText===undefined||cellText===null?field.nullText:cellText;rowHTML.push('<td fieldId="');rowHTML.push(colName[cn]);rowHTML.push('" class="');rowHTML.push(field.styleClass);rowHTML.push('"><div class="eos-inner ');rowHTML.push(field.styleClass);rowHTML.push('" >');rowHTML.push(cellText);rowHTML.push("</div></td>")}rowHTML.push(trHTML[4]);tableHTML.push(rowHTML.join(""));rn++}for(var bi=0;bi<this.pageSize-datasetLength;bi++){for(var cn=0;cn<colNum;cn++){}}tableHTML.push('</tbody></table><div style="width:100%;height:1px;font-size:0px;">&nbsp;</div>');this.bodyDiv.innerHTML=tableHTML.join("");this.table=this.bodyDiv.firstChild;this.table.datacell=this;this.tbody=this.table.tBodies[0];this.scrollDiv=this.table.nextSibling;this.scrollDiv.style.width=this.headTable.offsetWidth;this.freezeBodyDiv.innerHTML=freezeTableHTML.join("");this.freezeBodyTable=this.freezeBodyDiv.firstChild;this.isModefied=false;if(this.showIndex){this.headTable.style.marginLeft=this.tableMarginLeft+1+"px";this.table.style.marginLeft=this.tableMarginLeft+1+"px"}else{this.headTable.style.marginLeft=0+"px";this.table.style.marginLeft=0+"px"}this.initAllRows(true);if(this.freezeNumber>0){this.freezeColumn(this.freezeNumber)}this.initHeadEvent();var datacell=this;function tt(){datacell.freezeBodyDiv.style.height=datacell.bodyDivHeight-0+"px";if(datacell.headDiv.clientHeight>10){datacell.freezeBodyDiv.style.height=datacell.bodyDiv.clientHeight+"px"}}return};Datacell.prototype.initStyleRow=function(){if(!this.rowStyles instanceof Array){this.rowStyles=this.rowStyles.split(",")}};Datacell.prototype.locked=function(){this.endEdit();var c=$id(Datacell.BLOLK_ID);var a=$id(Datacell.BLOLK_ID+"_IMG");if(!c){c=$createElement("div");document.body.appendChild(c);c.id=Datacell.BLOLK_ID}if(!a&&PICTURE_BLANK){a=$createElement("img");a.src=PICTURE_BLANK;a.id=Datacell.BLOLK_ID+"_IMG";c.appendChild(a)}c.style.cursor="wait";c.style.position="absolute";c.style.zIndex="1";var b=getPosition(this.container);c.style.top=b.top;c.style.left=b.left;c.style.width=this.container.offsetWidth;c.style.height=this.container.offsetHeight;if(a){a.style.width=c.style.width;a.style.height=c.style.height;a.border="0"}c.style.display="block"};Datacell.prototype.unlocked=function(){var a=$id(Datacell.BLOLK_ID);if(a){a.style.display="none"}};Datacell.prototype.insertEmptyRow=function(){return this.insertRow(this.styleEntity.clone(true))};Datacell.prototype.insertRow=function(b,d){if(typeof d=="number"){d=this.getRowAt(d)}b=b||this.cloneEntity()||this.styleEntity.clone(true);if(d&&b){b.status=Entity.STATUS_NEW;var g=d.rowIndex;removeClass(this.activeCell,"eos-cell-actived");var f=d.cloneNode(true);addClass(this.activeCell,"eos-cell-actived");this.dataset.addEntity(b);this.tbody.insertBefore(f,d);f.setAttribute("__entity_rowno",this.dataset.getLength()-1);var e=this.freezeBodyTable.tBodies[0].rows[g];var c=this.styleFreezeRow.cloneNode(true);c.className=f.className;c.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].insertBefore(c,e);this.refreshRow(f);this.selectRow(f);this.isModefied=true;if(this.linkId&&this.linkField){var a=PageControl.getOne(this.linkId);if(a){a.isModefied=true}}return f}return this.addRow(b)};Datacell.prototype.addRow=function(b){this.endEdit();if(!this.allowAdd||this.readonly){return null}var f=this.tbody.rows.length;if(f<0){f=0}var e=b||this.styleEntity.clone(true);e.status=Entity.STATUS_NEW;if(!this.dataset){return null}var k=this.styleRow.cloneNode(true);k.setAttribute("__entity_rowno",this.dataset.getLength());if(this.beforeAdd(k)===false){k=null;delete k;return null}this.dataset.addEntity(e);this.tbody.appendChild(k);for(var d=0;d<k.cells.length;d++){k.cells[d].setAttribute("fieldId",this.fields[d].fieldId)}var f=(this.tbody.rows.length+1)%this.rowStyles.length;addClass(k,(this.tbody.rows.length+1)%2==0?this.rowEvenStyleClass:"");var l=this.styleFreezeRow.cloneNode(true);l.className=k.className;l.appendChild(this.styleIndexColumn.cloneNode(true));this.freezeBodyTable.tBodies[0].appendChild(l);for(var d=0;d<this.freezeNumber;d++){var c=k.cells[d].cloneNode(true);c.setAttribute("fieldId",this.fields[d].fieldId);l.appendChild(c)}this.refreshRow(k);this.isModefied=true;this.initAllRows(true);this.bodyDiv.scrollTop=this.bodyDiv.scrollHeight;this.freezeBodyDiv.scrollTop=this.bodyDiv.scrollTop;var g=this;this.selectRow(k);for(var j=0;j<this.fields.length;j++){var h=this.fields[j];if(h.editor){this.setActiveCell(null,k.cells[j]);this.startEdit();break}}if(this.linkId&&this.linkField){var a=PageControl.getOne(this.linkId);if(a){a.isModefied=true}}this.refreshRowStyle();this.afterAdd(k);return k};Datacell.prototype.deleteRow=function(d){if(!this.allowDel||this.readonly){return}d=d===0?0:(d||this.activeRow);if(d==null){return}d=this.getRow(d);if(this.beforeDel(d)!==false&&d){this.selectNextRow();if(this.activeCell){this.endEdit()}if(this.getEntity(d).status==Entity.STATUS_NEW){this.getEntity(d).status=Entity.STATUS_HIDDEN}else{var b=false;if(this.linkId&&this.linkField){var c=PageControl.getOne(this.linkId);if(c){c.isModefied=true;b=true}}this.dataset.removeEntity(this.getEntity(d),b)}var a=this.freezeBodyTable.tBodies[0].rows[d.rowIndex];if(d&&d.parentNode){d.parentNode.removeChild(d)}if(a&&a.parentNode){a.parentNode.removeChild(a)}this.isModefied=true;this.initAllRows(true);this.refreshRowStyle();this.afterDel(d)}};Datacell.prototype.updateEntity=function(a,c,b){a.setProperty(c,b)};Datacell.prototype.getEntity=function(b){var c=b;if(typeof(c)=="number"){c=this.table.tBodies[0].rows[c]}if(!c){return null}if(c.tagName.toLowerCase()=="td"){c=c.parentNode}var d=c.getAttribute("__entity_rowno")/1;var a=this.dataset.get(d);return a};Datacell.prototype.selectRow=function(d,b){this.endEdit();d=this.getRow(d);if(this.beforeSelectRow(d)===false){return false}var e=true;if(this.activeRow!=null){if(this.activeRow==d){e=false}else{if(!this.unSelectRow()){this.afterSelectRow(d);return false}}}this.activeRow=this.activeRow||d;addClass(d,this.rowSelectStyleClass);if(e||b){this.setSubComponent(this.getEntity(d))}var c=this.getEntity(d);this.onSelectRow(d,c);var a=this;if(c){c.__onUpdate=function(){if(a.getEntity(d).status!=Entity.STATUS_NEW){a.getEntity(d).status=Entity.STATUS_MODIFIED}if(a.syncRefresh){a.refreshRow(d)}else{a.refreshCell(a.activeCell,a.activeField)}a.isModefied=true}}this.afterSelectRow(this.activeRow);return true};Datacell.prototype.setSubComponent=function(b){if(this.submitXpath&&b){b.name=this.getSubmitXpath()}var a=this;setTimeout(c,100);function c(){for(var f=0;f<a.__subComponent.length;f++){var d=a.__subComponent[f];try{d.freshFromEntity(b)}catch(g){}}}};Datacell.prototype.freshFromEntity=function(a){if(this.queryAction){if(a){if(this.dataType=="json"){this.queryParam=a.toJson()}else{this.queryParam=a.toString()}}else{this.queryParam=null}this.loadData()}else{if(this.linkField){if(a){this.dataset=a.getProperty(this.linkField);if(!this.dataset){this.dataset=new Dataset(this.linkField);a.setProperty(this.linkField,this.dataset)}}else{this.dataset=new Dataset(this.linkField)}}}this.refresh()};Datacell.prototype.registerSubComponent=function(b){var a=PageControl.getOne(b);this.__subComponent.push(a)};Datacell.prototype.initCell=function(a,b){var c=a.getAttribute("fieldId");if(c==Datacell.__INDEX_NAME){return}var d=this.keys[c];var e=d.fieldName;this.refreshCell(a,d)};Datacell.prototype.refreshRow=function(l,c){var k=l.cells.length;c=c||this.getEntity(l);for(var b=0;b<k;b++){cell=l.cells[b];var h=cell.getAttribute("fieldId");if(h==Datacell.__INDEX_NAME){continue}var f=this.keys[h];var i=f.fieldName;var g=c.getProperty(i)?c.getProperty(i):"";if(c==this.activeEntity&&g!=this.activeEntityBackup.getProperty(i)){try{var a=cell.parentNode.rowIndex;if(this.showIndex){addClass(this.freezeBodyTable.tBodies[0].rows[a].cells[0],"eos-row-modefied")}else{addClass(cell.parentNode,"eos-row-modefied")}}catch(d){addClass(cell.parentNode,"eos-row-modefied")}}this.refreshCell(cell,f)}};Datacell.prototype.refresh=function(){this.init();if(this.beforeRefresh()===false){return}this.activeEditor=null;this.activeCell=null;this.activeRow=null;this.activeField=null;this.activeValue=null;this.initBody();this.status=Datacell.STATUS_BLANK;this.onComplete();this.selectFirstRow();this.afterRefresh()};Datacell.prototype.reSortBody=function(a){var b=this.tbody.cloneNode(false);for(var c=0;c<a.length;c++){b.appendChild(a[c])}this.table.replaceChild(b,this.tbody);this.tbody=b};Datacell.prototype.serverSort=function(a){var b=a.field;a.sortType=a.sortType=="_desc"?"_asc":"_desc";this.sortParam={_orderby:{_property:b.fieldName,_sort:a.sortType}};this.reload()};Datacell.prototype.refreshSortTh=function(a){if(!this.sortArrow){this.sortArrow=$createElement("img")}bodyAddNode(this.sortArrow);a.container.appendChild(this.sortArrow);if(a.sortType=="_desc"){this.sortArrow.src=PICTURE_SORT_DOWN}else{if(a.sortType=="_asc"){this.sortArrow.src=PICTURE_SORT_UP}}};Datacell.prototype.setPageParam=function(b,a,c,e){if(this.dataType=="json"){var d={__type:"sdo:com.eos.foundation.PageCond",begin:b,length:a,count:c,isCount:!!e};this.pageParam={page:d};return this.pageParam}else{this.pageParam='<page __type="sdo:com.eos.foundation.PageCond"><begin>'+b+"</begin><length>"+a+"</length><count>"+c+"</count><isCount>"+(!!e)+"</isCount></page>";return this.pageParam}};Datacell.prototype.initPageParam=function(){if(this.pageSizeList&&this.pageSizeList!="null"&&this.pageSizeList!="none"&&(","+this.pageSizeList+",").indexOf(","+this.pageSize+",")<0){this.pageSizeList+=","+this.pageSize}var a=0;if(!this.isCount){a=-1}this.setPageParam(0,this.pageSize,a,this.isCount)};Datacell.prototype.initAttachParam=function(){};Datacell.prototype.getQueryForm=function(){if(!this.entityType&&!this.entityName&&!this.sortParam){if(this.dataType=="json"){return{}}else{return""}}var b={};var a=this.entityType||this.entityName||"";a=a.split(":");if(a.length==2){b._entity=a[1]}EOS.apply(b,this.sortParam);return this.setCriteriaParam(b)};Datacell.prototype.setCriteriaParam=function(a){var b={__type:"sdo:com.primeton.das.criteria.criteriaType"};EOS.apply(b,a);this.criteriaParam=b;return b};Datacell.prototype.setQueryParam=function(a){this.queryParam=a;return this.queryParam};Datacell.prototype.setJsonDataset=function(json){if(typeof(json)=="string"){json=eval(json)}if(!(json instanceof Dataset)){json=Json2Dataset(json)}this.dataset=json;this.dataXML="<json/>"};Datacell.prototype.loadJsonData=function(){};Datacell.prototype.addParam=function(a,b){this.paramList=this.paramList||[];this.paramList.push({key:a,value:b})};Datacell.prototype.loadData=function(){if(this.beforeLoadData()===false){return}if(this.dataXML=="<json/>"){return}if(!this.linkId&&!this.queryAction&&this.xpath){var xmlZone=document.getElementById(this.id+"_xml");this.dataXML=xmlZone?xmlZone.innerHTML:null}else{if(this.linkId&&this.linkId.indexOf("xml:")==0){var xmlZone=document.getElementById(this.linkId.substring(4));this.dataXML=xmlZone?xmlZone.innerHTML:null}else{if(this.linkId&&this.isFirstLoad){this.isFirstLoad=false;return}}}var xmlDom;if(this.dataXML&&this.dataXML!=="<json/>"){this.dataset=Dataset.create(this.dataXML,this.xpath);xmlDom=createXmlDom();xmlDom.loadXML(this.dataXML);var pagecond=xmlDom.selectSingleNode("/root/data/page");this.freshPagePilot(pagecond);return}if(this.onLoadData()!=false){if(!this.queryAction){return}var ajax=new Ajax(this.queryAction);var param=this.getQueryForm();var paramFn="";if(this.initParamFunc){try{paramFn=eval(this.initParamFunc+"(ajax)")}catch(e){try{paramFn=eval(this.initParamFunc+"()")}catch(e1){$handle(e1)}}}if(this.dataType=="json"){EOS.apply(param,this.queryParam);EOS.apply(param,this.pageParam);EOS.apply(param,paramFn)}else{var queryParma=this.queryParam||"";param+=queryParma;param+=this.pageParam;param+=paramFn}if(this.paramFormId){var form=$id(this.paramFormId);if(form){for(var i=0;i<form.elements.length;i++){var elem=form.elements[i];if(elem.name){ajax.addParam(elem.name,getElementValue(elem))}}}}if(this.paramList){for(var i=0;i<this.paramList.length;i++){var elem=this.paramList[i];if(elem){ajax.addParam(elem.key,elem.value)}}}if(this.queryReturnValue){ajax.setOutParam(this.queryReturnValue)}if(this.queryParamsInfo){ajax.setParamsInfo(this.queryParamsInfo)}if(this.queryInoutParams){ajax.setInoutParam(this.queryInoutParams)}ajax.setDataType(this.dataType);var _this=this;ajax.onSuccess=function(){var pagecond=null;if(_this.dataType=="json"&&ajax.retJson){var xp=_this.xpath;var arr=ajax.retJson;if(xp){xp=xp.split("/");for(var i=0,len=xp.length;i<len;i++){arr=arr[xp[i]]}}_this.dataset=Json2Dataset(arr);pagecond=ajax.retJson.page}else{xmlDom=ajax.retDom;_this.dataset=Dataset.create(xmlDom,_this.xpath,_this.getSubmitXpath());pagecond=xmlDom.selectSingleNode("/root/data/page")}_this.freshPagePilot(pagecond);_this.afterLoadData(ajax)};ajax.loadData(param)}};Datacell.prototype.freshPagePilot=function(e){var h;if(this.dataType=="json"){h=Json2Entity(e)}else{h=Dataset.initEntity(e)}if(!e){var f=1;var c=this.dataset?this.dataset.getLength():0;if(c<f){f=0;c=f}for(var b=0;b<this.__pagePilot.length;b++){var g=this.__pagePilot[b];if(g.gotoPageText){g.gotoPageText.value=1}if(g.pageInfoDiv){g.pageInfoDiv.innerHTML="<nobr>";g.pageInfoDiv.innerHTML+="<nobr>"+this.PAGE_RECORDINFO_NOCOUNT.replace("{0}",f).replace("{1}",this.dataset.getLength())+"</nobr>";g.pageInfoDiv.innerHTML+="</nobr>"}g.freshPilot(h,this.readonly,this.allowAdd,this.allowDel)}return}this.totalPage=Number(h.getProperty("totalPage"));this.begin=Number(h.getProperty("begin"));this.pageSize=Number((!this.pageSize||this.pageSize<1)?h.getProperty("length"):this.pageSize);this.currentPage=Number(h.getProperty("currentPage"));if(parseInt(this.currentPage)<1){this.currentPage=1;h.setProperty("currentPage",1)}var a=Number(h.getProperty("totalPage"));var d=Number(h.getProperty("begin"));if((""+a)!="-1"){this.SortByServer=true}else{if((""+d)=="0"){this.SortByServer=false}else{this.SortByServer=true}}for(var b=0;b<this.__pagePilot.length;b++){var g=this.__pagePilot[b];g.freshPilot(h,this.readonly,this.allowAdd,this.allowDel)}};Datacell.prototype.registerPagePilot=function(a){this.__pagePilot.push(a);a.datacell=this};Datacell.prototype.reload=function(a){a=a!==undefined&&a!==null?a:this.recount;if(a){this.setPageParam(this.begin,this.pageSize,-1,this.isCount)}this.loadData();this.refresh()};Datacell.prototype.selectNextRow=function(){if(this.activeRow){var b=nextElement(this.activeRow);var a=prevElement(this.activeRow);if(b){this.selectRow(b)}else{if(a){this.selectRow(a)}}}};Datacell.prototype.selectPreRow=function(){if(this.activeRow){var b=nextElement(this.activeRow);var a=prevElement(this.activeRow);if(a){this.selectRow(a)}else{if(b){this.selectRow(b)}}}};Datacell.prototype.selectFirstRow=function(){if(this.tbody.rows.length>0){var a=this.tbody.rows[0];this.selectRow(a)}else{this.setSubComponent(null)}};Datacell.prototype.selectLastRow=function(){if(this.tbody.rows.length>0){var a=this.tbody.rows[this.tbody.rows.length-1];this.selectRow(a)}};Datacell.prototype.gotoPage=function(a){if(this.isModefied){if(window.confirm(DATACELL_MODIFY_CONFIRM)){this.submit()}}this.pageParam=a;this.reload();this.onPageChange()};Datacell.prototype.validateAll=function(){var a=this.activeEntity;var m=this.getActiveCell();var b=this.activeRow;for(var d=0;d<this.table.tBodies[0].rows.length;d++){var n=this.table.tBodies[0].rows[d];var c=this.getEntity(n);if(c.status==Entity.STATUS_NEW){this.activeEntity=c;for(var j=0;j<this.fields.length;j++){var k=this.fields[j];if(k.editor){this.activeCell=n.cells[j];this.activeRow=n;var l=c.getProperty(k.fieldName);k.editor.setValue(l);var g;try{g=k.editor.validate()}catch(h){g=false}if(!g){this.activeCell=null;this.setActiveCell(n.cells[j]);this.startEdit();try{g=k.editor.validate()}catch(h){g=false}this.unlocked();this.activeEntity=a;return false}}}}}this.activeEntity=a;this.activeCell=m;this.activeRow=b;return true};Datacell.prototype.save=function(){if(this.beforeSave()!==false){this.submit();this.afterSave()}};Datacell.prototype.submit=function(){if(this.beforeSubmit()===false||!this.submitAction){return}this.locked();this.endEdit();if(!this.isModefied){alert(DATACELL_MODIFY_NO)}else{if(!this.validateAll()){return false}var a=false;if(!a){var g=new HideSubmit(this.submitAction);if(this.paramFormId){var f=$id(this.paramFormId);if(f){for(var c=0;c<f.elements.length;c++){var e=f.elements[c];if(e.name){g.addParam(e.name,xmlConversion(getElementValue(e)))}}}}if(this.paramList){for(var c=0;c<this.paramList.length;c++){var e=this.paramList[c];if(e){g.addParam(e.key,e.value)}}}if(this.submitReturnValue){g.setOutParam(this.submitReturnValue)}if(this.submitParamsInfo){g.setParamsInfo(this.submitParamsInfo)}if(this.submitInoutParams){g.setInoutParam(this.submitInoutParams)}g.loadData(this.dataset.getSubmitXML());if(g.retDom){var d=g.retDom.selectNodes("\rootexception");if(d&&d.length>0){var b=getNodeValue(d[0]);if(b&&(""+b).indexOf("e")>=0){alert(DATACELL_SAVE_ERR)}}}this.afterSubmit(g);this.dataXML=null;this.loadData();this.refresh()}}this.unlocked();return true};Datacell.prototype.reset=function(){};Datacell.prototype.processSortIcon=function(a){};Datacell.prototype.addcheckbox=function(){};Datacell.prototype.setReadonly=function(b){if(b==null){b=true}this.readonly=b;for(var a=0;a<this.fields.length;a++){this.fields[a].allowModify=!this.readonly}};Datacell.prototype.getEntitiesXML=function(b,d){var a=new StringBuffer();if(d.length>0){for(var c=0;c<d.length;c++){d[c].name=b;a.append(d[c].toString())}}return a.toString()};Datacell.prototype.getSubmitXpath=function(){var b=this.submitXpath;if(!b){if(this.xpath){var a=this.xpath.split("/");b=a[a.length-1]}else{if(this.linkField){b=this.linkField}}}return b||"entity"};Datacell.prototype.submitAllByXML=function(){if(this.allEntitiesXMLDiv){this.allEntitiesXMLDiv.parentNode.removeChild(this.allEntitiesXMLDiv)}var c=$createElement("div",{style:{display:"none"}});this.allEntitiesXMLDiv=c;var b=this.getSubmitXpath();var a=$createElement("input",{type:"hidden",name:"insertEntities",value:this.getEntitiesXML(b,this.dataset.getAlltEntities())});c.appendChild(a);this.container.appendChild(c)};Datacell.prototype.submitModifyByXML=function(f,e,b,a){if(!a){this.submitModifyBy3XML(f,e,b);return}if(this.modifyEntitiesXMLDiv){this.modifyEntitiesXMLDiv.parentNode.removeChild(this.modifyEntitiesXMLDiv)}var c=$createElement("div",{style:{display:"none"}});this.modifyEntitiesXMLDiv=c;var d=[];d[0]=this.getEntitiesXML(f||"insertEntities",this.dataset.getInsertEntities());d[1]=this.getEntitiesXML(e||"updateEntities",this.dataset.getModifiedEntities());d[2]=this.getEntitiesXML(b||"deleteEntities",this.dataset.getRemovedEntities());var g=$createElement("input",{type:"hidden",name:a||"modifyEntities",value:d.join("")});c.appendChild(g);this.container.appendChild(c)};Datacell.prototype.submitModifyBy3XML=function(g,f,d){if(this.modifyEntitiesXMLDiv){this.modifyEntitiesXMLDiv.parentNode.removeChild(this.modifyEntitiesXMLDiv)}var e=$createElement("div",{style:{display:"none"}});this.modifyEntitiesXMLDiv=e;var c=$createElement("input",{type:"hidden",name:g||"insertEntities",value:this.getEntitiesXML(g||"insertEntities",this.dataset.getInsertEntities())});var b=$createElement("input",{type:"text",name:f||"updateEntities",value:this.getEntitiesXML(f||"updateEntities",this.dataset.getModifiedEntities())});var a=$createElement("input",{type:"hidden",name:d||"deleteEntities",value:this.getEntitiesXML(d||"deleteEntities",this.dataset.getRemovedEntities())});e.appendChild(c);e.appendChild(b);e.appendChild(a);this.container.appendChild(e)};Datacell.prototype.submitAllByHidden=function(){if(!this.validateAll()){return false}if(this.allEntitiesHiddenDiv){this.allEntitiesHiddenDiv.parentNode.removeChild(this.allEntitiesHiddenDiv)}var c=$createElement("div",{style:{display:"none"}});this.container.appendChild(c);this.allEntitiesHiddenDiv=c;var a=this.dataset.name;var b=this.getSubmitXpath();var d=Dataset2Array(this.dataset,b,true);this.addHiddenByArray(d,c);return true};Datacell.prototype.submitModifyByHidden=function(d,c,a){if(!this.validateAll()){return false}if(this.modifyEntitiesHiddenDiv){this.modifyEntitiesHiddenDiv.parentNode.removeChild(this.modifyEntitiesHiddenDiv)}var b=$createElement("div",{style:{display:"none"}});this.container.appendChild(b);this.modifyEntitiesHiddenDiv=b;var e=Dataset2Array(this.dataset.getInsertDataset(),d||"insertEntities");e=e.concat(Dataset2Array(this.dataset.getModifiedDataset(),c||"updateEntities"));e=e.concat(Dataset2Array(this.dataset.getRemovedDataset(),a||"deleteEntities"));this.addHiddenByArray(e,b);return true};Datacell.prototype.addHiddenByArray=function(d,a){var c=new StringBuffer();for(var b=0;b<d.length;b++){if(d[b].value==null){continue}c.append("<textarea  name='");c.append(d[b].key);c.append("' >");c.append(d[b].value);c.append("</textarea>")}a.innerHTML=c};Datacell.prototype.unSelectRow=function(){var a=this.activeRow;if(!a){return true}else{this.endEdit()}if(this.onUnSelectRow(a,this.getEntity(a))){removeClass(a,this.rowSelectStyleClass);this.activeRow=null;return true}else{return false}};Datacell.prototype.onUnSelectRow=function(b,a){return true};Datacell.prototype.setValue=function(a){this.dataset=a;$info("datacell setvalue "+a);this.refresh()};Datacell.prototype.getValue=function(){return this.dataset};Datacell.prototype.setFocus=function(){};Datacell.prototype.lostFocus=function(){this.endEdit()};function Pilot(a){this.id=a;PageControl.add(a,this);this.container=null;this.currPage=1;this.totalPages=null;this.currRecord=null;this.totalRecords=null;this.width="100%";this.height="100%";this.inputClass="INPUT";this.readonly=false;this.addButton=null;this.deleteButton=null;this.firstPageButton=null;this.nextPageButton=null;this.prePageButton=null;this.lastPageButton=null;this.gotoPageText=null;this.gotoPageButton=null;this.saveButton=null;this.reloadButton=null;this.begin=0;this.length=10;this.count=-1;this.isCount=false;this.totalPage=-1;this.currentPage=-1;this.isLast=false;this.isFirst=true;this.first_able=true;this.pre_able=true;this.next_able=true;this.last_able=true;this.add_able=true;this.delete_able=true}Datacell.prototype.setCustomTool=function(b,a){var a=a||this.__pagePilot[0].id;this.customToolHTML=b;var c=$id(a+"_custom_zone");if(c){c.innerHTML=this.customToolHTML;return true}return false};Datacell.prototype.hiddenButtons=function(a){};Pilot.prototype.init=function(){};Pilot.prototype.build=function(){if(this.datacell.toolbarLocation=="top"){this.container=this.datacell.topToolbarDiv}else{this.container=this.datacell.bottomToolbarDiv}var b=this.datacell;var v=b.toolsList.split(",");str=[];var g=(""+this.datacell.pageSizeList)!="none"&&(""+this.datacell.pageSizeList)!="null";for(var r=0;r<v.length;r++){var a=v[r].split(":");var f=a[1]||null;a=a[0];if(f){f=" "+f+" "}switch(a){case"nav":str=str.concat(['<div class="eos-tool-zone" id="'+this.id+'_nav_zone" >',(f&&f.indexOf(" first ")<0)?"":'<a title="'+TOOLTIP_FIRST_PAGE+'" id="'+this.id+'_first" href="javascript:void(0);"><div class="eos-grid-tool-first"></div></a>',(f&&f.indexOf(" prev ")<0)?"":'<a title="'+TOOLTIP_PRIVOUS_PAGE+'" id="'+this.id+'_previous" href="javascript:void(0);"><div class="eos-grid-tool-prev"></div></a>',(f&&f.indexOf(" next ")<0)?"":'<a title="'+TOOLTIP_NEXT_PAGE+'" id="'+this.id+'_next" href="javascript:void(0);"><div class="eos-grid-tool-next"></div></a>',(f&&f.indexOf(" last ")<0)?"":'<a title="'+TOOLTIP_LAST_PAGE+'" id="'+this.id+'_last" href="javascript:void(0);"><div class="eos-grid-tool-last"></div></a>',(f&&f.indexOf(" goto ")<0)?"":'<input type="text" size="3" maxlength="4" class="eos-grid-tool-goto-input" id="'+this.id+'_input" /><a title="'+TOOLTIP_GOTO+'" id="'+this.id+'_goto" href="javascript:void(0);" style="margin-left:0px;"><div class="eos-grid-tool-goto"></div></a>',"</div>"]);break;case"pagesize":if(g){str=str.concat(["<div >",'<div class="eos-grid-tool-pageinfo" id="'+this.id+'_pagesize"  >',"</div>","</div>"])}break;case"custom":str=str.concat(['<div class="eos-tool-zone" id="'+this.id+'_custom_zone" >',b.customToolHTML||"","</div>"]);break;case"edit":str=str.concat(['<div class="eos-tool-zone">',(f&&f.indexOf(" add ")<0)?"":'<a title="'+TOOLTIP_ADD+'" id="'+this.id+'_add" href="javascript:void(0);"><div class="eos-grid-tool-add"></div></a>',(f&&f.indexOf(" del ")<0)?"":'<a title="'+TOOLTIP_DELETE+'" id="'+this.id+'_del" href="javascript:void(0);"><div class="eos-grid-tool-del"></div></a>',(f&&f.indexOf(" save ")<0)?"":'<a title="'+TOOLTIP_SAVE+'" id="'+this.id+'_save" href="javascript:void(0);"><div class="eos-grid-tool-save"></div></a>',(f&&f.indexOf(" reload ")<0)?"":'<a title="'+TOOLTIP_RELOAD+'" id="'+this.id+'_reload" href="javascript:void(0);"><div class="eos-grid-tool-reload"></div></a>',"</div>"]);break;case"info":str=str.concat(['<div class="eos-tool-zone">','<div class="eos-grid-tool-pageinfo" id="'+this.id+'_pageinfo"  >',"</div>","</div>"]);break}}this.container.innerHTML=str.join("\n");this.firstPageButton=$id(this.id+"_first");this.nextPageButton=$id(this.id+"_next");this.prePageButton=$id(this.id+"_previous");this.lastPageButton=$id(this.id+"_last");this.gotoPageText=$id(this.id+"_input");this.gotoPageButton=$id(this.id+"_goto");var q=$id(this.id+"_pagesize");if(g&&q){var l={};var p=this.datacell.pageSizeList.split(",");for(var r=0;r<p.length;r++){l[p[r]]=p[r]}this.pageSizeSelect=createSelect(l,this.datacell.pageSize);this.pageSizeSelect.id=this.id+"_size";this.pageSizeSelect.className="eos-pagesize-select";q.appendChild(this.pageSizeSelect)}this.addButton=$id(this.id+"_add");this.deleteButton=$id(this.id+"_del");this.saveButton=$id(this.id+"_save");this.reloadButton=$id(this.id+"_reload");this.pageInfoDiv=$id(this.id+"_pageinfo");var t=this;if(g&&this.pageSizeSelect){function j(){t.datacell.endEdit();t.datacell.pageSize=Number(t.pageSizeSelect.value);t.gotoPage(1)}eventManager.add(this.pageSizeSelect,"change",j)}function c(){var i=eventManager.getKeyCode();if(i==27){eventManager.stopEvent();t.gotoInputPage()}}eventManager.add(this.gotoPageText,"keypress",c);function h(){t.addRow()}eventManager.add(this.addButton,"click",h);function d(){b.endEdit();t.deleteRow()}eventManager.add(this.deleteButton,"click",d);function e(){b.endEdit();if(t.firstPageButton._disabled){return}t.gotoFirstPage()}eventManager.add(this.firstPageButton,"click",e);function o(){b.endEdit();if(t.nextPageButton._disabled){return}t.gotoNextPage()}eventManager.add(this.nextPageButton,"click",o);function k(){b.endEdit();if(t.prePageButton._disabled){return}t.gotoPrePage()}eventManager.add(this.prePageButton,"click",k);function u(){b.endEdit();if(t.lastPageButton._disabled){return}t.gotoLastPage()}eventManager.add(this.lastPageButton,"click",u);function w(){b.endEdit();if(t.gotoPageButton._disabled){return}t.gotoInputPage()}eventManager.add(this.gotoPageButton,"click",w);function s(){eventManager.stopEvent();b.endEdit();if(t.saveButton._disabled){return}var x=false;for(var y=0;y<t.datacell.fields.length;y++){if(t.datacell.fields[y].allowModify==true){x=true;break}}if(!x){return}t.datacell.save()}eventManager.add(this.saveButton,"click",s);function m(){b.endEdit();if(t.reloadButton._disabled){return}var i=true;if(t.datacell.isModefied&&confirm(DATACELL_MODIFY_CONFIRM)){t.datacell.submit()}else{t.datacell.reload()}}eventManager.add(this.reloadButton,"click",m);function n(){t.clearup()}eventManager.add(window,"unload",n)};Pilot.prototype.freshPilot=function(a,i,j,g){var f=true;var d=true;var h=true;var m=true;var c=false;if(a){c=true;this.begin=parseInt(a.getProperty("begin"))||0;this.datacell.pageSize=Number(this.datacell.pageSize<1?parseInt(a.getProperty("length")):this.datacell.pageSize);this.count=parseInt(a.getProperty("count"));this.datacell.isCount=(a.getProperty("isCount")=="true");this.totalPage=parseInt(a.getProperty("totalPage"));this.currentPage=parseInt(a.getProperty("currentPage"))||1;this.isLast=(a.getProperty("isLast")=="true");this.isFirst=(a.getProperty("isFirst")=="true");this.currentPage=this.currentPage<1?1:this.currentPage;if(!this.datacell.isCount){this.currentPage=parseInt(this.begin/this.datacell.pageSize)+1}var e=isNaN(this.currentPage/1)||this.currentPage<1?1:this.currentPage;var l=isNaN(this.totalPage/1)||this.totalPage<1?1:this.totalPage;var k=isNaN(this.count/1)||this.count<0?0:this.count;var b=Number(isNaN(this.begin/1)||this.begin<0?0:this.begin)+1;var n=b+this.datacell.pageSize-1;n=n>k?k:n;n=n<b?b:n;if(this.gotoPageText){this.gotoPageText.value=e}if(this.pageInfoDiv){this.pageInfoDiv.innerHTML="<nobr>";if(!this.datacell.isCount||k<0){this.pageInfoDiv.innerHTML+="<nobr>"+this.datacell.PAGE_RECORDINFO_NOCOUNT.replace("{0}",b).replace("{1}",n)+"</nobr>"}else{this.pageInfoDiv.innerHTML+=this.datacell.PAGE_RECORDINFO.replace("{0}",b).replace("{1}",n).replace("{2}",k);this.pageInfoDiv.innerHTML+="&#160;&#160;<nobr>"+this.datacell.PAGE_INFO.replace("{0}",l)+"</nobr>"}this.pageInfoDiv.innerHTML+="</nobr>"}}if(this.firstPageButton){this.firstPageButton._disabled=this.isFirst||!c}if(this.prePageButton){this.prePageButton._disabled=this.isFirst||!c}if(this.nextPageButton){this.nextPageButton._disabled=this.isLast||!c}if(this.lastPageButton){this.lastPageButton._disabled=this.isLast||this.count<0||!c}if(this.isFirst||!c){setOpacity(this.firstPageButton,0.5);setOpacity(this.prePageButton,0.5)}else{setOpacity(this.firstPageButton,1);setOpacity(this.prePageButton,1)}if(this.isLast||!c){setOpacity(this.nextPageButton,0.5);setOpacity(this.lastPageButton,0.5)}else{setOpacity(this.nextPageButton,1);setOpacity(this.lastPageButton,1)}if(this.count<0||!c){setOpacity(this.lastPageButton,0.5)}if(!c||!a.getProperty("begin")){if(this.gotoPageButton){this.gotoPageButton._disabled=true;this.gotoPageText.disabled=true;setOpacity(this.gotoPageButton,0.5)}}};Pilot.prototype.clearup=function(){for(var b in this){try{this[b]=null}catch(a){$handle(a)}}};Pilot.prototype.gotoPage=function(a){a=Number(a);if(isNaN(a)){a=1}a=parseInt(a,10);this.currentPage=a;if(a<1){a=1}var d=(a-1)*Number(this.datacell.pageSize);if(d<0){d=0}var c=this.count;if(!this.datacell.isCount){c=-1}var b=this.datacell.setPageParam(d,this.datacell.pageSize,c,this.datacell.isCount);this.datacell.gotoPage(b)};Pilot.prototype.gotoInputPage=function(){var a=Number(this.gotoPageText.value);if(isNaN(a)){alert(DATACELL_PAGENUM_ERR)}else{this.gotoPage(a)}};Pilot.prototype.gotoFirstPage=function(){if(this.first_able){this.gotoPage(1)}};Pilot.prototype.gotoNextPage=function(){if(this.next_able){this.gotoPage(this.getCurrPage()+1)}};Pilot.prototype.gotoPrePage=function(){if(this.pre_able){this.gotoPage(this.getCurrPage()-1)}};Pilot.prototype.gotoLastPage=function(){if(this.last_able){this.gotoPage(this.getPageCount())}};Pilot.prototype.addRow=function(){this.datacell.addRow()};Pilot.prototype.deleteRow=function(){this.datacell.deleteRow()};Pilot.prototype.reloadData=function(){this.datacell.reload()};Pilot.prototype.submit=function(){this.datacell.submit()};Pilot.prototype.setButton=function(g,f,c,e,b,a,d){if(g){this.first_able=true;this.firstPageButton.src=this.iconPath+PICTURE_FIRST_BUTTON}else{this.first_able=false;this.firstPageButton.src=this.iconPath+PICTURE_FIRST_DISABLE}if(f){this.pre_able=true;this.prePageButton.src=this.iconPath+PICTURE_PRIVOUS_BUTTON}else{this.pre_able=false;this.prePageButton.src=this.iconPath+PICTURE_PRIVOUS_DISABLE}if(c){this.next_able=true;this.nextPageButton.src=this.iconPath+PICTURE_NEXT_BUTTON}else{this.next_able=false;this.nextPageButton.src=this.iconPath+PICTURE_NEXT_DISABLE}if(e){this.last_able=true;this.lastPageButton.src=this.iconPath+PICTURE_LAST_BUTTON}else{this.last_able=false;this.lastPageButton.src=this.iconPath+PICTURE_LAST_DISABLE}if(a||b){this.addButton.src=this.iconPath+PICTURE_ADD_DISABLE}else{this.addButton.src=this.iconPath+PICTURE_ADD_BUTTON}if(!d||b){this.deleteButton.src=this.iconPath+PICTURE_DELETE_DISABLE}else{this.deleteButton.src=this.iconPath+PICTURE_DELETE_BUTTON}};Pilot.prototype.getPageCount=function(){return this.totalPage};Pilot.prototype.getCurrPage=function(){return this.currentPage};Datacell.prototype.rowMoveUp=function(f){f=f||this.activeRow;if(!f){return}var b=f.parentNode;var a=f.rowIndex;var c=f.getAttribute("__entity_rowno");if(a<1){return}var e=b.rows[a-1];var d=e.getAttribute("__entity_rowno");b.insertBefore(f,e)};Datacell.prototype.rowMoveDown=function(f){f=f||this.activeRow;if(!f){return}var b=f.parentNode;var a=f.rowIndex;var c=f.getAttribute("__entity_rowno");if(a>=b.rows.length-1){return}var e=b.rows[a+1];var d=e.getAttribute("__entity_rowno");b.insertBefore(e,f)};Datacell.prototype.getActiveRow=function(){return this.activeRow};Datacell.prototype.getActiveCell=function(){return this.activeCell};Datacell.prototype.getActiveEntity=function(){return this.getEntity(this.getActiveRow())};Datacell.prototype.showEditor=function(){PageControl.addtoStack(this);this.datacellContainer.style.display="";this.datacellContainer.onmousedown=function(){eventManager.stopEvent()}};Datacell.prototype.hideEditor=function(){if(this.activeEditor){this.activeEditor.hideEditor()}if(this.datacellContainer){this.datacellContainer.style.display="none";this.datacellContainer.onmousedown=null}};Datacell.prototype.hide=function(){this.hideEditor()};Datacell.prototype.setPosition=function(c,a,b,f){this.datacellContainer.style.position="absolute";var e=getMaxZindex();var d=getMaxZindex(document);if(this.datacellContainer.style.zIndex!=d){this.datacellContainer.style.zIndex=d}setElementXY(this.datacellContainer,[c,a])};Datacell.prototype.getDisplayValue=function(a){return a};Datacell.prototype.isFocus=function(){return false};Datacell.prototype.validate=function(){return true};Datacell.prototype.onSelectRow=function(b,a){};Datacell.prototype.onDeleteRow=function(b,a){return true};Datacell.prototype.onSubmit=function(){return true};Datacell.prototype.onAddRow=function(a){return true};Datacell.prototype.onUpdateCell=function(){};Datacell.prototype.onLoadData=function(){return true};Datacell.prototype.onUpdateRow=function(a){return true};Datacell.prototype.onUpdate=function(){return true};Datacell.prototype.beforeInit=function(){};Datacell.prototype.afterInit=function(){};Datacell.prototype.beforeLoadData=function(){};Datacell.prototype.afterLoadData=function(){};Datacell.prototype.beforeRefresh=function(){};Datacell.prototype.afterRefresh=function(){};Datacell.prototype.beforeSubmit=function(){};Datacell.prototype.afterSubmit=function(){};Datacell.prototype.beforeSubmit=function(){};Datacell.prototype.beforeSave=function(){};Datacell.prototype.afterSave=function(){};Datacell.prototype.beforeRefreshCell=function(){};Datacell.prototype.beforeAdd=function(){};Datacell.prototype.afterAdd=function(){};Datacell.prototype.beforeEdit=function(a,c,b){};Datacell.prototype.afterEdit=function(c,b,a){};Datacell.prototype.beforeDel=function(){};Datacell.prototype.afterDel=function(){};Datacell.prototype.beforeSelectRow=function(){};Datacell.prototype.afterSelectRow=function(){};Datacell.prototype.beforeUnselectRow=function(){};Datacell.prototype.afterUnselectRow=function(){};Datacell.prototype.onComplete=function(){};Datacell.prototype.onPageChange=function(){};Datacell.prototype.onClickHead=function(b,c,d,a){};Datacell.prototype.onClickCell=function(d,c,e,b,f,a){};Datacell.prototype.onClickRow=function(c,d,b,a){};Datacell.activeGrid=null;Datacell.STATUS_BLANK=0;Datacell.STATUS_INITED=1;Datacell.STATUS_MODEFIED=2;Datacell.BLOLK_ID="__DATACELL_BLOCK";Datacell.__INDEX_NAME="__INDEX";Datacell.outClick=function(k,l,f){var d=k.datacell;var b=d.editorContainer;if(b&&l){var h=f.x;var g=f.y;var j=getPosition(b);var e=j.top;var c=j.left;var i=c+b.offsetWidth;var a=e+b.offsetHeight;if(!b.contains(l)){if(e>g||c>h||i<h||a<g){d.endEdit()}}}else{d.endEdit()}};Datacell.isCell=function(c){if(c&&c.tagName){var a=c.tagName.toLowerCase()=="td";var b=c.getAttribute("fieldId");if(b&&a){return true}return false}return false};Datacell.isHead=function(c){if(c.tagName){var a=c.tagName.toLowerCase()=="th";var b=c.getAttribute("__type")=="head";if(b&&a){return true}return false}return false};Datacell.getDatacellByCell=function(b){try{var c=getParentByTagName(b,"table");var a=c.datacell;return a}catch(d){$handle(d);return null}};Datacell.checkCell=function(j,c,d,i,f,g,e){var a="",h=e;if(j==g){a="checked";h=g}h=h||h===0?h:"";var b="fieldFunc_"+f.id+"_"+i;Datacell[b]=function(k){var l=f.fields[i].fieldName;if(k.checked){c.setProperty(l,g)}else{c.setProperty(l,e)}};return'<input type="checkbox" '+a+' value="'+(""+h).replace(/\"/igm,'\\"').replace(/\n/igm,"\\n")+'"  onclick="Datacell[\''+b+"'](this)\"  />"};Datacell.checkCellHandler=function(a){};Datacell.getFormatValue=function(a,b){if(isDateFormat(b)){if(isTimeFormat(b)){return dateFormat(a,DATETIME_FORMAT,b)}else{return dateFormat(a,DATE_FORMAT,b)}}else{if(isTimeFormat(b)){return timeFormat(a,TIME_FORMAT,b)}else{return formatNumber(a,b)}}};Datacell.$editor=function(a){if(!a||(a&&a.getValue)){return a}return SimpleEditor(a)};Datacell.getSortValue=function(a,c,e){var d=a.dataset.get(c.getAttribute("__entity_rowno")/1).getProperty(e);var b=d?Number(d):d;d=isNaN(b)?d:b;return d};Datacell.getSortDefaultValue=function(a,b,c){return b.getAttribute("__entity_rowno")/1};function getDatacellRoot(b){var a=getParentByTagName(b,"table");if(a){if(a.className&&a.className.indexOf("eos-grid-container")!=-1){return a}else{if(a){return getDatacellRoot(a)}}}else{return null}}Datacell.initGlobalEvent=function(){eventManager.add(document,"keydown",function(a){Datacell.activeGrid&&Datacell.activeGrid._onKeyDown(a)});eventManager.add(document.body,"click",function(b){var a=b.srcElement||b.target;if(!getDatacellRoot(a)){Datacell.activeGrid=null}});eventManager.add(document.body,"mousemove",function(a){Datacell.activeGrid&&Datacell.doDocGridHandler(a,Datacell.activeGrid)});eventManager.add(document.body,"mouseup",function(a){Datacell.activeGrid&&Datacell.endDocGridHandler(a,Datacell.activeGrid)})};Datacell.doDocGridHandler=function(b,a){b=b||window.event;var c=eventManager.getPointX();if(a.splitLine.style.display=="block"){var d=c-a.viewportXY[0];a.splitLine.style.left=d+"px"}else{}};Datacell.endDocGridHandler=function(c,a){c=c||window.event;var g=eventManager.getPointX();if(a.splitLine.style.display=="block"){var f=a.resizeColumn;f.newRightX=g-a.viewportXY[0];var e=f.newRightX-f.oldRightX;var b=parseInt(CSSUtil.getRule("."+f.styleClass,true).style.width);var d=e+b;a.setColumnWidth(f,d);a.resizeColumn=false;a.splitLine.style.display="none";a.headDiv.style.cursor="auto";a.gridMask.style.cursor="auto";a.gridMask.style.display="none";a.syncScroll()}else{}};Datacell.onWindowResize=function(a){if(_eos_curr_open_panel!=null){if(!a.isInCurrPanel()){return}}a.autoResizeS1()};Datacell.prototype.autoResizeS1=function(){var a=this;a.bodyDivHeight=a.containerTD.offsetHeight-a.headHeight;a.bodyDivWidth=a.containerTD.offsetWidth;var b=false;if(a.width.indexOf("%")!=-1){b=true}if(a.height.indexOf("%")!=-1){a.container.style.height="100%";a.bodyDiv.style.height="1px";a.freezeBodyDiv.style.height=a.bodyDiv.clientHeight+"px";b=true}else{if(a.bodyDivHeight>0){a.bodyDiv.style.height=a.bodyDivHeight+"px"}if(a.bodyDiv.clientHeight>0){}}if(b){setTimeout(function(){a.autoResize()},1)}else{a.syncScroll()}};Datacell.prototype.autoResizeS2=function(){var a=this;a.bodyDivHeight=a.containerTD.offsetHeight-a.headHeight;a.bodyDivWidth=a.containerTD.offsetWidth;if(a.height.indexOf("%")!=-1){if(a.bodyDivHeight>0){a.bodyDiv.style.height=a.bodyDivHeight+"px"}if(a.bodyDiv.clientHeight>0){a.freezeBodyDiv.style.height=a.bodyDiv.clientHeight+"px"}}if(a.width.indexOf("%")!=-1){if(a.bodyDivWidth>0){a.bodyDiv.style.width=a.bodyDivWidth+"px"}}};Datacell.prototype.autoResize=Datacell.prototype.autoResizeS2;Datacell.prototype.isInCurrPanel=function(){if(_eos_curr_open_panel!=null){var a=this.datacellContainer.offsetParent;while(true){if(a==null){return false}if(a==_eos_curr_open_panel.table){return true}a=a.offsetParent}}else{return false}};Datacell.createSwidthCheckBox=function(h,d,a,i,e){var g=e.getField(i);var f=g.checkedValue;var c=g.unCheckedValue;var b="";if(f==h){b="checked"}return'<input type="checkbox" '+b+' swidthCheckbox="true"/>'};function VerifyCode(a){this.config=a}VerifyCode.prototype.init=function(){this.container=$id(this.config.name+"_container");if(this.config.hasInput==true){this.initInput()}this.initImg();PageControl.add(this.config.name,this)};VerifyCode.prototype.initInput=function(){if(this.config.style){this.text=$create("<input style="+this.config.style+">")}else{this.text=$create("input")}this.text.className=this.config.className||"";this.text.name=this.config.name;this.text.validateAttr=this.config.validateAttr||"";this.container.appendChild(this.text)};VerifyCode.prototype.initImg=function(){this.codeImage=$create("img");this.container.appendChild(this.codeImage);this.codeImage.style.verticalAlign="text-bottom";this.codeImage.style.marginLeft="6px";this.codeImage.title=VERIFYCODETITLE;this.imageUrl=contextPath+"/common/jsp/codeImage.jsp?name="+this.config.name+"&imageHeight="+this.config.imageHeight+"&length="+this.config.length+"&type="+this.config.type;this.codeImage.src=this.imageUrl;var a=this;eventManager.add(this.codeImage,"click",function(){return function(){this.codeImage.src=this.imageUrl+"&timestamp="+Math.random()}.call(a)})};